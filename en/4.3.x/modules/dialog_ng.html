<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>dialog_ng Module</title>
    <link rel="stylesheet" type="text/css" href="../../../../css/sr-doc.css" tppabs="http://kamailio.org/css/sr-doc.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="#idp11206920" title="dialog_ng Module" />
    <link rel="next" href="#idp17662648" title="Chapter 1. Admin Guide" />
  </head>
  <body>
    <div class="book" title="dialog_ng Module">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="idp11206920"></a>dialog_ng Module</h1>
          </div>
          <div>
            <div class="authorgroup">
              <div class="author">
                <h3 class="author"><span class="firstname">Bogdan-Andrei</span> <span class="surname">Iancu</span></h3>
                <div class="affiliation">
                  <span class="orgname">Voice Sistem SRL<br /></span>
                </div>
              </div>
              <div class="author">
                <h3 class="author"><span class="firstname">Carsten</span> <span class="surname">Bock</span></h3>
                <div class="affiliation">
                  <span class="orgname">ng-voice GmbH<br /></span>
                </div>
              </div>
              <div class="author">
                <h3 class="author"><span class="firstname">Jason</span> <span class="surname">Penton</span></h3>
                <div class="affiliation">
                  <span class="orgname">Smile Communications<br /></span>
                </div>
              </div>
              <div class="author">
                <h3 class="author"><span class="firstname">Richard</span> <span class="surname">Good</span></h3>
                <div class="affiliation">
                  <span class="orgname">Smile Communications<br /></span>
                </div>
              </div>
              <div class="editor">
                <h4 class="editedby">Edited by</h4>
                <h3 class="editor"><span class="firstname">Bogdan-Andrei</span> <span class="surname">Iancu</span></h3>
              </div>
              <div class="editor">
                <h4 class="editedby">Edited by</h4>
                <h3 class="editor"><span class="firstname">Carsten</span> <span class="surname">Bock</span></h3>
              </div>
              <div class="editor">
                <h4 class="editedby">Edited by</h4>
                <h3 class="editor"><span class="firstname">Jason</span> <span class="surname">Penton</span></h3>
              </div>
              <div class="editor">
                <h4 class="editedby">Edited by</h4>
                <h3 class="editor"><span class="firstname">Richard</span> <span class="surname">Good</span></h3>
              </div>
            </div>
          </div>
          <div>
            <p class="copyright">Copyright © 2006 Voice Sistem SRL</p>
          </div>
          <div>
            <p class="copyright">Copyright © 2011-2013 Carsten Bock, http://www.ng-voice.com</p>
          </div>
        </div>
        <hr />
      </div>
      <div class="toc">
        <p>
          <strong>Table of Contents</strong>
        </p>
        <dl>
          <dt>
            <span class="chapter">
              <a href="#idp17662648">1. Admin Guide</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#idp17071920">1. Overview</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#idp17704728">2. How it works</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#idp16887032">3. Dialog profiling</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#idp16623824">4. Dependencies</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp17980968">4.1. Kamailio Modules</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15442600">4.2. External Libraries or Applications</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp15444304">5. Parameters</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp15444672">5.1. 
                <code class="varname">enable_stats</code> (integer)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15445704">5.2. 
                <code class="varname">hash_size</code> (integer)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15506944">5.3. 
                <code class="varname">rr_param</code> (string)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#dlg-flag-id">5.4. 
                <code class="varname">dlg_flag</code> (integer)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#timeout-avp-id">5.5. 
                <code class="varname">timeout_avp</code> (string)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#default-timeout-id">5.6. 
                <code class="varname">default_timeout</code> (integer)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15486560">5.7. 
                <code class="varname">dlg_extra_hdrs</code> (string)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15489432">5.8. 
                <code class="varname">dlg_match_mode</code> (integer)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15490424">5.9. 
                <code class="varname">detect_spirals</code> (integer)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15493248">5.10. 
                <code class="varname">db_url</code> (string)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15494232">5.11. 
                <code class="varname">db_mode</code> (integer)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15495216">5.12. 
                <code class="varname">db_update_period</code> (integer)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15496208">5.13. 
                <code class="varname">db_fetch_rows</code> (integer)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15539944">5.14. 
                <code class="varname">table_name</code> (string)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15540928">5.15. 
                <code class="varname">profiles_with_value</code> (string)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15543648">5.16. 
                <code class="varname">profiles_no_value</code> (string)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15546424">5.17. 
                <code class="varname">bridge_controller</code> (string)
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15549216">5.18. 
                <code class="varname">initial_cbs_inscript</code> (string)
            </a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp15550264">6. Functions</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp15550632">6.1. 
                <code class="function">set_dlg_profile(profile,[value])</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15555512">6.2. 
                <code class="function">unset_dlg_profile(profile,[value])</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15560200">6.3. 
                <code class="function">is_in_profile(profile,[value])</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17301032">6.4. 
                <code class="function">get_profile_size(profile,[value],size)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17306928">6.5. 
                <code class="function">dlg_isflagset(flag)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17310800">6.6. 
                <code class="function">dlg_setflag(flag)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17314528">6.7. 
                <code class="function">dlg_resetflag(flag)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17318368">6.8. 
                <code class="function">dlg_terminate</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17323128">6.9. 
                <code class="function">dlg_refer(side, address)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17324296">6.10. 
                <code class="function">dlg_manage()</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17325560">6.11. 
                <code class="function">dlg_bridge(from, to, op)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17326728">6.12. 
		<code class="function">dlg_get(callid, ftag, ttag)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17331552">6.13. 
                <code class="function">is_known_dlg()</code>
            </a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp17332848">7. Exported statistics</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp17333224">7.1. 
                <code class="varname">active_dialogs</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17334288">7.2. 
                <code class="varname">early_dialogs</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17335352">7.3. 
                <code class="varname">processed_dialogs</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17336416">7.4. 
                <code class="varname">expired_dialogs</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17337480">7.5. 
                <code class="varname">failed_dialogs</code>
            </a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp17338624">8. MI Commands</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp17338992">8.1. 
                <code class="varname">dlg_list</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17344024">8.2. 
                <code class="varname">dlg_list_ctx</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17345088">8.3. 
                <code class="varname">dlg_end_dlg</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17346144">8.4. 
                <code class="varname">dlg_terminate_dlg</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17351568">8.5. 
                <code class="varname">profile_get_size</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17352632">8.6. 
                <code class="varname">profile_list_dlgs</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17353696">8.7. 
                <code class="varname">dlg_bridge</code>
            </a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp17354832">9. Exported RPC Functions</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp17355184">9.1. 
                <code class="varname">dlg.list</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17356256">9.2. 
                <code class="varname">dlg.list_ctx</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17357336">9.3. 
                <code class="varname">dlg.dlg_list</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17358416">9.4. 
                <code class="varname">dlg.dlg_list_ctx</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17359496">9.5. 
                <code class="varname">dlg.end_dlg</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17360568">9.6. 
                <code class="varname">dlg.profile_get_size</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17361624">9.7. 
                <code class="varname">dlg.profile_list</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17362704">9.8. 
                <code class="varname">dlg.bridge_dlg</code>
            </a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp17363864">10. Exported pseudo-variables</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp17364216">10.1. 
                <code class="varname">$DLG_count</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17365288">10.2. 
                <code class="varname">$DLG_status</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17366360">10.3. 
                <code class="varname">$DLG_lifetime</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17367440">10.4. 
                <code class="varname">$dlg(...)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17368512">10.5. 
                <code class="varname">$dlg_ctx(...)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp17369592">10.6. 
                <code class="varname">$dlg_var(key)</code>
            </a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#idp17655392">2. Developer Guide</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#idp17865064">1. Available Functions</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp18559648">1.1. 
                <code class="function">register_dlgcb (dialog, type, cb, param, free_param_cb)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp16409984">1.2. 
                <code class="function">terminate_dlg (str callid, str ftag, str ttag, hdrs)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp16414360">1.3. 
                <code class="function">lookup_terminate_dlg (unsigned int h_entry, unsigned int h_id, hdrs)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp18060200">1.4. 
                <code class="function">set_dlg_var (dlg, key, val)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp18063592">1.5. 
                <code class="function">get_dlg_var (dlg, key)</code>
            </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15684624">1.6. 
                <code class="function">get_current_dialog ()</code>
            </a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#idp18847136">3. Frequently Asked Questions</a>
            </span>
          </dt>
        </dl>
      </div>
      <div class="list-of-examples">
        <p>
          <strong>List of Examples</strong>
        </p>
        <dl>
          <dt>1.1. <a href="#idp15447912">Set 
                    <code class="varname">hash_size</code> parameter
                </a></dt>
          <dt>1.2. <a href="#idp15508608">Set 
                    <code class="varname">rr_param</code> parameter
                </a></dt>
          <dt>1.3. <a href="#idp15511528">Set 
                    <code class="varname">dlg_flag</code> parameter
                </a></dt>
          <dt>1.4. <a href="#idp15514544">Set 
                    <code class="varname">timeout_avp</code> parameter
                </a></dt>
          <dt>1.5. <a href="#idp15485376">Set 
                    <code class="varname">default_timeout</code> parameter
                </a></dt>
          <dt>1.6. <a href="#idp15488224">Set 
                    <code class="varname">dlf_extra_hdrs</code> parameter
                </a></dt>
          <dt>1.7. <a href="#idp15492064">Set 
                    <code class="varname">detect_spirals</code> parameter
                </a></dt>
          <dt>1.8. <a href="#idp15542504">Set 
                    <code class="varname">profiles_with_value</code> parameter
                </a></dt>
          <dt>1.9. <a href="#idp15545224">Set 
                    <code class="varname">profiles_no_value</code> parameter
                </a></dt>
          <dt>1.10. <a href="#idp15548016">Set 
                    <code class="varname">bridge_controller</code> parameter
                </a></dt>
          <dt>1.11. <a href="#idp15554176">
                    <code class="function">set_dlg_profile</code> usage
                </a></dt>
          <dt>1.12. <a href="#idp15558856">
                    <code class="function">unset_dlg_profile</code> usage
                </a></dt>
          <dt>1.13. <a href="#idp17299632">
                    <code class="function">is_in_profile</code> usage
                </a></dt>
          <dt>1.14. <a href="#idp17305416">
                    <code class="function">get_profile_size</code> usage
                </a></dt>
          <dt>1.15. <a href="#idp17309488">
                    <code class="function">dlg_isflagset</code> usage
                </a></dt>
          <dt>1.16. <a href="#idp17313296">
                    <code class="function">dlg_setflag</code> usage
                </a></dt>
          <dt>1.17. <a href="#idp17317072">
                    <code class="function">dlg_resetflag</code> usage
                </a></dt>
          <dt>1.18. <a href="#idp17321816">
                    <code class="function">dlg_terminate</code> usage
                </a></dt>
          <dt>1.19. <a href="#idp17330320"><code class="function">dlg_get</code> usage</a></dt>
        </dl>
      </div>
      <div class="chapter" title="Chapter 1. Admin Guide">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="idp17662648"></a>Chapter 1. Admin Guide</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <p>
            <strong>Table of Contents</strong>
          </p>
          <dl>
            <dt>
              <span class="section">
                <a href="#idp17071920">1. Overview</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#idp17704728">2. How it works</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#idp16887032">3. Dialog profiling</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#idp16623824">4. Dependencies</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp17980968">4.1. Kamailio Modules</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15442600">4.2. External Libraries or Applications</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp15444304">5. Parameters</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp15444672">5.1. 
                <code class="varname">enable_stats</code> (integer)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15445704">5.2. 
                <code class="varname">hash_size</code> (integer)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15506944">5.3. 
                <code class="varname">rr_param</code> (string)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#dlg-flag-id">5.4. 
                <code class="varname">dlg_flag</code> (integer)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#timeout-avp-id">5.5. 
                <code class="varname">timeout_avp</code> (string)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#default-timeout-id">5.6. 
                <code class="varname">default_timeout</code> (integer)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15486560">5.7. 
                <code class="varname">dlg_extra_hdrs</code> (string)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15489432">5.8. 
                <code class="varname">dlg_match_mode</code> (integer)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15490424">5.9. 
                <code class="varname">detect_spirals</code> (integer)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15493248">5.10. 
                <code class="varname">db_url</code> (string)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15494232">5.11. 
                <code class="varname">db_mode</code> (integer)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15495216">5.12. 
                <code class="varname">db_update_period</code> (integer)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15496208">5.13. 
                <code class="varname">db_fetch_rows</code> (integer)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15539944">5.14. 
                <code class="varname">table_name</code> (string)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15540928">5.15. 
                <code class="varname">profiles_with_value</code> (string)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15543648">5.16. 
                <code class="varname">profiles_no_value</code> (string)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15546424">5.17. 
                <code class="varname">bridge_controller</code> (string)
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15549216">5.18. 
                <code class="varname">initial_cbs_inscript</code> (string)
            </a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp15550264">6. Functions</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp15550632">6.1. 
                <code class="function">set_dlg_profile(profile,[value])</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15555512">6.2. 
                <code class="function">unset_dlg_profile(profile,[value])</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15560200">6.3. 
                <code class="function">is_in_profile(profile,[value])</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17301032">6.4. 
                <code class="function">get_profile_size(profile,[value],size)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17306928">6.5. 
                <code class="function">dlg_isflagset(flag)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17310800">6.6. 
                <code class="function">dlg_setflag(flag)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17314528">6.7. 
                <code class="function">dlg_resetflag(flag)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17318368">6.8. 
                <code class="function">dlg_terminate</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17323128">6.9. 
                <code class="function">dlg_refer(side, address)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17324296">6.10. 
                <code class="function">dlg_manage()</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17325560">6.11. 
                <code class="function">dlg_bridge(from, to, op)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17326728">6.12. 
		<code class="function">dlg_get(callid, ftag, ttag)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17331552">6.13. 
                <code class="function">is_known_dlg()</code>
            </a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp17332848">7. Exported statistics</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp17333224">7.1. 
                <code class="varname">active_dialogs</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17334288">7.2. 
                <code class="varname">early_dialogs</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17335352">7.3. 
                <code class="varname">processed_dialogs</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17336416">7.4. 
                <code class="varname">expired_dialogs</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17337480">7.5. 
                <code class="varname">failed_dialogs</code>
            </a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp17338624">8. MI Commands</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp17338992">8.1. 
                <code class="varname">dlg_list</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17344024">8.2. 
                <code class="varname">dlg_list_ctx</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17345088">8.3. 
                <code class="varname">dlg_end_dlg</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17346144">8.4. 
                <code class="varname">dlg_terminate_dlg</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17351568">8.5. 
                <code class="varname">profile_get_size</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17352632">8.6. 
                <code class="varname">profile_list_dlgs</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17353696">8.7. 
                <code class="varname">dlg_bridge</code>
            </a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp17354832">9. Exported RPC Functions</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp17355184">9.1. 
                <code class="varname">dlg.list</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17356256">9.2. 
                <code class="varname">dlg.list_ctx</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17357336">9.3. 
                <code class="varname">dlg.dlg_list</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17358416">9.4. 
                <code class="varname">dlg.dlg_list_ctx</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17359496">9.5. 
                <code class="varname">dlg.end_dlg</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17360568">9.6. 
                <code class="varname">dlg.profile_get_size</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17361624">9.7. 
                <code class="varname">dlg.profile_list</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17362704">9.8. 
                <code class="varname">dlg.bridge_dlg</code>
            </a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp17363864">10. Exported pseudo-variables</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp17364216">10.1. 
                <code class="varname">$DLG_count</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17365288">10.2. 
                <code class="varname">$DLG_status</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17366360">10.3. 
                <code class="varname">$DLG_lifetime</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17367440">10.4. 
                <code class="varname">$dlg(...)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17368512">10.5. 
                <code class="varname">$dlg_ctx(...)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp17369592">10.6. 
                <code class="varname">$dlg_var(key)</code>
            </a>
                  </span>
                </dt>
              </dl>
            </dd>
          </dl>
        </div>
        <div class="section" title="1. Overview">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp17071920"></a>1. Overview</h2>
              </div>
            </div>
          </div>
          <p>
	The dialog_ng module provides dialog awareness to the Kamailio proxy. Its
	functionality is to keep track of the current dialogs, to offer information
	about them (like how many dialogs are active) or to manage them. The module
	exports several functions that could be used directly from scripts.
        The dialog_ng module extends the original dialog module by providing support
        for forked calling and early dialog termination.  It is the intention that
        the dialog_ng module will eventually replace the dialog module.
        </p>
          <p>
	The module, via an internal API, also provide the foundation to build on
	top of it more complex dialog-based functionalities via other Kamailio
	modules.
        </p>
        </div>
        <div class="section" title="2. How it works">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp17704728"></a>2. How it works</h2>
              </div>
            </div>
          </div>
          <p>
	To create the dialog associated to an initial request, the flag
            <span class="quote">“<span class="quote">dlg_flag</span>”</span> (
            <a class="xref" href="#dlg-flag-id" title="5.4.  dlg_flag (integer)">Section 5.4, “
                <code class="varname">dlg_flag</code> (integer)
            ”</a>) must be set before
	creating the corresponding transaction.
        </p>
          <p>
	The dialog is automatically destroyed when a 
            <span class="quote">“<span class="quote">BYE</span>”</span> is
	received. In case of no 
            <span class="quote">“<span class="quote">BYE</span>”</span>, the dialog lifetime is
	controlled via the default timeout (see 
            <span class="quote">“<span class="quote">default_timeout</span>”</span>
	- 
            <a class="xref" href="#default-timeout-id" title="5.6.  default_timeout (integer)">Section 5.6, “
                <code class="varname">default_timeout</code> (integer)
            ”</a>) and custom timeout (see
            <span class="quote">“<span class="quote">timeout_avp</span>”</span> - 
            <a class="xref" href="#timeout-avp-id" title="5.5.  timeout_avp (string)">Section 5.5, “
                <code class="varname">timeout_avp</code> (string)
            ”</a>). The
	dialog timeout is reset each time a sequential request passes.
       
        
        </p>
        </div>
        <div class="section" title="3. Dialog profiling">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp16887032"></a>3. Dialog profiling</h2>
              </div>
            </div>
          </div>
          <p>
	Dialog profiling is a mechanism that helps in classifying, sorting and
	keeping trace of certain types of dialogs, using whatever properties of
	the dialog (like caller, destination, type of calls, etc).
	Dialogs can be dynamically added in different (and several) profile
	tables - logically, each profile table can have a special meaning (like
	dialogs outside the domain, dialogs terminated to PSTN, etc).
        </p>
          <p>
	There are two types of profiles:
            </p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
                <p>
                        <span class="emphasis"><em>with no value</em></span> - a dialog simply belongs
			to a profile. (like outbound calls profile). There is no other
			additional information to describe the dialog's belonging to the
			profile;
                    </p>
              </li>
              <li class="listitem">
                <p>
                        <span class="emphasis"><em>with value</em></span> - a dialog belongs to a profile
			having a certain value (like in caller profile, where the value
			is the caller ID). The belonging of the dialog to the profile is
			strictly related to the value.
                    </p>
              </li>
            </ul>
          </div>
          <p>
        </p>
          <p>
	A dialog can be added to multiple profiles in the same time.
        </p>
          <p>
	Profiles are visible (at the moment) in the request route (for initial
	and sequential requests) and in the branch, failure and reply routes of
	the original request.
        </p>
        </div>
        <div class="section" title="4. Dependencies">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp16623824"></a>4. Dependencies</h2>
              </div>
            </div>
          </div>
          <div class="section" title="4.1. Kamailio Modules">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17980968"></a>4.1. Kamailio Modules</h3>
                </div>
              </div>
            </div>
            <p>
		The following modules must be loaded before this module:
                </p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                            <span class="emphasis"><em>TM</em></span> - Transaction module
                        </p>
                </li>
                <li class="listitem">
                  <p>
                            <span class="emphasis"><em>RR</em></span> - Record-Route module
                        </p>
                </li>
              </ul>
            </div>
            <p>
            </p>
          </div>
          <div class="section" title="4.2. External Libraries or Applications">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15442600"></a>4.2. External Libraries or Applications</h3>
                </div>
              </div>
            </div>
            <p>
		The following libraries or applications must be installed before
		running Kamailio with this module loaded:
                </p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                            <span class="emphasis"><em>None</em></span>.
                        </p>
                </li>
              </ul>
            </div>
            <p>
            </p>
          </div>
        </div>
        <div class="section" title="5. Parameters">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp15444304"></a>5. Parameters</h2>
              </div>
            </div>
          </div>
          <div class="section" title="5.1.  enable_stats (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15444672"></a>5.1. 
                <code class="varname">enable_stats</code> (integer)
            </h3>
                </div>
              </div>
            </div>
            <p>
		This function is currently not supported by the dialog_ng module.
                To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="5.2.  hash_size (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15445704"></a>5.2. 
                <code class="varname">hash_size</code> (integer)
            </h3>
                </div>
              </div>
            </div>
            <p>
		The size of the hash table internally used to keep the dialogs. A
		larger table is much faster but consumes more memory. The hash size
		must be a power of two number.
            </p>
            <p>
		IMPORTANT: If dialogs' information should be stored in a database,
		a constant hash_size should be used, otherwise the restoring process
		will not take place. If you really want to modify the hash_size you
		must delete all table's rows before restarting the server.
            </p>
            <p>
                <span class="emphasis"><em>
			Default value is 
                    <span class="quote">“<span class="quote">4096</span>”</span>.
                </em></span>
            </p>
            <div class="example">
              <a id="idp15447912"></a>
              <p class="title">
                <strong>Example 1.1. Set 
                    <code class="varname">hash_size</code> parameter
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog_ng", "hash_size", 1024)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.3.  rr_param (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15506944"></a>5.3. 
                <code class="varname">rr_param</code> (string)
            </h3>
                </div>
              </div>
            </div>
            <p>
		Name of the Record-Route parameter to be added with the dialog cookie.
		It is used for the fast dialog matching of sequential requests.
            </p>
            <p>
                <span class="emphasis"><em>
			Default value is 
                    <span class="quote">“<span class="quote">did</span>”</span>.
                </em></span>
            </p>
            <div class="example">
              <a id="idp15508608"></a>
              <p class="title">
                <strong>Example 1.2. Set 
                    <code class="varname">rr_param</code> parameter
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog_ng", "rr_param", "xyz")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.4.  dlg_flag (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="dlg-flag-id"></a>5.4. 
                <code class="varname">dlg_flag</code> (integer)
            </h3>
                </div>
              </div>
            </div>
            <p>
		Flag to be used for marking if a dialog should be constructed for the
		current request (this make sense only for initial requests).
            </p>
            <p>
                <span class="emphasis"><em>
			Default value is 
                    <span class="quote">“<span class="quote">none</span>”</span>.
                </em></span>
            </p>
            <div class="example">
              <a id="idp15511528"></a>
              <p class="title">
                <strong>Example 1.3. Set 
                    <code class="varname">dlg_flag</code> parameter
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog_ng", "dlg_flag", 4)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.5.  timeout_avp (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="timeout-avp-id"></a>5.5. 
                <code class="varname">timeout_avp</code> (string)
            </h3>
                </div>
              </div>
            </div>
            <p>
		The specification of an AVP that contain a custom timeout (in seconds)
		for the dialog. It may be used only in a request (initial or sequential)
		context
            </p>
            <p>
                <span class="emphasis"><em>
			Default value is 
                    <span class="quote">“<span class="quote">none</span>”</span>.
                </em></span>
            </p>
            <div class="example">
              <a id="idp15514544"></a>
              <p class="title">
                <strong>Example 1.4. Set 
                    <code class="varname">timeout_avp</code> parameter
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog_ng", "timeout_avp", "$avp(i:10)")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.6.  default_timeout (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="default-timeout-id"></a>5.6. 
                <code class="varname">default_timeout</code> (integer)
            </h3>
                </div>
              </div>
            </div>
            <p>
		The default dialog timeout (in seconds) if no custom one is set.
            </p>
            <p>
                <span class="emphasis"><em>
			Default value is 
                    <span class="quote">“<span class="quote">43200 (12 hours)</span>”</span>.
                </em></span>
            </p>
            <div class="example">
              <a id="idp15485376"></a>
              <p class="title">
                <strong>Example 1.5. Set 
                    <code class="varname">default_timeout</code> parameter
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog_ng", "default_timeout", 21600)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.7.  dlg_extra_hdrs (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15486560"></a>5.7. 
                <code class="varname">dlg_extra_hdrs</code> (string)
            </h3>
                </div>
              </div>
            </div>
            <p>
		A string containing the extra headers (full format, with EOH)
		to be added in the requests generated by the module (like BYEs).
            </p>
            <p>
                <span class="emphasis"><em>
			Default value is 
                    <span class="quote">“<span class="quote">NULL</span>”</span>.
                </em></span>
            </p>
            <div class="example">
              <a id="idp15488224"></a>
              <p class="title">
                <strong>Example 1.6. Set 
                    <code class="varname">dlf_extra_hdrs</code> parameter
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog_ng", "dlg_extra_hdrs", "Hint: credit expired\r\n")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.8.  dlg_match_mode (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15489432"></a>5.8. 
                <code class="varname">dlg_match_mode</code> (integer)
            </h3>
                </div>
              </div>
            </div>
            <p>
		Deprecated - in the new dialog module we always match using DID ONLY
            </p>
          </div>
          <div class="section" title="5.9.  detect_spirals (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15490424"></a>5.9. 
                <code class="varname">detect_spirals</code> (integer)
            </h3>
                </div>
              </div>
            </div>
            <p>
			Whether spirals (i.e., messages routed through the proxy multiple times)
			should be detected or not.
            </p>
            <p>
			If set to 0, spirals will not be detected and result in the generation of a
			new, possibly dangling dialog structure per occurring spiral. If set to 1,
			spirals are detected and internally mapped to existing dialog structures.
            </p>
            <p>
			Default value is 1.
            </p>
            <div class="example">
              <a id="idp15492064"></a>
              <p class="title">
                <strong>Example 1.7. Set 
                    <code class="varname">detect_spirals</code> parameter
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog_ng", "detect_spirals", 1)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.10.  db_url (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15493248"></a>5.10. 
                <code class="varname">db_url</code> (string)
            </h3>
                </div>
              </div>
            </div>
            <p>
		Db storage not yet supported by dialog_ng - this to be done in future.
            </p>
          </div>
          <div class="section" title="5.11.  db_mode (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15494232"></a>5.11. 
                <code class="varname">db_mode</code> (integer)
            </h3>
                </div>
              </div>
            </div>
            <p>
		Db storage not yet supported by dialog_ng - this to be done in future.
            </p>
          </div>
          <div class="section" title="5.12.  db_update_period (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15495216"></a>5.12. 
                <code class="varname">db_update_period</code> (integer)
            </h3>
                </div>
              </div>
            </div>
            <p>
		Db storage not yet supported by dialog_ng - this to be done in future.
            </p>
          </div>
          <div class="section" title="5.13.  db_fetch_rows (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15496208"></a>5.13. 
                <code class="varname">db_fetch_rows</code> (integer)
            </h3>
                </div>
              </div>
            </div>
            <p>
		Db storage not yet supported by dialog_ng - this to be done in future.
            </p>
          </div>
          <div class="section" title="5.14.  table_name (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15539944"></a>5.14. 
                <code class="varname">table_name</code> (string)
            </h3>
                </div>
              </div>
            </div>
            <p>
		Db storage not yet supported by dialog_ng - this to be done in future.
            </p>
          </div>
          <div class="section" title="5.15.  profiles_with_value (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15540928"></a>5.15. 
                <code class="varname">profiles_with_value</code> (string)
            </h3>
                </div>
              </div>
            </div>
            <p>
			List of names for profiles with values.
            </p>
            <p>
                <span class="emphasis"><em>
			Default value is 
                    <span class="quote">“<span class="quote">empty</span>”</span>.
                </em></span>
            </p>
            <div class="example">
              <a id="idp15542504"></a>
              <p class="title">
                <strong>Example 1.8. Set 
                    <code class="varname">profiles_with_value</code> parameter
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "profiles_with_value", "caller ; my_profile")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.16.  profiles_no_value (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15543648"></a>5.16. 
                <code class="varname">profiles_no_value</code> (string)
            </h3>
                </div>
              </div>
            </div>
            <p>
			List of names for profiles without values.
            </p>
            <p>
                <span class="emphasis"><em>
			Default value is 
                    <span class="quote">“<span class="quote">empty</span>”</span>.
                </em></span>
            </p>
            <div class="example">
              <a id="idp15545224"></a>
              <p class="title">
                <strong>Example 1.9. Set 
                    <code class="varname">profiles_no_value</code> parameter
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "profiles_no_value", "inbound ; outbound")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.17.  bridge_controller (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15546424"></a>5.17. 
                <code class="varname">bridge_controller</code> (string)
            </h3>
                </div>
              </div>
            </div>
            <p>
			SIP address to be used in From header when initiating a call bridge.
            </p>
            <p>
                <span class="emphasis"><em>
			Default value is 
                    <span class="quote">“<span class="quote">sip:controller@kamailio.org</span>”</span>.
                </em></span>
            </p>
            <div class="example">
              <a id="idp15548016"></a>
              <p class="title">
                <strong>Example 1.10. Set 
                    <code class="varname">bridge_controller</code> parameter
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "bridge_controller", "sip:ctd@kamailio.org")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.18.  initial_cbs_inscript (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15549216"></a>5.18. 
                <code class="varname">initial_cbs_inscript</code> (string)
            </h3>
                </div>
              </div>
            </div>
            <p>
            This has been deprecated since dlg_manage has been removed.
            </p>
          </div>
        </div>
        <div class="section" title="6. Functions">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp15550264"></a>6. Functions</h2>
              </div>
            </div>
          </div>
          <div class="section" title="6.1.  set_dlg_profile(profile,[value])">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15550632"></a>6.1. 
                <code class="function">set_dlg_profile(profile,[value])</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Inserts the current dialog into a profile. Note that if the profile does
		not supports values, this will be silently discarded. Also, there is
		no check for inserting the same dialog in the same profile for multiple
		times.
            </p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>profile</em></span> - name of the profile to be
			added to;
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>value</em></span> (optional) - string value to
			define the belonging of the dialog to the profile - note that the
			profile must support values.
			Pseudo-variables are supported.
                    </p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from REQUEST_ROUTE, BRANCH_ROUTE,
			REPLY_ROUTE and FAILURE_ROUTE.
            </p>
            <div class="example">
              <a id="idp15554176"></a>
              <p class="title">
                <strong>Example 1.11. 
                    <code class="function">set_dlg_profile</code> usage
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
set_dlg_profile("inbound_call");
set_dlg_profile("caller","$fu");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.2.  unset_dlg_profile(profile,[value])">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15555512"></a>6.2. 
                <code class="function">unset_dlg_profile(profile,[value])</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Removes the current dialog from a profile.
            </p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>profile</em></span> - name of the profile to be
			removed from;
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>value</em></span> (optional) - string value to
			define the belonging of the dialog to the profile - note that the
			profile must support values.
			Pseudo-variables are supported.
                    </p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REPLY_ROUTE and FAILURE_ROUTE.
            </p>
            <div class="example">
              <a id="idp15558856"></a>
              <p class="title">
                <strong>Example 1.12. 
                    <code class="function">unset_dlg_profile</code> usage
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
unset_dlg_profile("inbound_call");
unset_dlg_profile("caller","$fu");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.3.  is_in_profile(profile,[value])">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15560200"></a>6.3. 
                <code class="function">is_in_profile(profile,[value])</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Checks if the current dialog belongs to a profile. If the profile
		supports values, the check can be reinforced to take into account a
		specific value - if the dialog was inserted into the profile for a
		specific value. If no value is passed, only the simply belonging of
		the  dialog to the profile is checked. Note that if the profile does
		not supports values, this will be silently discarded.
            </p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>profile</em></span> - name of the profile to be
			checked against;
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>value</em></span> (optional) - string value to
			further restrict the check. Pseudo-variables are supported.
                    </p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from REQUEST_ROUTE, BRANCH_ROUTE,
			REPLY_ROUTE and FAILURE_ROUTE.
            </p>
            <div class="example">
              <a id="idp17299632"></a>
              <p class="title">
                <strong>Example 1.13. 
                    <code class="function">is_in_profile</code> usage
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
if (is_in_profile("inbound_call")) {
	log("this request belongs to a inbound call\n");
}
...
if (is_in_profile("caller","XX")) {
	log("this request belongs to a call of user XX\n");
}
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.4.  get_profile_size(profile,[value],size)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17301032"></a>6.4. 
                <code class="function">get_profile_size(profile,[value],size)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Returns the number of dialogs belonging to a profile. If the profile
		supports values, the check can be reinforced to take into account a
		specific value - how many dialogs were inserted into the profile with
		a specific value. If no value is passed, only simply belonging of the
		dialog to the profile is checked. Note that if the profile does not
		supports values, this will be silently discarded.
            </p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>profile</em></span> - name of the profile to get
			the size for;
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>value</em></span> (optional) - string value to
			further restrict the check. Pseudo-variables are supported;
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>size</em></span> - an AVP or script variable to
			return the profile size in.
                    </p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from REQUEST_ROUTE, BRANCH_ROUTE,
			REPLY_ROUTE and FAILURE_ROUTE.
            </p>
            <div class="example">
              <a id="idp17305416"></a>
              <p class="title">
                <strong>Example 1.14. 
                    <code class="function">get_profile_size</code> usage
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
if(get_profile_size("inbound_call","$avp(size)"))
    xlog("currently there are $avp(size) inbound calls\n");
...
if(get_profile_size("caller","$fu","$avp(size)"))
    xlog("currently, the user $fu has $avp(size) active outgoing calls\n");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.5.  dlg_isflagset(flag)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17306928"></a>6.5. 
                <code class="function">dlg_isflagset(flag)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Check if the dialog flag is set or not.
            </p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>flag</em></span> - index of the flag - can be
				pseudo-variable.
                    </p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
            </p>
            <div class="example">
              <a id="idp17309488"></a>
              <p class="title">
                <strong>Example 1.15. 
                    <code class="function">dlg_isflagset</code> usage
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
if(dlg_isflagset("1"))
{
    ...
}
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.6.  dlg_setflag(flag)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17310800"></a>6.6. 
                <code class="function">dlg_setflag(flag)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Set the dialog flag.
            </p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>flag</em></span> - index of the flag - can be
				pseudo-variable.
                    </p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
            </p>
            <div class="example">
              <a id="idp17313296"></a>
              <p class="title">
                <strong>Example 1.16. 
                    <code class="function">dlg_setflag</code> usage
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
dlg_setflag("1");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.7.  dlg_resetflag(flag)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17314528"></a>6.7. 
                <code class="function">dlg_resetflag(flag)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Reset the dialog flag.
            </p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>flag</em></span> - index of the flag - can be
				pseudo-variable.
                    </p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
            </p>
            <div class="example">
              <a id="idp17317072"></a>
              <p class="title">
                <strong>Example 1.17. 
                    <code class="function">dlg_resetflag</code> usage
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
redlg_setflag("1");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.8.  dlg_terminate">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17318368"></a>6.8. 
                <code class="function">dlg_terminate</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Terminates a dialog.  In dialog_ng module this function now
                includes support for early as well as confirmed dialogs.
            </p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>side</em></span> - which side to terminate. 
                            It can be: caller, callee or both of them.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>reason</em></span> - reason for termination.
                    </p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
            </p>
            <div class="example">
              <a id="idp17321816"></a>
              <p class="title">
                <strong>Example 1.18. 
                    <code class="function">dlg_terminate</code> usage
                </strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
dlg_terminate("all", "Insufficient QoS");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.9.  dlg_refer(side, address)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17323128"></a>6.9. 
                <code class="function">dlg_refer(side, address)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		This function is currently not supported by the dialog_ng module.
                To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="6.10.  dlg_manage()">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17324296"></a>6.10. 
                <code class="function">dlg_manage()</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		This has been deprecated in dialog_ng. Instead set dialog flag for 
                initial INVITE and Route-parameter-callback execution for 
                within-dialog requests.
            </p>
          </div>
          <div class="section" title="6.11.  dlg_bridge(from, to, op)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17325560"></a>6.11. 
                <code class="function">dlg_bridge(from, to, op)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		This function is currently not supported by the dialog_ng module.
                To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="6.12.  dlg_get(callid, ftag, ttag)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17326728"></a>6.12. 
		<code class="function">dlg_get(callid, ftag, ttag)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
			Search and set current dialog based on Call-ID, From-Tag and To-Tag
			parameters.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>callid</em></span> - SIP call-id.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>ftag</em></span> - SIP From tag.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>ttag</em></span> - SIP To tag.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp17330320"></a>
              <p class="title">
                <strong>Example 1.19. <code class="function">dlg_get</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
if(dlg_get("abcdef", "123", "456"))
{
	dlg_bye("all");
}
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.13.  is_known_dlg()">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17331552"></a>6.13. 
                <code class="function">is_known_dlg()</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
        </div>
        <div class="section" title="7. Exported statistics">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp17332848"></a>7. Exported statistics</h2>
              </div>
            </div>
          </div>
          <div class="section" title="7.1.  active_dialogs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17333224"></a>7.1. 
                <code class="varname">active_dialogs</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
			This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="7.2.  early_dialogs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17334288"></a>7.2. 
                <code class="varname">early_dialogs</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
			This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="7.3.  processed_dialogs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17335352"></a>7.3. 
                <code class="varname">processed_dialogs</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
			This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="7.4.  expired_dialogs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17336416"></a>7.4. 
                <code class="varname">expired_dialogs</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
			This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="7.5.  failed_dialogs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17337480"></a>7.5. 
                <code class="varname">failed_dialogs</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
			This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
        </div>
        <div class="section" title="8. MI Commands">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp17338624"></a>8. MI Commands</h2>
              </div>
            </div>
          </div>
          <div class="section" title="8.1.  dlg_list">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17338992"></a>8.1. 
                <code class="varname">dlg_list</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Lists the description of a dialog or of all dialogs (calls). If only
		one dialogs is to be listed, the dialog identifiers are to be passed
		as parameter (callid and fromtag).  In dialog_ng module this also now 
                also lists all dlg_out entries for early dialogs.
                
            </p>
            <p>
		Name: 
                <span class="emphasis"><em>dlg_list</em></span>
            </p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>callid</em></span> (optional) - callid if a single
				dialog to be listed.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>from_tag</em></span> (optional, but cannot be present
				without the callid parameter) - from tag (as per initial request)
				of the dialog to be listed.  Note that if the from_tag is not
				specified, only dialogs created by a request without a from tag
				are matched, which will only occur with broken clients and is
				thus a very rare situation.
                    </p>
                </li>
              </ul>
            </div>
            <p>
		MI FIFO Command Format:
            </p>
            <pre class="programlisting">		:dlg_list:_reply_fifo_file_
		_empty_line_</pre>
            <pre class="programlisting">		:dlg_list:_reply_fifo_file_
		abcdrssfrs122444@192.168.1.1
		AAdfeEFF33</pre>
          </div>
          <div class="section" title="8.2.  dlg_list_ctx">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17344024"></a>8.2. 
                <code class="varname">dlg_list_ctx</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="8.3.  dlg_end_dlg">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17345088"></a>8.3. 
                <code class="varname">dlg_end_dlg</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
			This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="8.4.  dlg_terminate_dlg">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17346144"></a>8.4. 
                <code class="varname">dlg_terminate_dlg</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Terminates a singe dialog, identified by the call_id, ftag, ttag. In dialog_ng module this
                dialog can be terminated in the early or confirmed states.
            </p>
            <p>
		Name: 
                <span class="emphasis"><em>dlg_terminate_dlg</em></span>
            </p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>callid</em></span> - callid of the dialog to be terminated.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>ftag</em></span> fromtag of dialog to be terminated.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>ttag</em></span> totag of dialog to be terminated.
                    </p>
                </li>
              </ul>
            </div>
            <p>
                <span class="emphasis"><em>Note: Works for confirmed and early dialogs.</em></span>
            </p>
            <p>
		MI FIFO Command Format:
            </p>
            <pre class="programlisting">		:dlg_terminate_dlg:_reply_fifo_file_
		abcdrssfrs122444@192.168.1.1
		AAdfeEFF33 ftag-1234 t-tag1234</pre>
          </div>
          <div class="section" title="8.5.  profile_get_size">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17351568"></a>8.5. 
                <code class="varname">profile_get_size</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="8.6.  profile_list_dlgs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17352632"></a>8.6. 
                <code class="varname">profile_list_dlgs</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="8.7.  dlg_bridge">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17353696"></a>8.7. 
                <code class="varname">dlg_bridge</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
			This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
        </div>
        <div class="section" title="9. Exported RPC Functions">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp17354832"></a>9. Exported RPC Functions</h2>
              </div>
            </div>
          </div>
          <div class="section" title="9.1.  dlg.list">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17355184"></a>9.1. 
                <code class="varname">dlg.list</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="9.2.  dlg.list_ctx">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17356256"></a>9.2. 
                <code class="varname">dlg.list_ctx</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="9.3.  dlg.dlg_list">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17357336"></a>9.3. 
                <code class="varname">dlg.dlg_list</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="9.4.  dlg.dlg_list_ctx">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17358416"></a>9.4. 
                <code class="varname">dlg.dlg_list_ctx</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="9.5.  dlg.end_dlg">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17359496"></a>9.5. 
                <code class="varname">dlg.end_dlg</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="9.6.  dlg.profile_get_size">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17360568"></a>9.6. 
                <code class="varname">dlg.profile_get_size</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="9.7.  dlg.profile_list">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17361624"></a>9.7. 
                <code class="varname">dlg.profile_list</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="9.8.  dlg.bridge_dlg">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17362704"></a>9.8. 
                <code class="varname">dlg.bridge_dlg</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
        </div>
        <div class="section" title="10. Exported pseudo-variables">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp17363864"></a>10. Exported pseudo-variables</h2>
              </div>
            </div>
          </div>
          <div class="section" title="10.1.  $DLG_count">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17364216"></a>10.1. 
                <code class="varname">$DLG_count</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="10.2.  $DLG_status">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17365288"></a>10.2. 
                <code class="varname">$DLG_status</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="10.3.  $DLG_lifetime">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17366360"></a>10.3. 
                <code class="varname">$DLG_lifetime</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="10.4.  $dlg(...)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17367440"></a>10.4. 
                <code class="varname">$dlg(...)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="10.5.  $dlg_ctx(...)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17368512"></a>10.5. 
                <code class="varname">$dlg_ctx(...)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
          <div class="section" title="10.6.  $dlg_var(key)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17369592"></a>10.6. 
                <code class="varname">$dlg_var(key)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
                    This function is currently not supported by the dialog_ng module.
                    To be incorporated in the future.
            </p>
          </div>
        </div>
      </div>
      <div class="chapter" title="Chapter 2. Developer Guide">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="idp17655392"></a>Chapter 2. Developer Guide</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <p>
            <strong>Table of Contents</strong>
          </p>
          <dl>
            <dt>
              <span class="section">
                <a href="#idp17865064">1. Available Functions</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp18559648">1.1. 
                <code class="function">register_dlgcb (dialog, type, cb, param, free_param_cb)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp16409984">1.2. 
                <code class="function">terminate_dlg (str callid, str ftag, str ttag, hdrs)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp16414360">1.3. 
                <code class="function">lookup_terminate_dlg (unsigned int h_entry, unsigned int h_id, hdrs)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp18060200">1.4. 
                <code class="function">set_dlg_var (dlg, key, val)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp18063592">1.5. 
                <code class="function">get_dlg_var (dlg, key)</code>
            </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15684624">1.6. 
                <code class="function">get_current_dialog ()</code>
            </a>
                  </span>
                </dt>
              </dl>
            </dd>
          </dl>
        </div>
        <div class="section" title="1. Available Functions">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp17865064"></a>1. Available Functions</h2>
              </div>
            </div>
          </div>
          <div class="section" title="1.1.  register_dlgcb (dialog, type, cb, param, free_param_cb)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp18559648"></a>1.1. 
                <code class="function">register_dlgcb (dialog, type, cb, param, free_param_cb)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Register a new callback to the dialog.
            </p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>struct dlg_cell* dlg</em></span> - dialog to 
			register callback to. If maybe NULL only for DLGCB_CREATED callback
			type, which is not a per dialog type.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>int type</em></span> - types of callbacks; more
			types may be register for the same callback function; only 
			DLGCB_CREATED must be register alone. Possible types:
                        </p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist">
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_LOADED</em></span>
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_CREATED</em></span> - called when a new 
				dialog is created - it's a global type (not associated to 
				any dialog)
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_FAILED</em></span> - called when the dialog
				was negatively replied (non-2xx) - it's a per dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_CONFIRMED_NA</em></span> - called when the
				dialog is confirmed (2xx replied) but the setup-concluding ACK
				message from the caller is yet pending - it's a per dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_CONFIRMED</em></span> - called when the
				dialog is confirmed (2xx replied) and the setup-concluding ACK
				message from the caller has been seen - it's a per dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_REQ_WITHIN</em></span> - called when the 
				dialog matches a sequential request (excluding setup-concluding
				ACK messages which are handled in DLGCB_CONFIRMED) - it's a per
				dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_TERMINATED</em></span> - called when the 
				dialog is terminated via BYE - it's a per dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_TERMINATED_CONFIRMED</em></span> -
				called when response to a BYE request is received - it's a
				per dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_EXPIRED</em></span> - called when the 
				dialog expires without receiving a BYE - it's a per dialog 
				type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_EARLY</em></span> - called when the
				dialog is created in an early state (18x replied) - it's
				a per dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_RESPONSE_FWDED</em></span> - called when
				the dialog matches a reply to the initial INVITE request - it's
				a per dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_RESPONSE_WITHIN</em></span> - called when
				the dialog matches a reply to a subsequent in dialog request
				- it's a per dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_MI_CONTEXT</em></span> - called when the
				mi dlg_list_ctx command is invoked - it's a per dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_SPIRALED</em></span> - called when the
				dialog matches a spiraling request - it's a per dialog type.
                                </p>
                      </li>
                      <li class="listitem">
                        <p>
                                    <span class="emphasis"><em>DLGCB_DESTROY</em></span>
                                </p>
                      </li>
                    </ul>
                  </div>
                  <p>
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>dialog_cb cb</em></span> - callback function to be 
			called. Prototype is: 
                        <span class="quote">“<span class="quote">void (dialog_cb) 
			(struct dlg_cell* dlg, int type, struct dlg_cb_params * params);
                        </span>”</span>
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>void *param</em></span> - parameter to be passed to
			the callback function.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>param_free callback_param_free</em></span> - 
			callback function to be called to free the param.
			Prototype is: 
                        <span class="quote">“<span class="quote">void (param_free_cb) (void *param);</span>”</span>
                    </p>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" title="1.2.  terminate_dlg (str callid, str ftag, str ttag, hdrs)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp16409984"></a>1.2. 
                <code class="function">terminate_dlg (str callid, str ftag, str ttag, hdrs)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Terminate a Dialog identified by callid, ftag and ttag in early or confirmed state.
            </p>
            <p>Meaning of parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>str* callid</em></span> - callid of dialog to 
			terminate.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>str* ftag</em></span> - from_tag of dialog to 
			terminate.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>str* ttag</em></span> - to tag of dialog to 
			terminate.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>str* hdrs</em></span> - string containg extra headers (full format) 
			to be added to the BYE requests of the dialog.
                    </p>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" title="1.3.  lookup_terminate_dlg (unsigned int h_entry, unsigned int h_id, hdrs)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp16414360"></a>1.3. 
                <code class="function">lookup_terminate_dlg (unsigned int h_entry, unsigned int h_id, hdrs)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Terminate a Dialog identified by h_entry and h_id (similar to dlg_end_dlg command via XMLRPC).
            </p>
            <p>Meaning of parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>unsigned int h_entry</em></span> - Number of the table, where to find the dialog
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>unsigned int h_id</em></span> - Number of the entry in the table, where to find the dialog
			terminate.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>str* hdrs</em></span> - string containg extra headers (full format) 
			to be added to the BYE requests of the dialog.
                    </p>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" title="1.4.  set_dlg_var (dlg, key, val)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp18060200"></a>1.4. 
                <code class="function">set_dlg_var (dlg, key, val)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Add a variable to the dialog structure
            </p>
            <p>Meaning of parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>struct dlg_cell* dlg</em></span> - dialog to 
			add to.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>str* key</em></span> - Name of the variable.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>str* val</em></span> - Value of the variable.
                    </p>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" title="1.5.  get_dlg_var (dlg, key)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp18063592"></a>1.5. 
                <code class="function">get_dlg_var (dlg, key)</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Retrieves a variable attached to the dialog structure
            </p>
            <p>Meaning of parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>struct dlg_cell* dlg</em></span> - dialog to 
			get the variable from.
                    </p>
                </li>
                <li class="listitem">
                  <p>
                        <span class="emphasis"><em>str* key</em></span> - Name of the variable.
                    </p>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" title="1.6.  get_current_dialog ()">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15684624"></a>1.6. 
                <code class="function">get_current_dialog ()</code>
            </h3>
                </div>
              </div>
            </div>
            <p>
		Get the current dialog for a message, if exists
            </p>
          </div>
        </div>
      </div>
      <div class="chapter" title="Chapter 3. Frequently Asked Questions">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="idp18847136"></a>Chapter 3. Frequently Asked Questions</h2>
            </div>
          </div>
        </div>
        <div class="qandaset" title="Frequently Asked Questions">
          <a id="idp18169664"></a>
          <dl>
            <dt>3.1. <a href="#idp17413344">What happend with “use_tight_match” 
		parameter?</a></dt>
            <dt>3.2. <a href="#idp16000744">Why is there a dialog_ng module and a dialog module?</a></dt>
            <dt>3.3. <a href="#idp18095664">Where can I find more about Kamailio?</a></dt>
            <dt>3.4. <a href="#idp18340888">Where can I post a question about this module?</a></dt>
            <dt>3.5. <a href="#idp18085432">How can I report a bug?</a></dt>
          </dl>
          <table border="0" width="100%" summary="Q and A Set">
            <col align="left" width="1%" />
            <col />
            <tbody>
              <tr class="question" title="3.1.">
                <td align="left" valign="top">
                  <a id="idp17413344"></a>
                  <a id="idp16575616"></a>
                  <p>
                    <strong>3.1.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>What happend with <span class="quote">“<span class="quote">use_tight_match</span>”</span> 
		parameter?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			The parameter was removed with version 1.3 as the option of tight
			matching became mandatory and not configurable. Now, the tight
			matching is done all the time (when using DID matching).
		</p>
                </td>
              </tr>
              <tr class="question" title="3.2.">
                <td align="left" valign="top">
                  <a id="idp16000744"></a>
                  <a id="idp17172352"></a>
                  <p>
                    <strong>3.2.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Why is there a dialog_ng module and a dialog module?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			The dialog_ng module addresses shortcomings in the intial dialog
                        module design.  It makes some large changes to the API and 
                        therefore must be introduced slowly.  It is currently in the
                        early development stages.  Eventually the dialog_ng module should
                        replace the dialog module.
		</p>
                </td>
              </tr>
              <tr class="question" title="3.3.">
                <td align="left" valign="top">
                  <a id="idp18095664"></a>
                  <a id="idp16821520"></a>
                  <p>
                    <strong>3.3.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Where can I find more about Kamailio?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			Take a look at <a class="ulink" href="javascript:if(confirm('http://www.kamailio.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.kamailio.org/'" tppabs="http://www.kamailio.org/">http://www.kamailio.org/</a>.
		</p>
                </td>
              </tr>
              <tr class="question" title="3.4.">
                <td align="left" valign="top">
                  <a id="idp18340888"></a>
                  <a id="idp18515336"></a>
                  <p>
                    <strong>3.4.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Where can I post a question about this module?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			First at all check if your question was already answered on one of
			our mailing lists: 
		</p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist">
                      <li class="listitem">
                        <p>User Mailing List - <a class="ulink" href="javascript:if(confirm('http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users'" tppabs="http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users">http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users</a></p>
                      </li>
                      <li class="listitem">
                        <p>Developer Mailing List - <a class="ulink" href="javascript:if(confirm('http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev'" tppabs="http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev">http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev</a></p>
                      </li>
                    </ul>
                  </div>
                  <p>
			E-mails regarding any stable Kamailio release should be sent to 
			<code class="email">&lt;<a class="email" href="mailto:sr-users@lists.sip-router.org">sr-users@lists.sip-router.org</a>&gt;</code> and e-mails regarding development versions
			should be sent to <code class="email">&lt;<a class="email" href="mailto:sr-dev@lists.sip-router.org">sr-dev@lists.sip-router.org</a>&gt;</code>.
		</p>
                  <p>
			If you want to keep the mail private, send it to 
			<code class="email">&lt;<a class="email" href="mailto:sr-users@lists.sip-router.org">sr-users@lists.sip-router.org</a>&gt;</code>.
		</p>
                </td>
              </tr>
              <tr class="question" title="3.5.">
                <td align="left" valign="top">
                  <a id="idp18085432"></a>
                  <a id="idp18085576"></a>
                  <p>
                    <strong>3.5.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>How can I report a bug?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			Please follow the guidelines provided at:
			<a class="ulink" href="javascript:if(confirm('http://sip-router.org/tracker  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://sip-router.org/tracker'" tppabs="http://sip-router.org/tracker">http://sip-router.org/tracker</a>.
		</p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </body>
</html>
