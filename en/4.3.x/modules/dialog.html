<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>dialog Module</title>
    <link rel="stylesheet" type="text/css" href="../../../../css/sr-doc.css" tppabs="http://kamailio.org/css/sr-doc.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="#idm4244000" title="dialog Module" />
    <link rel="next" href="#idp3096824" title="Chapter 1. Admin Guide" />
  </head>
  <body>
    <div class="book" title="dialog Module">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="idm4244000"></a>dialog Module</h1>
          </div>
          <div>
            <div class="authorgroup">
              <div class="author">
                <h3 class="author"><span class="firstname">Bogdan-Andrei</span> <span class="surname">Iancu</span></h3>
                <div class="affiliation">
                  <span class="orgname">Voice Sistem SRL<br /></span>
                </div>
              </div>
              <div class="author">
                <h3 class="author"><span class="firstname">Carsten</span> <span class="surname">Bock</span></h3>
                <div class="affiliation">
                  <span class="orgname">ng-voice.com<br /></span>
                </div>
              </div>
              <div class="editor">
                <h4 class="editedby">Edited by</h4>
                <h3 class="editor"><span class="firstname">Bogdan-Andrei</span> <span class="surname">Iancu</span></h3>
              </div>
              <div class="editor">
                <h4 class="editedby">Edited by</h4>
                <h3 class="editor"><span class="firstname">Carsten</span> <span class="surname">Bock</span></h3>
              </div>
              <div class="editor">
                <h4 class="editedby">Edited by</h4>
                <h3 class="editor"><span class="firstname">Alex</span> <span class="surname">Balashov</span></h3>
                <code class="email">&lt;<a class="email" href="mailto:abalashov@evaristesys.com">abalashov@evaristesys.com</a>&gt;</code>
              </div>
            </div>
          </div>
          <div>
            <p class="copyright">Copyright © 2006 Voice Sistem SRL</p>
          </div>
          <div>
            <p class="copyright">Copyright © 2011 Carsten Bock, http://www.ng-voice.com</p>
          </div>
        </div>
        <hr />
      </div>
      <div class="toc">
        <p>
          <strong>Table of Contents</strong>
        </p>
        <dl>
          <dt>
            <span class="chapter">
              <a href="#idp3096824">1. Admin Guide</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#idp3362928">1. Overview</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#idp4488">2. How it works</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#idp2430704">3. Dialog profiling</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#idp2566216">4. Dependencies</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp2441680">4.1. Kamailio Modules</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idm13480">4.2. External Libraries or Applications</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idm11744">5. Parameters</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idm11376">5.1. <code class="varname">enable_stats</code> (integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idm8776">5.2. <code class="varname">hash_size</code> (integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idm5576">5.3. <code class="varname">rr_param</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#dlg-flag-id">5.4. <code class="varname">dlg_flag</code> (integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#timeout-avp-id">5.5. <code class="varname">timeout_avp</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#default-timeout-id">5.6. <code class="varname">default_timeout</code> (integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp83584">5.7. <code class="varname">dlg_extra_hdrs</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp86304">5.8. <code class="varname">dlg_match_mode</code> (integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp21768">5.9. <code class="varname">detect_spirals</code> (integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp24448">5.10. <code class="varname">db_url</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp27184">5.11. <code class="varname">db_mode</code> (integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp32592">5.12. <code class="varname">db_update_period</code> (integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp35432">5.13. <code class="varname">db_fetch_rows</code> (integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp38360">5.14. <code class="varname">table_name</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp41024">5.15. <code class="varname">callid_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp43672">5.16. <code class="varname">from_uri_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1816296">5.17. <code class="varname">from_tag_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1818960">5.18. <code class="varname">to_uri_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1821608">5.19. <code class="varname">to_tag_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1824304">5.20. <code class="varname">from_cseq_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1826960">5.21. <code class="varname">to_cseq_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1829616">5.22. <code class="varname">from_route_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1832304">5.23. <code class="varname">to_route_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1834992">5.24. <code class="varname">from_contact_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1837656">5.25. <code class="varname">to_contact_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1840320">5.26. <code class="varname">from_sock_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1843024">5.27. <code class="varname">to_sock_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1845720">5.28. <code class="varname">h_id_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1848368">5.29. <code class="varname">h_entry_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1851032">5.30. <code class="varname">state_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1853688">5.31. <code class="varname">start_time_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1856360">5.32. <code class="varname">timeout_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1859008">5.33. <code class="varname">sflags_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1861640">5.34. <code class="varname">toroute_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1864320">5.35. <code class="varname">vars_table_name</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1867000">5.36. <code class="varname">vars_h_id_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1869696">5.37. <code class="varname">vars_h_entry_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1872408">5.38. <code class="varname">vars_key_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1875056">5.39. <code class="varname">vars_value_column</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1877720">5.40. <code class="varname">profiles_with_value</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1880352">5.41. <code class="varname">profiles_no_value</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1882984">5.42. <code class="varname">bridge_controller</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1885624">5.43. <code class="varname">bridge_contact</code> (string)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1888264">5.44. <code class="varname">initial_cbs_inscript</code> (int)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1892976">5.45. <code class="varname">send_bye</code> (int)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1895616">5.46. <code class="varname">wait_ack</code> (int)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1898328">5.47. <code class="varname">ka_timer</code> (int)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1901032">5.48. <code class="varname">ka_interval</code> (int)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1903864">5.49. <code class="varname">timeout_noreset</code> (int)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#dialog.p.timer_procs">5.50. <code class="varname">timer_procs</code> (int)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#dialog.p.track_cseq_updates">5.51. <code class="varname">track_cseq_updates</code> (int)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#dialog.p.lreq_callee_headers">5.52. <code class="varname">lreq_callee_headers</code> (string)</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp1915784">6. Functions</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp1916152">6.1. 
		<code class="function">set_dlg_profile(profile,[value])</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1920688">6.2. 
		<code class="function">unset_dlg_profile(profile,[value])</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1925080">6.3. 
		<code class="function">is_in_profile(profile,[value])</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1929904">6.4. 
		<code class="function">get_profile_size(profile,[value],size)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp1935392">6.5. 
		<code class="function">dlg_isflagset(flag)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3682712">6.6. 
		<code class="function">dlg_setflag(flag)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3685808">6.7. 
		<code class="function">dlg_resetflag(flag)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3688904">6.8. 
		<code class="function">dlg_bye(side)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3692016">6.9. 
		<code class="function">dlg_refer(side, address)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3695864">6.10. 
		<code class="function">dlg_manage()</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3698368">6.11. 
		<code class="function">dlg_bridge(from, to, op)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3702952">6.12. 
		<code class="function">dlg_get(callid, ftag, ttag)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3707224">6.13. 
		<code class="function">is_known_dlg()</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3710248">6.14. 
		<code class="function">dlg_set_timeout(timeout [, h_entry, h_id])</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3714872">6.15. 
		<code class="function">dlg_set_timeout_by_profile(profile, [value], timeout)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3719336">6.16. 
		<code class="function">dlg_set_property(attr)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#dialog.f.dlg_remote_profile">6.17. 
		<code class="function">dlg_remote_profile(cmd, profile, value, uid, expires)</code>
		</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp3730496">7. Statistics</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp3730816">7.1. <code class="varname">active_dialogs</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3731544">7.2. <code class="varname">early_dialogs</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3732240">7.3. <code class="varname">processed_dialogs</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3732992">7.4. <code class="varname">expired_dialogs</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3733712">7.5. <code class="varname">failed_dialogs</code></a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp3734472">8. MI Commands</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp3734792">8.1. <code class="varname">dlg_list</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3738704">8.2. <code class="varname">dlg_list_ctx</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3741168">8.3. <code class="varname">dlg_end_dlg</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3745568">8.4. <code class="varname">dlg_terminate_dlg</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3749416">8.5. <code class="varname">profile_get_size</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3752904">8.6. <code class="varname">profile_list_dlgs</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3756384">8.7. <code class="varname">dlg_bridge</code></a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp3760064">9. Exported RPC Functions</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp3760384">9.1. <code class="varname">dlg.list</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3761904">9.2. <code class="varname">dlg.list_ctx</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3763688">9.3. <code class="varname">dlg.dlg_list</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3766760">9.4. <code class="varname">dlg.dlg_list_ctx</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3769128">9.5. <code class="varname">dlg.end_dlg</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3772960">9.6. <code class="varname">dlg.profile_get_size</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3776336">9.7. <code class="varname">dlg.profile_list</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3779680">9.8. <code class="varname">dlg.bridge_dlg</code></a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp3783224">10. Exported pseudo-variables</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp3783544">10.1. <code class="varname">$DLG_count</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3784272">10.2. <code class="varname">$DLG_status</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3787416">10.3. <code class="varname">$DLG_lifetime</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3788616">10.4. <code class="varname">$dlg(...)</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3789296">10.5. <code class="varname">$dlg_ctx(...)</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3789984">10.6. <code class="varname">$dlg_var(key)</code></a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp3791256">11. Event Routes</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp3791576">11.1. <code class="varname">event_route[dialog:start]</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3792280">11.2. <code class="varname">event_route[dialog:end]</code></a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp3792984">11.3. <code class="varname">event_route[dialog:failed]</code></a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#idp1103560">2. Developer Guide</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#idp2260304">1. Available Functions</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp138000">1.1. 
		<code class="function">register_dlgcb (dialog, type, cb, param, free_param_cb)</code>
		</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp2992184">1.2. 
		<code class="function">terminate_dlg (dlg, hdrs)</code>
		</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#idp2526488">3. Frequently Asked Questions</a>
            </span>
          </dt>
        </dl>
      </div>
      <div class="list-of-examples">
        <p>
          <strong>List of Examples</strong>
        </p>
        <dl>
          <dt>1.1. <a href="#idm9808">Set <code class="varname">enable_stats</code> parameter</a></dt>
          <dt>1.2. <a href="#idm6736">Set <code class="varname">hash_size</code> parameter</a></dt>
          <dt>1.3. <a href="#idm4040">Set <code class="varname">rr_param</code> parameter</a></dt>
          <dt>1.4. <a href="#idm1216">Set <code class="varname">dlg_flag</code> parameter</a></dt>
          <dt>1.5. <a href="#idp79592">Set <code class="varname">timeout_avp</code> parameter</a></dt>
          <dt>1.6. <a href="#idp82408">Set <code class="varname">default_timeout</code> parameter</a></dt>
          <dt>1.7. <a href="#idp85112">Set <code class="varname">dlf_extra_hdrs</code> parameter</a></dt>
          <dt>1.8. <a href="#idp20600">Set <code class="varname">dlg_match_mode</code> parameter</a></dt>
          <dt>1.9. <a href="#idp23272">Set <code class="varname">detect_spirals</code> parameter</a></dt>
          <dt>1.10. <a href="#idp25984">Set <code class="varname">db_url</code> parameter</a></dt>
          <dt>1.11. <a href="#idp31488">Set <code class="varname">db_mode</code> parameter</a></dt>
          <dt>1.12. <a href="#idp34256">Set <code class="varname">db_update_period</code> parameter</a></dt>
          <dt>1.13. <a href="#idp37192">Set <code class="varname">db_fetch_rows</code> parameter</a></dt>
          <dt>1.14. <a href="#idp39856">Set <code class="varname">table_name</code> parameter</a></dt>
          <dt>1.15. <a href="#idp42488">Set <code class="varname">callid_column</code> parameter</a></dt>
          <dt>1.16. <a href="#idp1815112">Set <code class="varname">from_uri_column</code> parameter</a></dt>
          <dt>1.17. <a href="#idp1817776">Set <code class="varname">from_tag_column</code> parameter</a></dt>
          <dt>1.18. <a href="#idp1820424">Set <code class="varname">to_uri_column</code> parameter</a></dt>
          <dt>1.19. <a href="#idp1823120">Set <code class="varname">to_tag_column</code> parameter</a></dt>
          <dt>1.20. <a href="#idp1825776">Set <code class="varname">from_cseq_column</code> parameter</a></dt>
          <dt>1.21. <a href="#idp1828432">Set <code class="varname">to_cseq_column</code> parameter</a></dt>
          <dt>1.22. <a href="#idp1831120">Set <code class="varname">from_route_column</code> parameter</a></dt>
          <dt>1.23. <a href="#idp1833808">Set <code class="varname">to_route_column</code> parameter</a></dt>
          <dt>1.24. <a href="#idp1836472">Set <code class="varname">from_contact_column</code> parameter</a></dt>
          <dt>1.25. <a href="#idp1839136">Set <code class="varname">to_contact_column</code> parameter</a></dt>
          <dt>1.26. <a href="#idp1841840">Set <code class="varname">from_sock_column</code> parameter</a></dt>
          <dt>1.27. <a href="#idp1844536">Set <code class="varname">to_sock_column</code> parameter</a></dt>
          <dt>1.28. <a href="#idp1847192">Set <code class="varname">h_id_column</code> parameter</a></dt>
          <dt>1.29. <a href="#idp1849848">Set <code class="varname">h_entry_column</code> parameter</a></dt>
          <dt>1.30. <a href="#idp1852504">Set <code class="varname">state_column</code> parameter</a></dt>
          <dt>1.31. <a href="#idp1855168">Set <code class="varname">start_time_column</code> parameter</a></dt>
          <dt>1.32. <a href="#idp1857824">Set <code class="varname">timeout_column</code> parameter</a></dt>
          <dt>1.33. <a href="#idp1860464">Set <code class="varname">sflags_column</code> parameter</a></dt>
          <dt>1.34. <a href="#idp1863136">Set <code class="varname">toroute_column</code> parameter</a></dt>
          <dt>1.35. <a href="#idp1865816">Set <code class="varname">vars_table_name</code> parameter</a></dt>
          <dt>1.36. <a href="#idp1868512">Set <code class="varname">vars_h_id_column</code> parameter</a></dt>
          <dt>1.37. <a href="#idp1871216">Set <code class="varname">vars_h_entry_column</code> parameter</a></dt>
          <dt>1.38. <a href="#idp1873872">Set <code class="varname">vars_key_column</code> parameter</a></dt>
          <dt>1.39. <a href="#idp1876528">Set <code class="varname">vars_value_column</code> parameter</a></dt>
          <dt>1.40. <a href="#idp1879160">Set <code class="varname">profiles_with_value</code> parameter</a></dt>
          <dt>1.41. <a href="#idp1881792">Set <code class="varname">profiles_no_value</code> parameter</a></dt>
          <dt>1.42. <a href="#idp1884432">Set <code class="varname">bridge_controller</code> parameter</a></dt>
          <dt>1.43. <a href="#idp1887072">Set <code class="varname">bridge_contact</code> parameter</a></dt>
          <dt>1.44. <a href="#idp1891824">Set <code class="varname">initial_cbs_inscript</code> parameter</a></dt>
          <dt>1.45. <a href="#idp1894512">Set <code class="varname">send_bye</code> parameter</a></dt>
          <dt>1.46. <a href="#idp1897224">Set <code class="varname">wait_ack</code> parameter</a></dt>
          <dt>1.47. <a href="#idp1899872">Set <code class="varname">ka_timer</code> parameter</a></dt>
          <dt>1.48. <a href="#idp1902704">Set <code class="varname">ka_interval</code> parameter</a></dt>
          <dt>1.49. <a href="#idp1905448">Set <code class="varname">timeout_noreset</code> parameter</a></dt>
          <dt>1.50. <a href="#idp1908240">Set <code class="varname">timer_procs</code> parameter</a></dt>
          <dt>1.51. <a href="#idp1911520">Set <code class="varname">track_cseq_updates</code> parameter</a></dt>
          <dt>1.52. <a href="#idp1914520">Set <code class="varname">lreq_callee_headers</code> parameter</a></dt>
          <dt>1.53. <a href="#idp1919440"><code class="function">set_dlg_profile</code> usage</a></dt>
          <dt>1.54. <a href="#idp1923824"><code class="function">unset_dlg_profile</code> usage</a></dt>
          <dt>1.55. <a href="#idp1928536"><code class="function">is_in_profile</code> usage</a></dt>
          <dt>1.56. <a href="#idp1933968"><code class="function">get_profile_size</code> usage</a></dt>
          <dt>1.57. <a href="#idp3681648"><code class="function">dlg_isflagset</code> usage</a></dt>
          <dt>1.58. <a href="#idp3684800"><code class="function">dlg_setflag</code> usage</a></dt>
          <dt>1.59. <a href="#idp3687896"><code class="function">dlg_resetflag</code> usage</a></dt>
          <dt>1.60. <a href="#idp3691008"><code class="function">dlg_bye</code> usage</a></dt>
          <dt>1.61. <a href="#idp3694784"><code class="function">dlg_refer</code> usage</a></dt>
          <dt>1.62. <a href="#idp3697128"><code class="function">dlg_manage</code> usage</a></dt>
          <dt>1.63. <a href="#idp3701832"><code class="function">dlg_bridge</code> usage</a></dt>
          <dt>1.64. <a href="#idp3706144"><code class="function">dlg_get</code> usage</a></dt>
          <dt>1.65. <a href="#idp3709128"><code class="function">is_known_dlg()</code> usage</a></dt>
          <dt>1.66. <a href="#idp3713792"><code class="function">dlg_set_timeout</code> usage</a></dt>
          <dt>1.67. <a href="#idp3718152"><code class="function">dlg_set_timeout_by_profile</code> usage</a></dt>
          <dt>1.68. <a href="#idp3723456"><code class="function">dlg_set_property</code> usage</a></dt>
          <dt>1.69. <a href="#idp3729312"><code class="function">dlg_remote_profile</code> usage</a></dt>
        </dl>
      </div>
      <div class="chapter" title="Chapter 1. Admin Guide">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="idp3096824"></a>Chapter 1. Admin Guide</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <p>
            <strong>Table of Contents</strong>
          </p>
          <dl>
            <dt>
              <span class="section">
                <a href="#idp3362928">1. Overview</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#idp4488">2. How it works</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#idp2430704">3. Dialog profiling</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#idp2566216">4. Dependencies</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp2441680">4.1. Kamailio Modules</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idm13480">4.2. External Libraries or Applications</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idm11744">5. Parameters</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idm11376">5.1. <code class="varname">enable_stats</code> (integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idm8776">5.2. <code class="varname">hash_size</code> (integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idm5576">5.3. <code class="varname">rr_param</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#dlg-flag-id">5.4. <code class="varname">dlg_flag</code> (integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#timeout-avp-id">5.5. <code class="varname">timeout_avp</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#default-timeout-id">5.6. <code class="varname">default_timeout</code> (integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp83584">5.7. <code class="varname">dlg_extra_hdrs</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp86304">5.8. <code class="varname">dlg_match_mode</code> (integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp21768">5.9. <code class="varname">detect_spirals</code> (integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp24448">5.10. <code class="varname">db_url</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp27184">5.11. <code class="varname">db_mode</code> (integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp32592">5.12. <code class="varname">db_update_period</code> (integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp35432">5.13. <code class="varname">db_fetch_rows</code> (integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp38360">5.14. <code class="varname">table_name</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp41024">5.15. <code class="varname">callid_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp43672">5.16. <code class="varname">from_uri_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1816296">5.17. <code class="varname">from_tag_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1818960">5.18. <code class="varname">to_uri_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1821608">5.19. <code class="varname">to_tag_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1824304">5.20. <code class="varname">from_cseq_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1826960">5.21. <code class="varname">to_cseq_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1829616">5.22. <code class="varname">from_route_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1832304">5.23. <code class="varname">to_route_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1834992">5.24. <code class="varname">from_contact_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1837656">5.25. <code class="varname">to_contact_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1840320">5.26. <code class="varname">from_sock_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1843024">5.27. <code class="varname">to_sock_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1845720">5.28. <code class="varname">h_id_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1848368">5.29. <code class="varname">h_entry_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1851032">5.30. <code class="varname">state_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1853688">5.31. <code class="varname">start_time_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1856360">5.32. <code class="varname">timeout_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1859008">5.33. <code class="varname">sflags_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1861640">5.34. <code class="varname">toroute_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1864320">5.35. <code class="varname">vars_table_name</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1867000">5.36. <code class="varname">vars_h_id_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1869696">5.37. <code class="varname">vars_h_entry_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1872408">5.38. <code class="varname">vars_key_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1875056">5.39. <code class="varname">vars_value_column</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1877720">5.40. <code class="varname">profiles_with_value</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1880352">5.41. <code class="varname">profiles_no_value</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1882984">5.42. <code class="varname">bridge_controller</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1885624">5.43. <code class="varname">bridge_contact</code> (string)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1888264">5.44. <code class="varname">initial_cbs_inscript</code> (int)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1892976">5.45. <code class="varname">send_bye</code> (int)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1895616">5.46. <code class="varname">wait_ack</code> (int)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1898328">5.47. <code class="varname">ka_timer</code> (int)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1901032">5.48. <code class="varname">ka_interval</code> (int)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1903864">5.49. <code class="varname">timeout_noreset</code> (int)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#dialog.p.timer_procs">5.50. <code class="varname">timer_procs</code> (int)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#dialog.p.track_cseq_updates">5.51. <code class="varname">track_cseq_updates</code> (int)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#dialog.p.lreq_callee_headers">5.52. <code class="varname">lreq_callee_headers</code> (string)</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp1915784">6. Functions</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp1916152">6.1. 
		<code class="function">set_dlg_profile(profile,[value])</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1920688">6.2. 
		<code class="function">unset_dlg_profile(profile,[value])</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1925080">6.3. 
		<code class="function">is_in_profile(profile,[value])</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1929904">6.4. 
		<code class="function">get_profile_size(profile,[value],size)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp1935392">6.5. 
		<code class="function">dlg_isflagset(flag)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3682712">6.6. 
		<code class="function">dlg_setflag(flag)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3685808">6.7. 
		<code class="function">dlg_resetflag(flag)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3688904">6.8. 
		<code class="function">dlg_bye(side)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3692016">6.9. 
		<code class="function">dlg_refer(side, address)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3695864">6.10. 
		<code class="function">dlg_manage()</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3698368">6.11. 
		<code class="function">dlg_bridge(from, to, op)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3702952">6.12. 
		<code class="function">dlg_get(callid, ftag, ttag)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3707224">6.13. 
		<code class="function">is_known_dlg()</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3710248">6.14. 
		<code class="function">dlg_set_timeout(timeout [, h_entry, h_id])</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3714872">6.15. 
		<code class="function">dlg_set_timeout_by_profile(profile, [value], timeout)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3719336">6.16. 
		<code class="function">dlg_set_property(attr)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#dialog.f.dlg_remote_profile">6.17. 
		<code class="function">dlg_remote_profile(cmd, profile, value, uid, expires)</code>
		</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp3730496">7. Statistics</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp3730816">7.1. <code class="varname">active_dialogs</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3731544">7.2. <code class="varname">early_dialogs</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3732240">7.3. <code class="varname">processed_dialogs</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3732992">7.4. <code class="varname">expired_dialogs</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3733712">7.5. <code class="varname">failed_dialogs</code></a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp3734472">8. MI Commands</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp3734792">8.1. <code class="varname">dlg_list</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3738704">8.2. <code class="varname">dlg_list_ctx</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3741168">8.3. <code class="varname">dlg_end_dlg</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3745568">8.4. <code class="varname">dlg_terminate_dlg</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3749416">8.5. <code class="varname">profile_get_size</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3752904">8.6. <code class="varname">profile_list_dlgs</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3756384">8.7. <code class="varname">dlg_bridge</code></a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp3760064">9. Exported RPC Functions</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp3760384">9.1. <code class="varname">dlg.list</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3761904">9.2. <code class="varname">dlg.list_ctx</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3763688">9.3. <code class="varname">dlg.dlg_list</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3766760">9.4. <code class="varname">dlg.dlg_list_ctx</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3769128">9.5. <code class="varname">dlg.end_dlg</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3772960">9.6. <code class="varname">dlg.profile_get_size</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3776336">9.7. <code class="varname">dlg.profile_list</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3779680">9.8. <code class="varname">dlg.bridge_dlg</code></a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp3783224">10. Exported pseudo-variables</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp3783544">10.1. <code class="varname">$DLG_count</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3784272">10.2. <code class="varname">$DLG_status</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3787416">10.3. <code class="varname">$DLG_lifetime</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3788616">10.4. <code class="varname">$dlg(...)</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3789296">10.5. <code class="varname">$dlg_ctx(...)</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3789984">10.6. <code class="varname">$dlg_var(key)</code></a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp3791256">11. Event Routes</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp3791576">11.1. <code class="varname">event_route[dialog:start]</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3792280">11.2. <code class="varname">event_route[dialog:end]</code></a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp3792984">11.3. <code class="varname">event_route[dialog:failed]</code></a>
                  </span>
                </dt>
              </dl>
            </dd>
          </dl>
        </div>
        <div class="section" title="1. Overview">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp3362928"></a>1. Overview</h2>
              </div>
            </div>
          </div>
          <p>
	Kamailio can behave as a stateful proxy through the TM module.  However, 
	"stateful" in this context refers to <span class="emphasis"><em>transaction</em></span> 
	state, not dialog state.  Certain applications benefit from the proxy's
	awareness of "calls", not just SIP transactions.
	</p>
          <p>For example, a common need is to limit the number of calls that can 
	be made concurrently by an endpoint, account, user group, etc.  In order 
	to count the number of calls in progress, it is necessary for the proxy 
	to be aware of whole dialogs, not just transactions, and to provide some 
	means of programmatically classifying these dialogs.  This is just one 
	common application discussed for illustrative purposes; there are many others.  
	</p>
          <p>
	The dialog module provides dialog awareness for the Kamailio proxy. Its
	functionality is to keep track of the current dialogs, to offer information
	about them (e.g. how many dialogs are active), and to manage various 
	characteristics of dialogs. The module exports several functions that could be 
	used directly from the configuration route script.
	</p>
          <p>
	This module also provides a foundational API on which to build 
	more complex dialog-oriented functionality in other Kamailio modules.
	</p>
        </div>
        <div class="section" title="2. How it works">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp4488"></a>2. How it works</h2>
              </div>
            </div>
          </div>
          <p>
	To create the dialog associated with an initial request, the flag
	<span class="quote">“<span class="quote">dlg_flag</span>”</span> (<a class="xref" href="#dlg-flag-id" title="5.4. dlg_flag (integer)">Section 5.4, “<code class="varname">dlg_flag</code> (integer)”</a>) must be set before
	creating the corresponding transaction.
	</p>
          <p>
	The dialog is automatically destroyed when a <span class="quote">“<span class="quote">BYE</span>”</span> is
	received. In case of no <span class="quote">“<span class="quote">BYE</span>”</span>, the dialog lifetime is
	controlled via the default timeout (see <span class="quote">“<span class="quote">default_timeout</span>”</span>
	- <a class="xref" href="#default-timeout-id" title="5.6. default_timeout (integer)">Section 5.6, “<code class="varname">default_timeout</code> (integer)”</a>) and custom timeout (see
	<span class="quote">“<span class="quote">timeout_avp</span>”</span> - <a class="xref" href="#timeout-avp-id" title="5.5. timeout_avp (string)">Section 5.5, “<code class="varname">timeout_avp</code> (string)”</a>). The
	dialog timeout is reset each time a sequential request is processed.
	</p>
        </div>
        <div class="section" title="3. Dialog profiling">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp2430704"></a>3. Dialog profiling</h2>
              </div>
            </div>
          </div>
          <p>
	Dialog profiling is a mechanism that helps in classifying, sorting and
	keeping track of certain types of dialogs.  The classification criteria
	can be any attributes desired by the user;  they can come from SIP message
	attributes, other pseudo-variables, custom values, etc.  
	Dialogs can be dynamically added into one or more profile
	tables.  Logically, each profile table can have a special meaning (like
	dialogs outside the domain, dialogs terminated to the PSTN, etc.).
	</p>
          <p>
	There are two types of profiles:
	</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
                <p>
			<span class="emphasis"><em>with no value</em></span> - a dialog simply belongs
			to a profile (for instance, an outbound calls profile). There is 
			no other additional information to describe the dialog beyond 
			its membership in the profile per se.
		</p>
              </li>
              <li class="listitem">
                <p>
			<span class="emphasis"><em>with value</em></span> - a dialog belongs to a profile
			having a certain value (like in a caller profile, where the value
			is the caller ID). The membership of the dialog in the profile is
			strictly related to the value.  For example, if the account ID
			of the caller is stored in the pseudo-variable $var(account_id),
			you can use $var(account_id) as a value/key by which to group 
			dialogs so that you can count the number of open dialogs for
			each account, enforce concurrent call limits as necessary, etc.
		</p>
              </li>
            </ul>
          </div>
          <p>
	</p>
          <p>
	A dialog can be added to multiple profiles at the same time.
	</p>
          <p>
	Profiles are visible (at the moment) in the request route (for initial
	and sequential requests) and in the branch, failure and reply routes of
	the original request.
	</p>
        </div>
        <div class="section" title="4. Dependencies">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp2566216"></a>4. Dependencies</h2>
              </div>
            </div>
          </div>
          <div class="section" title="4.1. Kamailio Modules">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp2441680"></a>4.1. Kamailio Modules</h3>
                </div>
              </div>
            </div>
            <p>
		The following modules must be loaded before this module:
			</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>TM</em></span> - Transaction module
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>RR</em></span> - Record-Route module
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>PV</em></span> - Pseudovariables module
			</p>
                </li>
              </ul>
            </div>
            <p>
		</p>
          </div>
          <div class="section" title="4.2. External Libraries or Applications">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idm13480"></a>4.2. External Libraries or Applications</h3>
                </div>
              </div>
            </div>
            <p>
		The following libraries or applications must be installed before
		running Kamailio with this module loaded:
			</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>None</em></span>.
			</p>
                </li>
              </ul>
            </div>
            <p>
		</p>
          </div>
        </div>
        <div class="section" title="5. Parameters">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idm11744"></a>5. Parameters</h2>
              </div>
            </div>
          </div>
          <div class="section" title="5.1. enable_stats (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idm11376"></a>5.1. <code class="varname">enable_stats</code> (integer)</h3>
                </div>
              </div>
            </div>
            <p>
		If statistics support should be enabled or not. Via statistics
		variables, the module provide information about the dialog processing.
		Set it to zero to disable or to non-zero to enable it.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">1 (enabled)</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idm9808"></a>
              <p class="title">
                <strong>Example 1.1. Set <code class="varname">enable_stats</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "enable_stats", 0)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.2. hash_size (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idm8776"></a>5.2. <code class="varname">hash_size</code> (integer)</h3>
                </div>
              </div>
            </div>
            <p>
		The size of the hash table internally used to keep the dialogs. A
		larger table is much faster but consumes more memory. The hash size
		must be a power of two.
		</p>
            <p>
		IMPORTANT: If dialogs' information should be stored in a database,
		a constant hash_size should be used, otherwise the restoring process
		will not take place. If you really want to modify the hash_size, you
		must delete all table's rows before restarting the server.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">4096</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idm6736"></a>
              <p class="title">
                <strong>Example 1.2. Set <code class="varname">hash_size</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "hash_size", 1024)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.3. rr_param (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idm5576"></a>5.3. <code class="varname">rr_param</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
		Name of the Record-Route parameter used to store the dialog cookie.
		It is used for the fast matching of sequential requests to tracked
		dialogs.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">did</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idm4040"></a>
              <p class="title">
                <strong>Example 1.3. Set <code class="varname">rr_param</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "rr_param", "xyz")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.4. dlg_flag (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="dlg-flag-id"></a>5.4. <code class="varname">dlg_flag</code> (integer)</h3>
                </div>
              </div>
            </div>
            <p>
		Flag to be used for marking if a dialog should be constructed for the
		current request (this make sense only for initial requests).
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">none</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idm1216"></a>
              <p class="title">
                <strong>Example 1.4. Set <code class="varname">dlg_flag</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "dlg_flag", 4)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.5. timeout_avp (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="timeout-avp-id"></a>5.5. <code class="varname">timeout_avp</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
		The specification of an AVP that contains a custom timeout value (in seconds)
		for the dialog. It may be used only in a request (initial or sequential)
		context.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">none</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp79592"></a>
              <p class="title">
                <strong>Example 1.5. Set <code class="varname">timeout_avp</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "timeout_avp", "$avp(i:10)")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.6. default_timeout (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="default-timeout-id"></a>5.6. <code class="varname">default_timeout</code> (integer)</h3>
                </div>
              </div>
            </div>
            <p>
		The default dialog timeout (in seconds), in the absence of a custom
		value provided in an AVP.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">43200 (12 hours)</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp82408"></a>
              <p class="title">
                <strong>Example 1.6. Set <code class="varname">default_timeout</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "default_timeout", 21600)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.7. dlg_extra_hdrs (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp83584"></a>5.7. <code class="varname">dlg_extra_hdrs</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
		A string containing the extra headers (full format, with EOH)
		to be added to requests generated locally by the module (like BYEs).
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">NULL</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp85112"></a>
              <p class="title">
                <strong>Example 1.7. Set <code class="varname">dlf_extra_hdrs</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "dlg_extra_hdrs", "Hint: credit expired\r\n")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.8. dlg_match_mode (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp86304"></a>5.8. <code class="varname">dlg_match_mode</code> (integer)</h3>
                </div>
              </div>
            </div>
            <p>
		How the sequential requests should be matched against the known dialogs.
		The modes are a combination of matching based on a cookie (DID)
		stored as cookie in Record-Route header and matching based on SIP
		elements (as in RFC 3261).
		</p>
            <p>
		Note: DID-based matching does not replace callid/fromtag/totag comparison. It will speed
		up dialog matching by not iterating over the whole dialog list for callid/fromtag/totag comparison, but
		instead it uses a hash table to find the respective dialog and then doing only one callid/fromtag/totag 
		comparison. Thus, there is no security 
		issue when using DID based matching. Use DID_FALLBACK for maximum interoperability or use DID_ONLY to
		reject buggy clients or hacking attempts. DID_NONE is only useful, when you want to hide dialog-tracking
		from the users (preventing the DID Record-Route cookie).
		</p>
            <p>
		The supported modes are:
		</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>0 - DID_ONLY</em></span> - the match is done
				exclusively based on DID;
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>1 - DID_FALLBACK</em></span> - the match is first
				tried based on DID and if not present, it will fall back to
				SIP matching;
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>2 - DID_NONE</em></span> - the match is done
				exclusively based on SIP elements; no DID information is added
				in RR.
			</p>
                </li>
              </ul>
            </div>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">0 (DID_ONLY)</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp20600"></a>
              <p class="title">
                <strong>Example 1.8. Set <code class="varname">dlg_match_mode</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "dlg_match_mode", 1)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.9. detect_spirals (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp21768"></a>5.9. <code class="varname">detect_spirals</code> (integer)</h3>
                </div>
              </div>
            </div>
            <p>
			Whether spirals (i.e., messages routed through the proxy multiple times)
			should be detected.
		</p>
            <p>
			If set to 0, spirals will not be detected and result in the generation of a
			new, possibly dangling dialog structure per occurring spiral. If set to 1,
			spirals are detected and internally mapped to existing dialog structures.
		</p>
            <p>
			Default value is 1.
		</p>
            <div class="example">
              <a id="idp23272"></a>
              <p class="title">
                <strong>Example 1.9. Set <code class="varname">detect_spirals</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "detect_spirals", 1)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.10. db_url (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp24448"></a>5.10. <code class="varname">db_url</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
		If you want to store the information about the dialogs in a database,
		a database URL must be specified.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">mysql://kamailio:kamailiorw@localhost/kamailio</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp25984"></a>
              <p class="title">
                <strong>Example 1.10. Set <code class="varname">db_url</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "db_url", "dbdriver://username:password@dbhost/dbname")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.11. db_mode (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp27184"></a>5.11. <code class="varname">db_mode</code> (integer)</h3>
                </div>
              </div>
            </div>
            <p>
		Mode of synchronisation of dialog information from memory to an
		underlying database (if desired):
		</p>
            <p>
		The supported modes are:
		</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>0 - NO_DB</em></span> - the memory content is not
				flushed into DB;
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>1 - REALTIME</em></span> - any dialog information
				changes will be reflected into the database immediatly.
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>2 - DELAYED</em></span> - the dialog information
				changes will be flushed into DB periodically, based on a
				timer routine.
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>3 - SHUTDOWN</em></span> - the dialog information
				will be flushed into DB only at shutdown - no runtime updates.
			</p>
                </li>
              </ul>
            </div>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">0</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp31488"></a>
              <p class="title">
                <strong>Example 1.11. Set <code class="varname">db_mode</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "db_mode", 1)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.12. db_update_period (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp32592"></a>5.12. <code class="varname">db_update_period</code> (integer)</h3>
                </div>
              </div>
            </div>
            <p>
			The interval (seconds) at which to update dialogs' information, if you chose to store the dialogs' info at a given interval.
			Too short an interval will generate intensive database operations, while an excessively long one will miss dialogs with a short lifetime.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">60</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp34256"></a>
              <p class="title">
                <strong>Example 1.12. Set <code class="varname">db_update_period</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "db_update_period", 120)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.13. db_fetch_rows (integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp35432"></a>5.13. <code class="varname">db_fetch_rows</code> (integer)</h3>
                </div>
              </div>
            </div>
            <p>
			The number of the rows to be fetched at once from database when loading the dialog records at startup from the database.
			This value can be used to tune the load time at startup. For 1MB of private memory (default), it should be below 400.
			The database driver must support the fetch_result() capability. A value of 0 means the functionality is disabled.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">200</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp37192"></a>
              <p class="title">
                <strong>Example 1.13. Set <code class="varname">db_fetch_rows</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "db_fetch_rows", 500)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.14. table_name (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp38360"></a>5.14. <code class="varname">table_name</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
		If you want to store the information about the dialogs in a
		database a table name must be specified.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">dialog</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp39856"></a>
              <p class="title">
                <strong>Example 1.14. Set <code class="varname">table_name</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "table_name", "my_dialog")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.15. callid_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp41024"></a>5.15. <code class="varname">callid_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the dialogs' callid.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">callid</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp42488"></a>
              <p class="title">
                <strong>Example 1.15. Set <code class="varname">callid_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "callid_column", "callid_c_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.16. from_uri_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp43672"></a>5.16. <code class="varname">from_uri_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the caller's
			sip address.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">from_uri</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1815112"></a>
              <p class="title">
                <strong>Example 1.16. Set <code class="varname">from_uri_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "from_uri_column", "from_uri_c_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.17. from_tag_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1816296"></a>5.17. <code class="varname">from_tag_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the From tag from
			the INVITE request.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">from_tag</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1817776"></a>
              <p class="title">
                <strong>Example 1.17. Set <code class="varname">from_tag_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "from_tag_column", "from_tag_c_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.18. to_uri_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1818960"></a>5.18. <code class="varname">to_uri_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the callee's sip address.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">to_uri</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1820424"></a>
              <p class="title">
                <strong>Example 1.18. Set <code class="varname">to_uri_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "to_uri_column", "to_uri_c_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.19. to_tag_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1821608"></a>5.19. <code class="varname">to_tag_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the To tag from
			the 200 OK response to the INVITE request, if present.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">to_tag</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1823120"></a>
              <p class="title">
                <strong>Example 1.19. Set <code class="varname">to_tag_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "to_tag_column", "to_tag_c_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.20. from_cseq_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1824304"></a>5.20. <code class="varname">from_cseq_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the cseq from caller
			side.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">caller_cseq</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1825776"></a>
              <p class="title">
                <strong>Example 1.20. Set <code class="varname">from_cseq_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "from_cseq_column", "column_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.21. to_cseq_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1826960"></a>5.21. <code class="varname">to_cseq_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the cseq from callee
			side.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">callee_cseq</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1828432"></a>
              <p class="title">
                <strong>Example 1.21. Set <code class="varname">to_cseq_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "to_cseq_column", "column_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.22. from_route_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1829616"></a>5.22. <code class="varname">from_route_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the route records from
			caller side (proxy to caller).
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">caller_route_set</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1831120"></a>
              <p class="title">
                <strong>Example 1.22. Set <code class="varname">from_route_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "from_route_column", "column_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.23. to_route_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1832304"></a>5.23. <code class="varname">to_route_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the route records from
			callee side (proxy to callee).
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">callee_route_set</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1833808"></a>
              <p class="title">
                <strong>Example 1.23. Set <code class="varname">to_route_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "to_route_column", "column_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.24. from_contact_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1834992"></a>5.24. <code class="varname">from_contact_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the caller's contact
			uri.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">caller_contact</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1836472"></a>
              <p class="title">
                <strong>Example 1.24. Set <code class="varname">from_contact_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "from_contact_column", "column_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.25. to_contact_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1837656"></a>5.25. <code class="varname">to_contact_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the callee's contact
			uri.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">callee_contact</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1839136"></a>
              <p class="title">
                <strong>Example 1.25. Set <code class="varname">to_contact_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "to_contact_column", "column_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.26. from_sock_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1840320"></a>5.26. <code class="varname">from_sock_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the information about
			the local interface receiving the traffic from caller.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">caller_sock</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1841840"></a>
              <p class="title">
                <strong>Example 1.26. Set <code class="varname">from_sock_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "from_sock_column", "column_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.27. to_sock_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1843024"></a>5.27. <code class="varname">to_sock_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store information about the
			local interface receiving the traffic from callee.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">callee_sock</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1844536"></a>
              <p class="title">
                <strong>Example 1.27. Set <code class="varname">to_sock_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "to_sock_column", "column_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.28. h_id_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1845720"></a>5.28. <code class="varname">h_id_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the dialogs'
			hash id information.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">hash_id</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1847192"></a>
              <p class="title">
                <strong>Example 1.28. Set <code class="varname">h_id_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "h_id_column", "hash_id_c_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.29. h_entry_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1848368"></a>5.29. <code class="varname">h_entry_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the dialogs' hash
			entry information.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">hash_entry</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1849848"></a>
              <p class="title">
                <strong>Example 1.29. Set <code class="varname">h_entry_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "h_entry_column", "h_entry_c_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.30. state_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1851032"></a>5.30. <code class="varname">state_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the
			dialogs' state information.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">state</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1852504"></a>
              <p class="title">
                <strong>Example 1.30. Set <code class="varname">state_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "state_column", "state_c_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.31. start_time_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1853688"></a>5.31. <code class="varname">start_time_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the
			dialogs' start time information.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">start_time</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1855168"></a>
              <p class="title">
                <strong>Example 1.31. Set <code class="varname">start_time_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "start_time_column", "start_time_c_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.32. timeout_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1856360"></a>5.32. <code class="varname">timeout_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the dialogs' timeout.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">timeout</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1857824"></a>
              <p class="title">
                <strong>Example 1.32. Set <code class="varname">timeout_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "timeout_column", "timeout_c_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.33. sflags_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1859008"></a>5.33. <code class="varname">sflags_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the script flags.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">sflags</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1860464"></a>
              <p class="title">
                <strong>Example 1.33. Set <code class="varname">sflags_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "sflags_column", "s_flags")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.34. toroute_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1861640"></a>5.34. <code class="varname">toroute_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the index of the
			route to be executed at timeout.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">toroute</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1863136"></a>
              <p class="title">
                <strong>Example 1.34. Set <code class="varname">toroute_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "toroute_column", "timeout_route")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.35. vars_table_name (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1864320"></a>5.35. <code class="varname">vars_table_name</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
		If you want to store the variables for a dialog in a
		database a table name must be specified.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">dialog_vars</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1865816"></a>
              <p class="title">
                <strong>Example 1.35. Set <code class="varname">vars_table_name</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "vars_table_name", "my_dialog_vars")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.36. vars_h_id_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1867000"></a>5.36. <code class="varname">vars_h_id_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the dialogs'
			hash id information (as a reference to the dialog table).
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">hash_id</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1868512"></a>
              <p class="title">
                <strong>Example 1.36. Set <code class="varname">vars_h_id_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "vars_h_id_column", "vars_h_id_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.37. vars_h_entry_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1869696"></a>5.37. <code class="varname">vars_h_entry_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the dialogs'
			hash entry information (as a reference to the dialog table).
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">hash_entry</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1871216"></a>
              <p class="title">
                <strong>Example 1.37. Set <code class="varname">vars_h_entry_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "vars_h_entry_column", "vars_h_entry_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.38. vars_key_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1872408"></a>5.38. <code class="varname">vars_key_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the keys of a variable.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">dialog_key</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1873872"></a>
              <p class="title">
                <strong>Example 1.38. Set <code class="varname">vars_key_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "vars_key_column", "vars_key_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.39. vars_value_column (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1875056"></a>5.39. <code class="varname">vars_value_column</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			The column name in the database to store the keys of a variable.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">dialog_value</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1876528"></a>
              <p class="title">
                <strong>Example 1.39. Set <code class="varname">vars_value_column</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "vars_value_column", "vars_value_name")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.40. profiles_with_value (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1877720"></a>5.40. <code class="varname">profiles_with_value</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			List of names for profiles with values.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">empty</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1879160"></a>
              <p class="title">
                <strong>Example 1.40. Set <code class="varname">profiles_with_value</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "profiles_with_value", "caller ; my_profile")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.41. profiles_no_value (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1880352"></a>5.41. <code class="varname">profiles_no_value</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			List of names for profiles without values.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">empty</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1881792"></a>
              <p class="title">
                <strong>Example 1.41. Set <code class="varname">profiles_no_value</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "profiles_no_value", "inbound ; outbound")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.42. bridge_controller (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1882984"></a>5.42. <code class="varname">bridge_controller</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			SIP address to be used in From header when initiating a call bridge.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">sip:controller@kamailio.org</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1884432"></a>
              <p class="title">
                <strong>Example 1.42. Set <code class="varname">bridge_controller</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "bridge_controller", "sip:ctd@kamailio.org")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.43. bridge_contact (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1885624"></a>5.43. <code class="varname">bridge_contact</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			SIP address to be used in Contact header when doing a call bridge.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">sip:controller@kamailio.org:5060</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1887072"></a>
              <p class="title">
                <strong>Example 1.43. Set <code class="varname">bridge_contact</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "bridge_contact", "sip:ctd@127.0.0.1:5060")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.44. initial_cbs_inscript (int)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1888264"></a>5.44. <code class="varname">initial_cbs_inscript</code> (int)</h3>
                </div>
              </div>
            </div>
            <p>
            If the initial dialog callbacks (i.e., DLGCB_CREATED and
            DLGCB_SPIRALED) should be executed in-script or post-script.
            If dlg_manage() is not used, the setting of this parameter does
            not matter; otherwise, initial callbacks will be executed
            directly after dlg_manage() is called if this parameter is
            enabled. If it is disabled, initial callback execution will be
            postponed until configuration script execution completes.
		</p>
            <p>
		The supported values are:
		</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>0 - POST-SCRIPT</em></span> - execute initial
				callbacks after the script completes;
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>1 - IN-SCRIPT</em></span> - execute initial
                callbacks during script execution, i.e., right after
                dlg_manage() is called;
			</p>
                </li>
              </ul>
            </div>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">1</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1891824"></a>
              <p class="title">
                <strong>Example 1.44. Set <code class="varname">initial_cbs_inscript</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "initial_cbs_inscript", 0)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.45. send_bye (int)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1892976"></a>5.45. <code class="varname">send_bye</code> (int)</h3>
                </div>
              </div>
            </div>
            <p>
			If set to 1, BYE requests will be sent out for each dialog that
			timed out. It is an alternative to $dlg_ctx(timeout_bye)=1 for
			all dialogs.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">0</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1894512"></a>
              <p class="title">
                <strong>Example 1.45. Set <code class="varname">send_bye</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "send_bye", 1)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.46. wait_ack (int)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1895616"></a>5.46. <code class="varname">wait_ack</code> (int)</h3>
                </div>
              </div>
            </div>
            <p>
			If set to 1, dialog will be keept a bit longer in memory
			in order to absorb the ACK negative replies of initial
			INVITE. If not, the dialog is destroyed when negative reply
			is sent out (less internal complexity).
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">1</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1897224"></a>
              <p class="title">
                <strong>Example 1.46. Set <code class="varname">wait_ack</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "wait_ack", 0)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.47. ka_timer (int)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1898328"></a>5.47. <code class="varname">ka_timer</code> (int)</h3>
                </div>
              </div>
            </div>
            <p>
			Keep-alive timer step - how often to execute the callback to
			send dialog keep alives (SIP OPTIONS requests within dialog).
			The value represents the number of seconds.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">0</span>”</span> (no keep alive).
		</em></span>
		</p>
            <div class="example">
              <a id="idp1899872"></a>
              <p class="title">
                <strong>Example 1.47. Set <code class="varname">ka_timer</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "ka_timer", 10)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.48. ka_interval (int)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1901032"></a>5.48. <code class="varname">ka_interval</code> (int)</h3>
                </div>
              </div>
            </div>
            <p>
			The interval between keep alives within dialog (SIP OPTIONS
			requests), sent to caller or callee. The keep alive request
			will be sent by the first callback fired by KA timer after
			the ka_interval elapsed from dialog setup or previous keep-alive.
			The value represents the number of seconds.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">0</span>”</span> (no keep alive).
		</em></span>
		</p>
            <div class="example">
              <a id="idp1902704"></a>
              <p class="title">
                <strong>Example 1.48. Set <code class="varname">ka_interval</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "ka_interval", 300)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.49. timeout_noreset (int)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1903864"></a>5.49. <code class="varname">timeout_noreset</code> (int)</h3>
                </div>
              </div>
            </div>
            <p>
           If set to 1, the dialog timeout won't be reset each
			time a sequential request is processed.
			It is an alternative to dlg_set_property("timeout-noreset") for all dialogs.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">0</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1905448"></a>
              <p class="title">
                <strong>Example 1.49. Set <code class="varname">timeout_noreset</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "timeout_noreset", 1)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.50. timer_procs (int)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="dialog.p.timer_procs"></a>5.50. <code class="varname">timer_procs</code> (int)</h3>
                </div>
              </div>
            </div>
            <p>
			If set to 1, the dialog will run own timer process to execute
			dialog timeout tasks.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">0</span>”</span> (use core time process).
		</em></span>
		</p>
            <div class="example">
              <a id="idp1908240"></a>
              <p class="title">
                <strong>Example 1.50. Set <code class="varname">timer_procs</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "timer_procs", 1)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.51. track_cseq_updates (int)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="dialog.p.track_cseq_updates"></a>5.51. <code class="varname">track_cseq_updates</code> (int)</h3>
                </div>
              </div>
            </div>
            <p>
			Enable the callbacks for tracking if CSeq number needs to
			be updated. It is the case when the INVITE has to be
			authenticated to downstream provider using uac_auth() from
			uac module.
		</p>
            <p>
			This is done only for requests in downstream direction. The
			CSeq difference is stored in $dlg_var(cseq_diff), be sure
			this variable is not overwritten via config operation.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">0</span>”</span> (disabled).
		</em></span>
		</p>
            <div class="example">
              <a id="idp1911520"></a>
              <p class="title">
                <strong>Example 1.51. Set <code class="varname">track_cseq_updates</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "track_cseq_updates", 1)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="5.52. lreq_callee_headers (string)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="dialog.p.lreq_callee_headers"></a>5.52. <code class="varname">lreq_callee_headers</code> (string)</h3>
                </div>
              </div>
            </div>
            <p>
			SIP headers to be added when sending local generated requests
			(e.g., BYE) to callee. It can be useful when you use topoh module
			with call-id masking (see the docs of topoh module).
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">null</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp1914520"></a>
              <p class="title">
                <strong>Example 1.52. Set <code class="varname">lreq_callee_headers</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "lreq_callee_headers", "TH: dlh\r\n")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
        </div>
        <div class="section" title="6. Functions">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp1915784"></a>6. Functions</h2>
              </div>
            </div>
          </div>
          <div class="section" title="6.1.  set_dlg_profile(profile,[value])">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1916152"></a>6.1. 
		<code class="function">set_dlg_profile(profile,[value])</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Inserts the current dialog into a profile. Note that if the profile does
		not support values, they will be silently discarded. Also, there is
		no check for inserting the same dialog into the same profile multiple
		times.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>profile</em></span> - name of the profile to be
			added to;
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>value</em></span> (optional) - string value to
			define the membership of the dialog in the profile.  Note that the
			profile must support values.  Pseudo-variables are supported.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from REQUEST_ROUTE, BRANCH_ROUTE,
			REPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp1919440"></a>
              <p class="title">
                <strong>Example 1.53. <code class="function">set_dlg_profile</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
set_dlg_profile("inbound_call");
set_dlg_profile("caller","$fu");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.2.  unset_dlg_profile(profile,[value])">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1920688"></a>6.2. 
		<code class="function">unset_dlg_profile(profile,[value])</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Removes the current dialog from a profile.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>profile</em></span> - name of the profile to be
			removed from;
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>value</em></span> (optional) - string value to
			define the belonging of the dialog to the profile - note that the
			profile must support values.
			Pseudo-variables are supported.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp1923824"></a>
              <p class="title">
                <strong>Example 1.54. <code class="function">unset_dlg_profile</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
unset_dlg_profile("inbound_call");
unset_dlg_profile("caller","$fu");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.3.  is_in_profile(profile,[value])">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1925080"></a>6.3. 
		<code class="function">is_in_profile(profile,[value])</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Checks if the current dialog belongs to a profile. If the profile
		supports values, the check can be reinforced to take into account a
		specific value, if the dialog was inserted into the profile for a
		specific value. If no value is passed, only the membership of
		the dialog in the profile per se is checked. Note that if the profile does
		not support values, the value parameter will be silently discarded.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>profile</em></span> - name of the profile to be
			checked against;
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>value</em></span> (optional) - string value to
			further restrict the check. Pseudo-variables are supported.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from REQUEST_ROUTE, BRANCH_ROUTE,
			REPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp1928536"></a>
              <p class="title">
                <strong>Example 1.55. <code class="function">is_in_profile</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
if (is_in_profile("inbound_call")) {
	log("this request belongs to a inbound call\n");
}
...
if (is_in_profile("caller","XX")) {
	log("this request belongs to a call of user XX\n");
}
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.4.  get_profile_size(profile,[value],size)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1929904"></a>6.4. 
		<code class="function">get_profile_size(profile,[value],size)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Returns the number of dialogs belonging to a profile. If the profile
		supports values, the check can be reinforced to take into account a
		specific value, i.e. how many dialogs were inserted into the profile with
		a specific value. If no value is passed, only the membersip of the
		dialog in the profile per se is checked. Note that if the profile does not
		support values, the value parameter will be silently discarded.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>profile</em></span> - name of the profile to get
			the size for;
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>value</em></span> (optional) - string value to
			further restrict the check. Pseudo-variables are supported;
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>size</em></span> - an AVP or script variable to
			return the profile size in.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from REQUEST_ROUTE, BRANCH_ROUTE,
			REPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp1933968"></a>
              <p class="title">
                <strong>Example 1.56. <code class="function">get_profile_size</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
if(get_profile_size("inbound_call","$avp(size)"))
    xlog("currently there are $avp(size) inbound calls\n");
...
if(get_profile_size("caller","$fu","$avp(size)"))
    xlog("currently, the user $fu has $avp(size) active outgoing calls\n");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.5.  dlg_isflagset(flag)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp1935392"></a>6.5. 
		<code class="function">dlg_isflagset(flag)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Check if the dialog flag is set or not.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>flag</em></span> - index of the flag - can be
				pseudo-variable.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp3681648"></a>
              <p class="title">
                <strong>Example 1.57. <code class="function">dlg_isflagset</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
if(dlg_isflagset("1"))
{
    ...
}
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.6.  dlg_setflag(flag)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3682712"></a>6.6. 
		<code class="function">dlg_setflag(flag)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Set the dialog flag.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>flag</em></span> - index of the flag - can be
				pseudo-variable.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp3684800"></a>
              <p class="title">
                <strong>Example 1.58. <code class="function">dlg_setflag</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
dlg_setflag("1");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.7.  dlg_resetflag(flag)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3685808"></a>6.7. 
		<code class="function">dlg_resetflag(flag)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Reset the dialog flag.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>flag</em></span> - index of the flag - can be
				pseudo-variable.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp3687896"></a>
              <p class="title">
                <strong>Example 1.59. <code class="function">dlg_resetflag</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
redlg_setflag("1");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.8.  dlg_bye(side)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3688904"></a>6.8. 
		<code class="function">dlg_bye(side)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Send BYE to both parties of a dialog.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>side</em></span> - where to send the BYE. It can be:
				'caller', 'callee', or both.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp3691008"></a>
              <p class="title">
                <strong>Example 1.60. <code class="function">dlg_bye</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
dlg_bye("all");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.9.  dlg_refer(side, address)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3692016"></a>6.9. 
		<code class="function">dlg_refer(side, address)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Refer the 'side' to a new SIP 'address'.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>side</em></span> - which side of the dialog to REFER. It can be:
				'caller' or 'callee'.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>address</em></span> - SIP address to refer to.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp3694784"></a>
              <p class="title">
                <strong>Example 1.61. <code class="function">dlg_refer</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
dlg_refer("caller", "sip:announcement@kamailio.org");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.10.  dlg_manage()">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3695864"></a>6.10. 
		<code class="function">dlg_manage()</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Process current SIP request with dialog module. It is an alternative to
		setting dialog flag for initial INVITE and Route-parameter-callback
		execution for within-dialog requests.
		</p>
            <p>
		This function can be used from REQUEST_ROUTE.
		</p>
            <div class="example">
              <a id="idp3697128"></a>
              <p class="title">
                <strong>Example 1.62. <code class="function">dlg_manage</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("dialog", "default_timeout", 100)
...
route {
...
    if(is_method("INVITE") &amp;&amp; !has_totag())
    {
        $dlg_ctx(timeout_route) = 12;
        $dlg_ctx(timeout_bye) = 1;
    }
    dlg_manage();
...
}
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.11.  dlg_bridge(from, to, op)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3698368"></a>6.11. 
		<code class="function">dlg_bridge(from, to, op)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Bridge 'from' SIP address to 'to' SIP address via outbound proxy 'op'.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>from</em></span> - SIP address of first side to call.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>to</em></span> - SIP address to refer <span class="quote">“<span class="quote">from</span>”</span> to.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>op</em></span> - outbound proxy SIP address.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp3701832"></a>
              <p class="title">
                <strong>Example 1.63. <code class="function">dlg_bridge</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
dlg_bridge("sip:user@kamailio.org", "sip:annoucement@kamailio.org",
   "sip:kamailio.org:5080");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.12.  dlg_get(callid, ftag, ttag)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3702952"></a>6.12. 
		<code class="function">dlg_get(callid, ftag, ttag)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
			Search and set current dialog based on Call-ID, From-Tag and To-Tag
			parameters.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>callid</em></span> - SIP call-id.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>ftag</em></span> - SIP From tag.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>ttag</em></span> - SIP To tag.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from BRANCH_ROUTE,
			REQUEST_ROUTE, ONREPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp3706144"></a>
              <p class="title">
                <strong>Example 1.64. <code class="function">dlg_get</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
if(dlg_get("abcdef", "123", "456"))
{
	dlg_bye("all");
}
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.13.  is_known_dlg()">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3707224"></a>6.13. 
		<code class="function">is_known_dlg()</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		This function checks if the current SIP message being processed
		belongs to any transaction within an active dialog that the 
		dialog module is currently tracking.  This is a check for 
		tracking of any kind, without regard to profiles.
		</p>
            <p>
		This function has numerous potential applications, among which
		is that it can be used to strengthen security for 
		loose-routing sequential (in-dialog) requests or responses
		to them, as by providing a preventative check against
		spoofing on the proxy level instead of leaving the issue
		purely to the receiving UA.  
		</p>
            <p>
		This function can be used from REQUEST_ROUTE, BRANCH_ROUTE,
			REPLY_ROUTE and FAILURE_ROUTE.
		</p>
            <div class="example">
              <a id="idp3709128"></a>
              <p class="title">
                <strong>Example 1.65. <code class="function">is_known_dlg()</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
if(!uri == myself) {
	if(is_known_dlg()) {
		xlog("Request $rm from $ci is in-dialog\n");
	}
}
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.14.  dlg_set_timeout(timeout [, h_entry, h_id])">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3710248"></a>6.14. 
		<code class="function">dlg_set_timeout(timeout [, h_entry, h_id])</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
			Set the dialog timeout. Dialog timeout will be updated if it was
			already set. If h_entry and h_id parameters are not provided, the
			dialog will be searched based on (callid, fromtag, totag) of
			currently processed SIP message.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>timeout</em></span> - the interval in seconds after
				which the dialog will time out.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>h_entry</em></span> - h_entry value of the iternal
				dialog identifier.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>h_id</em></span> - h_id valye if the internal dialog
				identifier.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from ANY_ROUTE.
		</p>
            <div class="example">
              <a id="idp3713792"></a>
              <p class="title">
                <strong>Example 1.66. <code class="function">dlg_set_timeout</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
if(dlg_set_timeout("180", "123", "456"))
{
    ...
}
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.15.  dlg_set_timeout_by_profile(profile, [value], timeout)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3714872"></a>6.15. 
		<code class="function">dlg_set_timeout_by_profile(profile, [value], timeout)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
			Like <span class="emphasis"><em>dlg_set_timeout()</em></span>, but 
			simultaneously sets the timeout of all dialogs in
			a given profile.  Can be constrained by profile value.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>profile</em></span> - The dialog profile across which to apply the timeout.
			</p>
                  <p><span class="emphasis"><em>value</em></span> (optional) - The profile value to use when applying the dialog timeout.
			</p>
                  <p><span class="emphasis"><em>timeout</em></span> - the interval in seconds after
				which the dialog will time out.
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from ANY_ROUTE.
		</p>
            <div class="example">
              <a id="idp3718152"></a>
              <p class="title">
                <strong>Example 1.67. <code class="function">dlg_set_timeout_by_profile</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
# All dialogs belonging to user abc123 (tracked via set_dlg_profile()) 
# will be timed out in 3 seconds.

dlg_set_timeout_by_profile("users", "abc123", "3");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.16.  dlg_set_property(attr)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3719336"></a>6.16. 
		<code class="function">dlg_set_property(attr)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
			Set a dialog property - an attribute that enable/disable
			various behaviours (e.g., sending keep alive requests).
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>attr</em></span> - name of property. It can be:
				</p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist">
                      <li class="listitem">
						'ka-src' - send keep alive OPTION requests to caller
					</li>
                      <li class="listitem">
						'ka-dst' - send keep alive OPTION requests to callee
					</li>
                      <li class="listitem">
						'timeout-noreset' - don't reset timeout on in-dialog messages reception
					</li>
                    </ul>
                  </div>
                  <p>
			</p>
                </li>
              </ul>
            </div>
            <p>
			If keep alive is enabled for a dialog, the module will send
			SIP OPTIONS requests with CSeq lower or equal than last request
			within dialog, with the scope of detecting if the destination is
			still in the call. If the keep alive request results in a local
			timeout or '481 Call Leg/Transaction Does Not Exist', then the
            dialog is ended from the server.
		</p>
            <p>
            If 'timeout-noreset' is set, dialog timeout won't be reset upon reception
            of in-dialog messages (default behavior).
		</p>
            <p>
		This function can be used from ANY_ROUTE.
		</p>
            <div class="example">
              <a id="idp3723456"></a>
              <p class="title">
                <strong>Example 1.68. <code class="function">dlg_set_property</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
dlg_set_property("ka-src");
dlg_set_property("ka-dst");
dlg_set_property("timeout-noreset");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="6.17.  dlg_remote_profile(cmd, profile, value, uid, expires)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="dialog.f.dlg_remote_profile"></a>6.17. 
		<code class="function">dlg_remote_profile(cmd, profile, value, uid, expires)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
			Manage remote profile via config file. A remote profile item is considered when
			the dialog is not managed by this server instance. The notification to add/remove
			can be received via SIP or a RPC command, the operation can be then triggered
			from configuration file. This should allow counting active dialogs in a profile
			that are managed by multiple SIP server instances.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>cmd</em></span> - the operations to do: add - add an item in
				profile; rm - remove an item from profile
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>profile</em></span> - name of profile
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>value</em></span> - value for profile (if no value is needed
				for that profile, use an empty string.
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>expires</em></span> - absolute time (unix timestamp) when this
				profile item should be removed automatically (time based),
				if still in the profile
			</p>
                </li>
              </ul>
            </div>
            <p>
		This function can be used from ANY_ROUTE.
		</p>
            <div class="example">
              <a id="idp3729312"></a>
              <p class="title">
                <strong>Example 1.69. <code class="function">dlg_remote_profile</code> usage</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
$var(exp) = 3600 + $Ts;
dlg_remote_profile("add", "caller", "test", "$sruid", "$var(exp)");
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
        </div>
        <div class="section" title="7. Statistics">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp3730496"></a>7. Statistics</h2>
              </div>
            </div>
          </div>
          <div class="section" title="7.1. active_dialogs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3730816"></a>7.1. <code class="varname">active_dialogs</code></h3>
                </div>
              </div>
            </div>
            <p>
			Returns the number of current active dialogs (may be confirmed or
			not).
			</p>
          </div>
          <div class="section" title="7.2. early_dialogs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3731544"></a>7.2. <code class="varname">early_dialogs</code></h3>
                </div>
              </div>
            </div>
            <p>
			Returns the number of early dialogs.
			</p>
          </div>
          <div class="section" title="7.3. processed_dialogs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3732240"></a>7.3. <code class="varname">processed_dialogs</code></h3>
                </div>
              </div>
            </div>
            <p>
			Returns the total number of processed dialogs (terminated,
			expired or active) from the startup.
			</p>
          </div>
          <div class="section" title="7.4. expired_dialogs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3732992"></a>7.4. <code class="varname">expired_dialogs</code></h3>
                </div>
              </div>
            </div>
            <p>
			Returns the total number of expired dialogs from the startup.
			</p>
          </div>
          <div class="section" title="7.5. failed_dialogs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3733712"></a>7.5. <code class="varname">failed_dialogs</code></h3>
                </div>
              </div>
            </div>
            <p>
			Returns the number of failed dialogs.
			</p>
          </div>
        </div>
        <div class="section" title="8. MI Commands">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp3734472"></a>8. MI Commands</h2>
              </div>
            </div>
          </div>
          <div class="section" title="8.1. dlg_list">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3734792"></a>8.1. <code class="varname">dlg_list</code></h3>
                </div>
              </div>
            </div>
            <p>
		Lists the description of a dialog or of all dialogs (calls). If only
		one dialogs is to be listed, the dialog identifiers are to be passed
		as parameter (callid and fromtag).
		</p>
            <p>
		Name: <span class="emphasis"><em>dlg_list</em></span>
		</p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>callid</em></span> (optional) - callid if a single
				dialog to be listed.
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>from_tag</em></span> (optional, but cannot be present
				without the callid parameter) - from tag (as per initial request)
				of the dialog to be listed.  Note that if the from_tag is not
				specified, only dialogs created by a request without a from tag
				are matched, which will only occur with broken clients and is
				thus a very rare situation.
			</p>
                </li>
              </ul>
            </div>
            <p>
		MI FIFO Command Format:
		</p>
            <pre class="programlisting">		:dlg_list:_reply_fifo_file_
		_empty_line_</pre>
            <pre class="programlisting">		:dlg_list:_reply_fifo_file_
		abcdrssfrs122444@192.168.1.1
		AAdfeEFF33</pre>
          </div>
          <div class="section" title="8.2. dlg_list_ctx">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3738704"></a>8.2. <code class="varname">dlg_list_ctx</code></h3>
                </div>
              </div>
            </div>
            <p>
		The same as the <span class="quote">“<span class="quote">dlg_list</span>”</span> but including in the dialog
		description the associated context from modules sitting on top of
		the dialog module.
		</p>
            <p>
		Name: <span class="emphasis"><em>dlg_list_ctx</em></span>
		</p>
            <p>Parameters: <span class="emphasis"><em>see <span class="quote">“<span class="quote">dlg_list</span>”</span></em></span>
		</p>
            <p>
		MI FIFO Command Format:
		</p>
            <pre class="programlisting">		:dlg_list_ctx:_reply_fifo_file_
		_empty_line_</pre>
          </div>
          <div class="section" title="8.3. dlg_end_dlg">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3741168"></a>8.3. <code class="varname">dlg_end_dlg</code></h3>
                </div>
              </div>
            </div>
            <p>
			Terminates a confirmed dialog by sending BYE requests in both directions.
			</p>
            <p>
		Name: <span class="emphasis"><em>dlg_end_dlg</em></span>
		</p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>h_entry</em></span> - hash entry of the dialog in the
				internal dialog table
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>h_id</em></span> - hash id of the dialog on the hash
				entry
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>extra_hdrs</em></span> - (optional) string containg
				extra headers (full format) to be added to the BYE requests.
			</p>
                </li>
              </ul>
            </div>
            <p>
		The values for the h_entry and h_id can be get via the dlg_list
		MI command.
		</p>
            <p>
		<span class="emphasis"><em>Note: Works only for confirmed dialogs.</em></span>
		</p>
            <p>
		MI FIFO Command Format:
		</p>
            <pre class="programlisting">		:dlg_end_dlg:_reply_fifo_file_
		342
		56
		_empty_line_</pre>
          </div>
          <div class="section" title="8.4. dlg_terminate_dlg">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3745568"></a>8.4. <code class="varname">dlg_terminate_dlg</code></h3>
                </div>
              </div>
            </div>
            <p>
		Terminates a singe dialog, identified by a Call-ID.
		</p>
            <p>
		Name: <span class="emphasis"><em>dlg_terminate_dlg</em></span>
		</p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>callid</em></span> - callid of the dialog to be terminated.
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>from_tag</em></span> (optional, but cannot be present
				without the callid parameter) - from tag (as per initial request)
				of the dialog to be terminated.  Note that if the from_tag is not
				specified, only dialogs created by a request without a from tag
				are matched, which will only occur with broken clients and is
				thus a very rare situation.
			</p>
                </li>
              </ul>
            </div>
            <p>
		<span class="emphasis"><em>Note: Works only for confirmed dialogs.</em></span>
		</p>
            <p>
		MI FIFO Command Format:
		</p>
            <pre class="programlisting">		:dlg_terminate_dlg:_reply_fifo_file_
		abcdrssfrs122444@192.168.1.1
		AAdfeEFF33</pre>
          </div>
          <div class="section" title="8.5. profile_get_size">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3749416"></a>8.5. <code class="varname">profile_get_size</code></h3>
                </div>
              </div>
            </div>
            <p>
		Returns the number of dialogs belonging to a profile. If the profile
		supports values, the check can be reinforced to take into account a
		specific value - how many dialogs were inserted into the profile with
		a specific value. If no value is passed, only the simply belonging of
		the dialog to the profile is checked. Note that if the profile does not
		supports values, this will be silently discarded.
		</p>
            <p>
		Name: <span class="emphasis"><em>profile_get_size</em></span>
		</p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>profile</em></span> - name of the profile to get the
				value for.
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>value</em></span> (optional)- string value to
				further restrict the check;
			</p>
                </li>
              </ul>
            </div>
            <p>
		MI FIFO Command Format:
		</p>
            <pre class="programlisting">		:profile_get_size:_reply_fifo_file_
		inbound_calls
		_empty_line_</pre>
          </div>
          <div class="section" title="8.6. profile_list_dlgs">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3752904"></a>8.6. <code class="varname">profile_list_dlgs</code></h3>
                </div>
              </div>
            </div>
            <p>
		Lists all the dialogs belonging to a profile. If the profile
		supports values, the check can be reinforced to take into account a
		specific value - list only the dialogs that were inserted into the
		profile with that specific value. If no value is passed, all dialogs
		belonging to the profile will be listed. Note that if the profile does
		not supports values, this will be silently discarded.
		</p>
            <p>
		Name: <span class="emphasis"><em>profile_list_dlgs</em></span>
		</p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>profile</em></span> - name of the profile to list the
				dialog for.
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>value</em></span> (optional)- string value to
				further restrict the check;
			</p>
                </li>
              </ul>
            </div>
            <p>
		MI FIFO Command Format:
		</p>
            <pre class="programlisting">		:profile_list_dlgs:_reply_fifo_file_
		inbound_calls
		_empty_line_</pre>
          </div>
          <div class="section" title="8.7. dlg_bridge">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3756384"></a>8.7. <code class="varname">dlg_bridge</code></h3>
                </div>
              </div>
            </div>
            <p>
			Bridge two SIP addresses in a call using INVITE(hold)-REFER-BYE
			mechanism.
		</p>
            <p>
		Name: <span class="emphasis"><em>dlg_bridge</em></span>
		</p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>from</em></span> - SIP address to initiate the call
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>to</em></span> - SIP address to refer 'from' to
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>op</em></span> (optional) - outbound proxy SIP address
			</p>
                </li>
              </ul>
            </div>
            <p>
		MI FIFO Command Format:
		</p>
            <pre class="programlisting">		:dlg_bridge:_reply_fifo_file_
		from
		to
		op
		_empty_line_</pre>
          </div>
        </div>
        <div class="section" title="9. Exported RPC Functions">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp3760064"></a>9. Exported RPC Functions</h2>
              </div>
            </div>
          </div>
          <div class="section" title="9.1. dlg.list">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3760384"></a>9.1. <code class="varname">dlg.list</code></h3>
                </div>
              </div>
            </div>
            <p>Lists the description of all dialogs (calls). </p>
            <p>Name: <span class="emphasis"><em>dlg.list</em></span></p>
            <p>RPC Command Format:</p>
            <pre class="programlisting">		serctl dlg_list</pre>
          </div>
          <div class="section" title="9.2. dlg.list_ctx">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3761904"></a>9.2. <code class="varname">dlg.list_ctx</code></h3>
                </div>
              </div>
            </div>
            <p>
		The same as the <span class="quote">“<span class="quote">dlg_list</span>”</span> but including in the dialog
		description the associated context from modules sitting on top of
		the dialog module.
		</p>
            <p>Name: <span class="emphasis"><em>dlg.list_ctx</em></span></p>
            <p>RPC Command Format:</p>
            <pre class="programlisting">		serctl dlg.list_ctx</pre>
          </div>
          <div class="section" title="9.3. dlg.dlg_list">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3763688"></a>9.3. <code class="varname">dlg.dlg_list</code></h3>
                </div>
              </div>
            </div>
            <p>
		Lists the description of one dialog.  The dialog identifiers are to be passed
		as parameter (callid and fromtag).
		</p>
            <p>Name: <span class="emphasis"><em>dlg.dlg_list</em></span></p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>callid</em></span> callid of the dialog to be listed.
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>from_tag</em></span> from tag (as per initial request)
				of the dialog to be listed.
			</p>
                </li>
              </ul>
            </div>
            <p>RPC Command Format:</p>
            <pre class="programlisting">		serctl dlg.list abcdrssfrs122444@192.168.1.1 AAdfeEFF33</pre>
          </div>
          <div class="section" title="9.4. dlg.dlg_list_ctx">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3766760"></a>9.4. <code class="varname">dlg.dlg_list_ctx</code></h3>
                </div>
              </div>
            </div>
            <p>
		The same as the <span class="quote">“<span class="quote">dlg.list_ctx</span>”</span> but including in the dialog
		description the associated context from modules sitting on top of
		the dialog module.
		</p>
            <p>Name: <span class="emphasis"><em>dlg.dlg_list_ctx</em></span></p>
            <p>Parameters: <span class="emphasis"><em>see <span class="quote">“<span class="quote">dlg_list</span>”</span></em></span>
		</p>
            <p>RPC Command Format:</p>
            <pre class="programlisting">		serctl dlg.list_ctx abcdrssfrs122444@192.168.1.1 AAdfeEFF33</pre>
          </div>
          <div class="section" title="9.5. dlg.end_dlg">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3769128"></a>9.5. <code class="varname">dlg.end_dlg</code></h3>
                </div>
              </div>
            </div>
            <p>
			Terminates an ongoing dialog by sending BYE in both directions.
			</p>
            <p>Name: <span class="emphasis"><em>dlg.end_dlg</em></span></p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>h_entry</em></span> - hash entry of the dialog in the
				internal dialog table
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>h_id</em></span> - hash id of the dialog on the hash
				entry
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>extra_hdrs</em></span> - (optional) string containg
				extra headers (full format) to be added to the BYE requests.
			</p>
                </li>
              </ul>
            </div>
            <p>
		The values for the h_entry and h_id can be get via the dlg_list
		RPC command.
		</p>
            <p>RPC Command Format:</p>
            <pre class="programlisting">		serctl dlg.end_dlg 342 56</pre>
          </div>
          <div class="section" title="9.6. dlg.profile_get_size">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3772960"></a>9.6. <code class="varname">dlg.profile_get_size</code></h3>
                </div>
              </div>
            </div>
            <p>
		Returns the number of dialogs belonging to a profile. If the profile
		supports values, the check can be reinforced to take into account a
		specific value - how many dialogs were inserted into the profile with
		a specific value. If no value is passed, only the simply belonging of
		the dialog to the profile is checked. Note that if the profile does not
		support values, the value parameter will be silently discarded.
		</p>
            <p>Name: <span class="emphasis"><em>dlg.profile_get_size</em></span></p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>profile</em></span> - name of the profile to get the
				value for.
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>value</em></span> (optional)- string value to
				further restrict the check;
			</p>
                </li>
              </ul>
            </div>
            <p>RPC Command Format:</p>
            <pre class="programlisting">		serctl dlg.dlg.profile_get_size inbound_calls</pre>
          </div>
          <div class="section" title="9.7. dlg.profile_list">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3776336"></a>9.7. <code class="varname">dlg.profile_list</code></h3>
                </div>
              </div>
            </div>
            <p>
		Lists all the dialogs belonging to a profile. If the profile
		supports values, the check can be reinforced to take into account a
		specific value, i.e. list only the dialogs that were inserted into the
		profile with that specific value. If no value is passed, all dialogs
		belonging to the profile will be listed. Note that if the profile does
		not supports values, this will be silently discarded.
		</p>
            <p>Name: <span class="emphasis"><em>dlg.profile_list</em></span></p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>profile</em></span> - name of the profile to list the
				dialog for.
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>value</em></span> (optional)- string value to
				further restrict the check;
			</p>
                </li>
              </ul>
            </div>
            <p>RPC Command Format:</p>
            <pre class="programlisting">		serctl dlg.profile_list inbound_calls</pre>
          </div>
          <div class="section" title="9.8. dlg.bridge_dlg">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3779680"></a>9.8. <code class="varname">dlg.bridge_dlg</code></h3>
                </div>
              </div>
            </div>
            <p>
			Bridge two SIP addresses into a call using INVITE(hold)-REFER-BYE
			mechanism.
		</p>
            <p>Name: <span class="emphasis"><em>dlg.bridge_dlg</em></span></p>
            <p>Parameters:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>from</em></span> - SIP address to initiate the call
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>to</em></span> - SIP address to refer 'from' to
			</p>
                </li>
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>op</em></span> (optional) - outbound proxy SIP address
			</p>
                </li>
              </ul>
            </div>
            <p>RPC Command Format:</p>
            <pre class="programlisting">		serctl dlg.list from to op</pre>
          </div>
        </div>
        <div class="section" title="10. Exported pseudo-variables">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp3783224"></a>10. Exported pseudo-variables</h2>
              </div>
            </div>
          </div>
          <div class="section" title="10.1. $DLG_count">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3783544"></a>10.1. <code class="varname">$DLG_count</code></h3>
                </div>
              </div>
            </div>
            <p>
			Returns the number of current active dialogs (may be confirmed or
			not).
			</p>
          </div>
          <div class="section" title="10.2. $DLG_status">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3784272"></a>10.2. <code class="varname">$DLG_status</code></h3>
                </div>
              </div>
            </div>
            <p>
			Returns the status of the dialog corresponding to the processed
			sequential request. This PV will be available only for sequential
			requests, after doing loose_route().
			</p>
            <p>
			Value may be:
			</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
					<span class="emphasis"><em>NULL</em></span> - Dialog not found.
				</p>
                </li>
                <li class="listitem">
                  <p>
					<span class="emphasis"><em>3</em></span> - Confirmed by a final reply but
					no ACK received yet.
				</p>
                </li>
                <li class="listitem">
                  <p>
					<span class="emphasis"><em>4</em></span> - Confirmed by a final reply and
					ACK received.
				</p>
                </li>
                <li class="listitem">
                  <p>
					<span class="emphasis"><em>5</em></span> - Dialog ended.
				</p>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" title="10.3. $DLG_lifetime">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3787416"></a>10.3. <code class="varname">$DLG_lifetime</code></h3>
                </div>
              </div>
            </div>
            <p>
			Returns the duration (in seconds) of the dialog corresponding to
			the processed sequential request. The duration is calculated from
			the dialog confirmation and the current moment. This PV will be
			available only for sequential requests, after doing loose_route().
			</p>
            <p>
			NULL will be returned if there is no dialog for the request.
			</p>
          </div>
          <div class="section" title="10.4. $dlg(...)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3788616"></a>10.4. <code class="varname">$dlg(...)</code></h3>
                </div>
              </div>
            </div>
            <p>Access to dialog attributes.</p>
          </div>
          <div class="section" title="10.5. $dlg_ctx(...)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3789296"></a>10.5. <code class="varname">$dlg_ctx(...)</code></h3>
                </div>
              </div>
            </div>
            <p>Access to dialog context attributes.</p>
          </div>
          <div class="section" title="10.6. $dlg_var(key)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3789984"></a>10.6. <code class="varname">$dlg_var(key)</code></h3>
                </div>
              </div>
            </div>
            <p>
			This is a read/write variable that can be used to store 
			custom values assigned with a dialog (e.g. the URI of a
			billing-server, an assigned emergency-server).
			This pseudo-variable will be available only for subsequential
			requests after doing loose_route().
			</p>
            <p>
			Note: You will receive "NULL", if there is no dialog for this
			request.
			</p>
          </div>
        </div>
        <div class="section" title="11. Event Routes">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp3791256"></a>11. Event Routes</h2>
              </div>
            </div>
          </div>
          <div class="section" title="11.1. event_route[dialog:start]">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3791576"></a>11.1. <code class="varname">event_route[dialog:start]</code></h3>
                </div>
              </div>
            </div>
            <p>
			Executed when 200OK for INVITE is processed.
			</p>
          </div>
          <div class="section" title="11.2. event_route[dialog:end]">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3792280"></a>11.2. <code class="varname">event_route[dialog:end]</code></h3>
                </div>
              </div>
            </div>
            <p>
			Executed when BYE is processed or dialog timed out.
			</p>
          </div>
          <div class="section" title="11.3. event_route[dialog:failed]">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp3792984"></a>11.3. <code class="varname">event_route[dialog:failed]</code></h3>
                </div>
              </div>
            </div>
            <p>
			Executed when dialog is not completed (+300 reply to INVITE).
			</p>
          </div>
        </div>
      </div>
      <div class="chapter" title="Chapter 2. Developer Guide">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="idp1103560"></a>Chapter 2. Developer Guide</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <p>
            <strong>Table of Contents</strong>
          </p>
          <dl>
            <dt>
              <span class="section">
                <a href="#idp2260304">1. Available Functions</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp138000">1.1. 
		<code class="function">register_dlgcb (dialog, type, cb, param, free_param_cb)</code>
		</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp2992184">1.2. 
		<code class="function">terminate_dlg (dlg, hdrs)</code>
		</a>
                  </span>
                </dt>
              </dl>
            </dd>
          </dl>
        </div>
        <div class="section" title="1. Available Functions">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp2260304"></a>1. Available Functions</h2>
              </div>
            </div>
          </div>
          <div class="section" title="1.1.  register_dlgcb (dialog, type, cb, param, free_param_cb)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp138000"></a>1.1. 
		<code class="function">register_dlgcb (dialog, type, cb, param, free_param_cb)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Register a new callback to the dialog.
		</p>
            <p>Meaning of the parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>struct dlg_cell* dlg</em></span> - dialog to 
			register callback to. If maybe NULL only for DLGCB_CREATED callback
			type, which is not a per dialog type.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>int type</em></span> - types of callbacks; more
			types may be register for the same callback function; only 
			DLGCB_CREATED must be register alone. Possible types:
			</p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist">
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_LOADED</em></span>
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_CREATED</em></span> - called when a new 
				dialog is created - it's a global type (not associated to 
				any dialog)
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_FAILED</em></span> - called when the dialog
				was negatively replied (non-2xx) - it's a per dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_CONFIRMED_NA</em></span> - called when the
				dialog is confirmed (2xx replied) but the setup-concluding ACK
				message from the caller is yet pending - it's a per dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_CONFIRMED</em></span> - called when the
				dialog is confirmed (2xx replied) and the setup-concluding ACK
				message from the caller has been seen - it's a per dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_REQ_WITHIN</em></span> - called when the 
				dialog matches a sequential request (excluding setup-concluding
				ACK messages which are handled in DLGCB_CONFIRMED) - it's a per
				dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_TERMINATED</em></span> - called when the 
				dialog is terminated via BYE - it's a per dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_TERMINATED_CONFIRMED</em></span> -
				called when response to a BYE request is received - it's a
				per dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_EXPIRED</em></span> - called when the 
				dialog expires without receiving a BYE - it's a per dialog 
				type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_EARLY</em></span> - called when the
				dialog is created in an early state (18x replied) - it's
				a per dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_RESPONSE_FWDED</em></span> - called when
				the dialog matches a reply to the initial INVITE request - it's
				a per dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_RESPONSE_WITHIN</em></span> - called when
				the dialog matches a reply to a subsequent in dialog request
				- it's a per dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_MI_CONTEXT</em></span> - called when the
				mi dlg_list_ctx command is invoked - it's a per dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_SPIRALED</em></span> - called when the
				dialog matches a spiraling request - it's a per dialog type.
				</p>
                      </li>
                      <li class="listitem">
                        <p><span class="emphasis"><em>DLGCB_DESTROY</em></span>
				</p>
                      </li>
                    </ul>
                  </div>
                  <p>
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>dialog_cb cb</em></span> - callback function to be 
			called. Prototype is: <span class="quote">“<span class="quote">void (dialog_cb) 
			(struct dlg_cell* dlg, int type, struct dlg_cb_params * params);
			</span>”</span>
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>void *param</em></span> - parameter to be passed to
			the callback function.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>param_free callback_param_free</em></span> - 
			callback function to be called to free the param.
			Prototype is: <span class="quote">“<span class="quote">void (param_free_cb) (void *param);</span>”</span>
			</p>
                </li>
              </ul>
            </div>
          </div>
          <div class="section" title="1.2.  terminate_dlg (dlg, hdrs)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp2992184"></a>1.2. 
		<code class="function">terminate_dlg (dlg, hdrs)</code>
		</h3>
                </div>
              </div>
            </div>
            <p>
		Terminate a Dialog
		</p>
            <p>Meaning of parameters is as follows:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p><span class="emphasis"><em>struct dlg_cell* dlg</em></span> - dialog to 
			terminate.
			</p>
                </li>
                <li class="listitem">
                  <p><span class="emphasis"><em>str* hdrs</em></span> - string containg extra headers (full format) 
			to be added to the BYE requests of the dialog.
			</p>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="chapter" title="Chapter 3. Frequently Asked Questions">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="idp2526488"></a>Chapter 3. Frequently Asked Questions</h2>
            </div>
          </div>
        </div>
        <div class="qandaset" title="Frequently Asked Questions">
          <a id="idp3620504"></a>
          <dl>
            <dt>3.1. <a href="#idp3087648">What happend with “use_tight_match” 
		parameter?</a></dt>
            <dt>3.2. <a href="#idp3195688">Where can I find more about Kamailio?</a></dt>
            <dt>3.3. <a href="#idp2490168">Where can I post a question about this module?</a></dt>
            <dt>3.4. <a href="#idp2999720">How can I report a bug?</a></dt>
          </dl>
          <table border="0" width="100%" summary="Q and A Set">
            <col align="left" width="1%" />
            <col />
            <tbody>
              <tr class="question" title="3.1.">
                <td align="left" valign="top">
                  <a id="idp3087648"></a>
                  <a id="idp3636056"></a>
                  <p>
                    <strong>3.1.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>What happend with <span class="quote">“<span class="quote">use_tight_match</span>”</span> 
		parameter?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			The parameter was removed with version 1.3 as the option of tight
			matching became mandatory and not configurable. Now, the tight
			matching is done all the time (when using DID matching).
		</p>
                </td>
              </tr>
              <tr class="question" title="3.2.">
                <td align="left" valign="top">
                  <a id="idp3195688"></a>
                  <a id="idp834208"></a>
                  <p>
                    <strong>3.2.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Where can I find more about Kamailio?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			Take a look at <a class="ulink" href="javascript:if(confirm('http://www.kamailio.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.kamailio.org/'" tppabs="http://www.kamailio.org/">http://www.kamailio.org/</a>.
		</p>
                </td>
              </tr>
              <tr class="question" title="3.3.">
                <td align="left" valign="top">
                  <a id="idp2490168"></a>
                  <a id="idp2702200"></a>
                  <p>
                    <strong>3.3.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Where can I post a question about this module?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			First at all check if your question was already answered on one of
			our mailing lists: 
		</p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist">
                      <li class="listitem">
                        <p>User Mailing List - <a class="ulink" href="javascript:if(confirm('http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users'" tppabs="http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users">http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users</a></p>
                      </li>
                      <li class="listitem">
                        <p>Developer Mailing List - <a class="ulink" href="javascript:if(confirm('http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev'" tppabs="http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev">http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev</a></p>
                      </li>
                    </ul>
                  </div>
                  <p>
			E-mails regarding any stable Kamailio release should be sent to 
			<code class="email">&lt;<a class="email" href="mailto:sr-users@lists.sip-router.org">sr-users@lists.sip-router.org</a>&gt;</code> and e-mails regarding development versions
			should be sent to <code class="email">&lt;<a class="email" href="mailto:sr-dev@lists.sip-router.org">sr-dev@lists.sip-router.org</a>&gt;</code>.
		</p>
                  <p>
			If you want to keep the mail private, send it to 
			<code class="email">&lt;<a class="email" href="mailto:sr-users@lists.sip-router.org">sr-users@lists.sip-router.org</a>&gt;</code>.
		</p>
                </td>
              </tr>
              <tr class="question" title="3.4.">
                <td align="left" valign="top">
                  <a id="idp2999720"></a>
                  <a id="idp3296632"></a>
                  <p>
                    <strong>3.4.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>How can I report a bug?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			Please follow the guidelines provided at:
			<a class="ulink" href="javascript:if(confirm('http://sip-router.org/tracker  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://sip-router.org/tracker'" tppabs="http://sip-router.org/tracker">http://sip-router.org/tracker</a>.
		</p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </body>
</html>
