<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>oracle Module</title>
    <link rel="stylesheet" type="text/css" href="../../../../css/sr-doc.css" tppabs="http://kamailio.org/css/sr-doc.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="#idm4298824" title="oracle Module" />
    <link rel="next" href="#idp3306544" title="Chapter 1. User's Guide" />
  </head>
  <body>
    <div class="book" title="oracle Module">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="idm4298824"></a>oracle Module</h1>
          </div>
          <div>
            <div class="authorgroup">
              <div class="author">
                <h3 class="author"><span class="firstname">Iouri</span> <span class="surname">Kharon</span></h3>
                <code class="email">&lt;<a class="email" href="mailto:yjh@styx.cabel.net">yjh@styx.cabel.net</a>&gt;</code>
              </div>
              <div class="author">
                <h3 class="author"><span class="firstname">Yury</span> <span class="surname">Skandarov</span></h3>
                <code class="email">&lt;<a class="email" href="mailto:kandman@trunkmobile.com">kandman@trunkmobile.com</a>&gt;</code>
              </div>
              <div class="author">
                <h3 class="author"><span class="firstname">Iakov</span> <span class="surname">Kharon</span></h3>
                <code class="email">&lt;<a class="email" href="mailto:jyh@trunkmobile.com">jyh@trunkmobile.com</a>&gt;</code>
              </div>
              <div class="editor">
                <h4 class="editedby">Edited by</h4>
                <h3 class="editor"><span class="firstname">Iouri</span> <span class="surname">Kharon</span></h3>
                <code class="email">&lt;<a class="email" href="mailto:yjh@styx.cabel.net">yjh@styx.cabel.net</a>&gt;</code>
              </div>
            </div>
          </div>
          <div>
            <p class="copyright">Copyright © 2007,2008 TRUNK MOBILE, INC.</p>
          </div>
        </div>
        <hr />
      </div>
      <div class="toc">
        <p>
          <strong>Table of Contents</strong>
        </p>
        <dl>
          <dt>
            <span class="chapter">
              <a href="#idp3306544">1. User's Guide</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#idp3035352">1. Overview</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#idp1909096">2. Dependencies</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp2269832">2.1. Kamailio Modules</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idm4275672">2.2. External Libraries or Applications</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp1309392">3. Parameters</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp2343256">3.1. <code class="varname">timeout</code> (fixedpoint)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp2546504">3.2. <code class="varname">reconnect</code> (fixedpoint)</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp284432">4. Functions</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#idp285160">5. Installation</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#idp290168">6. Utility openser_orasel</a>
                </span>
              </dt>
            </dl>
          </dd>
        </dl>
      </div>
      <div class="list-of-examples">
        <p>
          <strong>List of Examples</strong>
        </p>
        <dl>
          <dt>1.1. <a href="#idp2803328">Set <code class="varname">timeout</code> parameter</a></dt>
          <dt>1.2. <a href="#idp2555040">Disable asynchronous mode</a></dt>
          <dt>1.3. <a href="#idp283248">Set <code class="varname">reconnect</code> parameter</a></dt>
        </dl>
      </div>
      <div class="chapter" title="Chapter 1. User's Guide">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="idp3306544"></a>Chapter 1. User's Guide</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <p>
            <strong>Table of Contents</strong>
          </p>
          <dl>
            <dt>
              <span class="section">
                <a href="#idp3035352">1. Overview</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#idp1909096">2. Dependencies</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp2269832">2.1. Kamailio Modules</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idm4275672">2.2. External Libraries or Applications</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp1309392">3. Parameters</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp2343256">3.1. <code class="varname">timeout</code> (fixedpoint)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp2546504">3.2. <code class="varname">reconnect</code> (fixedpoint)</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp284432">4. Functions</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#idp285160">5. Installation</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#idp290168">6. Utility openser_orasel</a>
              </span>
            </dt>
          </dl>
        </div>
        <div class="section" title="1. Overview">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp3035352"></a>1. Overview</h2>
              </div>
            </div>
          </div>
          <p>
		This is a module which provides Oracle connectivity for Kamailio.
		It implements the DB API defined in Kamailio. If you want to use
		the nathelper module, or any other modules that calls the
		get_all_ucontacts API export from usrloc, then you need to set
		the <span class="emphasis"><em>DORACLE_USRLOC</em></span> define in the Makefile.defs
		file before compilation.
	</p>
        </div>
        <div class="section" title="2. Dependencies">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp1909096"></a>2. Dependencies</h2>
              </div>
            </div>
          </div>
          <div class="section" title="2.1. Kamailio Modules">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp2269832"></a>2.1. Kamailio Modules</h3>
                </div>
              </div>
            </div>
            <p>
		The following modules must be loaded before this module:
			</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>No dependencies on other Kamailio modules</em></span>.
			</p>
                </li>
              </ul>
            </div>
            <p>
		</p>
          </div>
          <div class="section" title="2.2. External Libraries or Applications">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idm4275672"></a>2.2. External Libraries or Applications</h3>
                </div>
              </div>
            </div>
            <p>
		The following libraries or applications must be installed before running
		Kamailio with this module loaded:
			</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
				<span class="emphasis"><em>instantclient-sdk-10.2.0.3</em></span> - the development headers and libraries of OCI.
			</p>
                </li>
              </ul>
            </div>
            <p>
		</p>
          </div>
        </div>
        <div class="section" title="3. Parameters">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp1309392"></a>3. Parameters</h2>
              </div>
            </div>
          </div>
          <div class="section" title="3.1. timeout (fixedpoint)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp2343256"></a>3.1. <code class="varname">timeout</code> (fixedpoint)</h3>
                </div>
              </div>
            </div>
            <p>
		Timeout value for any operation with BD.
		</p>
            <p>
		Possible values is from 0.1 to 10.0 seconds.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is 3.0 (3 second).
		</em></span>
		</p>
            <p>
		If value of timeout parameter set to 0, module use synchronous
		mode (without timeout).
		</p>
            <div class="example">
              <a id="idp2803328"></a>
              <p class="title">
                <strong>Example 1.1. Set <code class="varname">timeout</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("db_oracle", "timeout", 1.5)
...</pre>
              </div>
            </div>
            <br class="example-break" />
            <div class="example">
              <a id="idp2555040"></a>
              <p class="title">
                <strong>Example 1.2. Disable asynchronous mode</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("db_oracle", "timeout", 0)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="3.2. reconnect (fixedpoint)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp2546504"></a>3.2. <code class="varname">reconnect</code> (fixedpoint)</h3>
                </div>
              </div>
            </div>
            <p>
		Timeout value for connect (create session) operation.
		</p>
            <p>
		Possible values is from 0.1 to 10.0 seconds.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is 0.2 (200 milliseconds).
		</em></span>
		</p>
            <div class="example">
              <a id="idp283248"></a>
              <p class="title">
                <strong>Example 1.3. Set <code class="varname">reconnect</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("db_oracle", "reconnect", 0.5)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
        </div>
        <div class="section" title="4. Functions">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp284432"></a>4. Functions</h2>
              </div>
            </div>
          </div>
          <p>
		No function exported to be used from configuration file.
		</p>
        </div>
        <div class="section" title="5. Installation">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp285160"></a>5. Installation</h2>
              </div>
            </div>
          </div>
          <p>
		Because it dependes on an external library, the oracle module is not
		compiled and installed by default. You can use one of the next options.
		</p>
          <div class="itemizedlist">
            <ul class="itemizedlist">
              <li class="listitem">
                <p>
			- edit the "Makefile" and remove "db_oracle" from "excluded_modules"
			list. Then follow the standard procedure to install Kamailio:
			"make all; make install".
			</p>
              </li>
              <li class="listitem">
                <p>
			- from command line use: 'make all include_modules="db_oracle";
			make install include_modules="db_oracle"'.
			</p>
              </li>
            </ul>
          </div>
        </div>
        <div class="section" title="6. Utility openser_orasel">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp290168"></a>6. Utility openser_orasel</h2>
              </div>
            </div>
          </div>
          <p>
		For working with kamctl script, should be able to print the 'query' 
		results to the terminal in a user-readable form. The standard command-line 
		Oracle client (sqlplus) is not quite suitable for this, as it cannot align 
		row width to real (received) data's (it always prints a cell width as 
		described in the db scheme). This problem has been solved by inclusion the 
		utility openser_orasel, which formats printing approximately in the same 
		way as the 'mysql' client utility. In addition, this utility known about 
		the "agreements and types" in DB that are used in Kamailio for the work 
		with Oracle and formats printing taking these into account.
		</p>
        </div>
      </div>
    </div>
  </body>
</html>
