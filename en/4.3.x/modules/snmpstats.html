<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>SNMPStats Module (Simple Network Management Protocal Statistic Module)</title>
    <link rel="stylesheet" type="text/css" href="../../../../css/sr-doc.css" tppabs="http://kamailio.org/css/sr-doc.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="#idp15476464" title="SNMPStats Module (Simple Network Management Protocal Statistic Module)" />
    <link rel="next" href="#idp18463280" title="Chapter 1. Admin Guide" />
  </head>
  <body>
    <div class="book" title="SNMPStats Module (Simple Network Management Protocal Statistic Module)">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="idp15476464"></a>SNMPStats Module (Simple Network Management Protocal Statistic Module)</h1>
          </div>
          <div>
            <div class="authorgroup">
              <div class="author">
                <h3 class="author"><span class="firstname">Jeffrey</span> <span class="surname">Magder</span></h3>
                <div class="affiliation">
                  <span class="orgname">SOMA Networks, Inc.<br /></span>
                </div>
              </div>
              <div class="editor">
                <h4 class="editedby">Edited by</h4>
                <h3 class="editor"><span class="firstname">Jeffrey</span> <span class="surname">Magder</span></h3>
              </div>
              <div class="editor">
                <h4 class="editedby">Edited by</h4>
                <h3 class="editor"><span class="firstname">Olle E.</span> <span class="surname">Johansson</span></h3>
              </div>
            </div>
          </div>
          <div>
            <p class="copyright">Copyright © 2006 SOMA Networks, Inc.</p>
          </div>
          <div>
            <p class="copyright">Copyright © 2013 Edvina AB, Sollentuna, Sweden</p>
          </div>
        </div>
        <hr />
      </div>
      <div class="toc">
        <p>
          <strong>Table of Contents</strong>
        </p>
        <dl>
          <dt>
            <span class="chapter">
              <a href="#idp18463280">1. Admin Guide</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="#idp18771064">1. Overview</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp17421952">1.1. General Scalar Statistics</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp18106744">1.2. SNMP Tables</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp18019648">1.3. Alarm Monitoring</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp15444992">2. How it works</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp15445344">2.1. How the SNMPStats module gets its data</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15448008">2.2. How data is moved from the SNMPStats module to a NOC</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp15450632">3. Dependencies</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp15450984">3.1. Kamailio Modules</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15454352">3.2. External Libraries or Applications</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp17209072">4. Parameters</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#snmpstats.p.sipentitytape">4.1. <code class="varname">sipEntityType</code> (String) </a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#snmpstats.p.MsqQueueMinorTreshold">4.2. <code class="varname">MsgQueueMinorThreshold</code> (Integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#snmpstats.p.MsqQueueMajorTreshold">4.3. <code class="varname">MsgQueueMajorThreshold</code> (Integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#snmpstats.p.dlg_minor_treshold">4.4. <code class="varname">dlg_minor_threshold</code> (Integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#snmpstats.p.dlg_major_treshold">4.5. <code class="varname">dlg_major_threshold</code> (Integer)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#snmpstats.p.snmpgetPath">4.6. <code class="varname">snmpgetPath</code> (String)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#snmpstats.p.snmpCommunity">4.7. <code class="varname">snmpCommunity</code> (String)</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#snmpstats.p.export_registrar">4.8. <code class="varname">export_registrar</code> (int)</a>
                    </span>
                  </dt>
                </dl>
              </dd>
              <dt>
                <span class="section">
                  <a href="#idp15590664">5. Functions</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="#idp15591376">6. Installation and Running</a>
                </span>
              </dt>
              <dd>
                <dl>
                  <dt>
                    <span class="section">
                      <a href="#idp15592048">6.1. 
	Compiling the SNMPStats Module
	</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15594568">6.2. 
	Configuring NetSNMP to allow connections from the SNMPStats module.
	</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15598416">6.3. 
	Configuring the SNMPStats module for communication with a Master Agent
	</a>
                    </span>
                  </dt>
                  <dt>
                    <span class="section">
                      <a href="#idp15600688">6.4. 
	Testing for a proper Configuration
	</a>
                    </span>
                  </dt>
                </dl>
              </dd>
            </dl>
          </dd>
          <dt>
            <span class="chapter">
              <a href="#idp17744000">2. Frequently Asked Questions</a>
            </span>
          </dt>
        </dl>
      </div>
      <div class="list-of-examples">
        <p>
          <strong>List of Examples</strong>
        </p>
        <dl>
          <dt>1.1. <a href="#idp17991872">Setting the <code class="varname">sipEntityType</code> parameter</a></dt>
          <dt>1.2. <a href="#idp15538624">Setting the <code class="varname">MsgQueueMinorThreshold</code> parameter</a></dt>
          <dt>1.3. <a href="#idp15541368">Setting the <code class="varname">MsgQueueMajorThreshold</code> parameter</a></dt>
          <dt>1.4. <a href="#idp15544088">Setting the <code class="varname">dlg_minor_threshold</code> parameter</a></dt>
          <dt>1.5. <a href="#idp15546832">Setting the <code class="varname">dlg_major_threshold</code> parameter</a></dt>
          <dt>1.6. <a href="#idp15583456">Setting the <code class="varname">snmpgetPath</code> parameter</a></dt>
          <dt>1.7. <a href="#idp15586432">Setting the <code class="varname">snmpCommunity</code> parameter</a></dt>
          <dt>1.8. <a href="#idp15589400">Setting the <code class="varname">export_registrar</code> parameter</a></dt>
        </dl>
      </div>
      <div class="chapter" title="Chapter 1. Admin Guide">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="idp18463280"></a>Chapter 1. Admin Guide</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <p>
            <strong>Table of Contents</strong>
          </p>
          <dl>
            <dt>
              <span class="section">
                <a href="#idp18771064">1. Overview</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp17421952">1.1. General Scalar Statistics</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp18106744">1.2. SNMP Tables</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp18019648">1.3. Alarm Monitoring</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp15444992">2. How it works</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp15445344">2.1. How the SNMPStats module gets its data</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15448008">2.2. How data is moved from the SNMPStats module to a NOC</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp15450632">3. Dependencies</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp15450984">3.1. Kamailio Modules</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15454352">3.2. External Libraries or Applications</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp17209072">4. Parameters</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#snmpstats.p.sipentitytape">4.1. <code class="varname">sipEntityType</code> (String) </a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#snmpstats.p.MsqQueueMinorTreshold">4.2. <code class="varname">MsgQueueMinorThreshold</code> (Integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#snmpstats.p.MsqQueueMajorTreshold">4.3. <code class="varname">MsgQueueMajorThreshold</code> (Integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#snmpstats.p.dlg_minor_treshold">4.4. <code class="varname">dlg_minor_threshold</code> (Integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#snmpstats.p.dlg_major_treshold">4.5. <code class="varname">dlg_major_threshold</code> (Integer)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#snmpstats.p.snmpgetPath">4.6. <code class="varname">snmpgetPath</code> (String)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#snmpstats.p.snmpCommunity">4.7. <code class="varname">snmpCommunity</code> (String)</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#snmpstats.p.export_registrar">4.8. <code class="varname">export_registrar</code> (int)</a>
                  </span>
                </dt>
              </dl>
            </dd>
            <dt>
              <span class="section">
                <a href="#idp15590664">5. Functions</a>
              </span>
            </dt>
            <dt>
              <span class="section">
                <a href="#idp15591376">6. Installation and Running</a>
              </span>
            </dt>
            <dd>
              <dl>
                <dt>
                  <span class="section">
                    <a href="#idp15592048">6.1. 
	Compiling the SNMPStats Module
	</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15594568">6.2. 
	Configuring NetSNMP to allow connections from the SNMPStats module.
	</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15598416">6.3. 
	Configuring the SNMPStats module for communication with a Master Agent
	</a>
                  </span>
                </dt>
                <dt>
                  <span class="section">
                    <a href="#idp15600688">6.4. 
	Testing for a proper Configuration
	</a>
                  </span>
                </dt>
              </dl>
            </dd>
          </dl>
        </div>
        <div class="section" title="1. Overview">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp18771064"></a>1. Overview</h2>
              </div>
            </div>
          </div>
          <p>The SNMPStats module provides an SNMP management interface
		to Kamailio.  Specifically, it provides general SNMP queryable 
		scalar statistics, table representations of more complicated data such as 
		user and contact information, and alarm monitoring capabilities.
		</p>
          <p>
		The MIB has been renamed in version 4.0.0 to reflect the product name. Please
		note that all the OID names has changed, as well as the MIB itself.
		</p>
          <div class="section" title="1.1. General Scalar Statistics">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp17421952"></a>1.1. General Scalar Statistics</h3>
                </div>
              </div>
            </div>
            <p>
			The SNMPStats module provides a number of general scalar statistics.  
			Details are available in KAMAILIO-MIB, KAMAILIO-REG-MIB, 
			KAMAILIO-SIP-COMMON-MIB, and KAMAILIO-SIP-SERVER-MIB.  But briefly, 
			these scalars are:
			</p>
            <p>
			kamailioSIPProtocolVersion, kamailioSIPServiceStartTime, kamailioSIPEntityType,
			kamailioSIPSummaryInRequests, kamailioSIPSummaryOutRequest, 
			kamailioSIPSummaryInResponses, kamailioSIPSummaryOutResponses,
			kamailioSIPSummaryTotalTransactions, kamailioSIPCurrentTransactions, 
			kamailioSIPNumUnsupportedUris, kamailioSIPNumUnsupportedMethods, 
			kamailioSIPOtherwiseDiscardedMsgs, kamailioSIPProxyStatefulness
			kamailioSIPProxyRecordRoute, kamailioSIPProxyAuthMethod, 
			kamailioSIPNumProxyRequireFailures, kamailioSIPRegMaxContactExpiryDuration,
			kamailioSIPRegMaxUsers, kamailioSIPRegCurrentUsers, 
			kamailioSIPRegDfltRegActiveInterval, kamailioSIPRegAcceptedRegistrations,
			kamailioSIPRegRejectedRegistrations, kamailioMsgQueueDepth.
			kamailioCurNumDialogs, kamailioCurNumDialogsInProgress, 
			kamailioCurNumDialogsInSetup, kamailioTotalNumFailedDialogSetups
			</p>
            <p>
			There are also scalars associated with alarms.  They are as follows:
			</p>
            <p>
			kamailioMsgQueueMinorThreshold, kamailioMsgQueueMajorThreshold,
			kamailioMsgQueueDepthAlarmStatus, kamailioMsgQueueDepthMinorAlarm,
			kamailioMsgQueueDepthMajorAlarm, kamailioDialogLimitMinorThreshold,
			kamailioDialogLimitMajorThreshold, kamailioDialogUsageState,
			kamailioDialogLimitAlarmStatus, kamailioDialogLimitMinorAlarm,
			kamailioDialogLimitMajorAlarm
			</p>
            <p>
			In Kamailio 4.1 a set of new OIDs was added to reflect the
			Kamailio configuration, the version, core status (memory, connections),
			transports and module data.
			</p>
          </div>
          <div class="section" title="1.2. SNMP Tables">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp18106744"></a>1.2. SNMP Tables</h3>
                </div>
              </div>
            </div>
            <p>
			The SNMPStats module provides several tables, containing more complicated
			data.  The current available tables are:
			</p>
            <p>
			kamailioSIPPortTable, kamailioSIPMethodSupportedTable, 
			kamailioSIPStatusCodesTable, kamailioSIPRegUserTable, kamailioSIPContactTable,
			kamailioSIPRegUserLookupTable
			</p>
          </div>
          <div class="section" title="1.3. Alarm Monitoring">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp18019648"></a>1.3. Alarm Monitoring</h3>
                </div>
              </div>
            </div>
            <p>
			If enabled, the SNMPStats module will monitor for alarm conditions. 
			Currently, there are two alarm types defined.  
			</p>
            <div class="orderedlist">
              <ol class="orderedlist" type="1">
                <li class="listitem">
                  <p>
				The number of active dialogs has passed a minor or major threshold.
				The idea is that a network operation centre can be made aware that 
				their SIP servers may be overloaded, without having to explicitly
				check for this condition.
				</p>
                  <p>
				If a minor or major condition has occured, then a 
				kamailioDialogLimitMinorEvent trap or a 
				kamailioDialogLimitMajorEvent trap will be generated, 
				respectively. The minor and major thresholds are
				described in the parameters section below.
				</p>
                </li>
                <li class="listitem">
                  <p>
				The number of bytes waiting to be consumed across all of Kamailios
				listening ports has passed a minor or major threshold.  The idea is
				that a network operation centre can be made aware that a machine 
				hosting a SIP server may be entering a degraded state, and to 
				investigate why this is so. 
				</p>
                  <p>
				If the number of bytes to be consumed passes a minor or major 
				threshold, then a kamailioMsgQueueDepthMinorEvent or 
				kamailioMsgQueueDepthMajorEvent trap will be sent out, respectively.
				</p>
                </li>
              </ol>
            </div>
            <p>
			Full details of these traps can be found in the distributions KAMAILIO-MIB
			file.  
			</p>
          </div>
        </div>
        <div class="section" title="2. How it works">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp15444992"></a>2. How it works</h2>
              </div>
            </div>
          </div>
          <div class="section" title="2.1. How the SNMPStats module gets its data">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15445344"></a>2.1. How the SNMPStats module gets its data</h3>
                </div>
              </div>
            </div>
            <p>
	The SNMPStats module uses Kamailios internal statistic framework to collect most of its
	data. However, there are two exceptions.  
	</p>
            <div class="orderedlist">
              <ol class="orderedlist" type="1">
                <li class="listitem">
                  <p>
			The kamailioSIPRegUserTable and kamailioSIPContactTable rely on the usrloc 
			modules	callback system.  Specifically, the SNMPStats module will receive 
			callbacks whenever a user/contact is added to the system.
			</p>
                </li>
                <li class="listitem">
                  <p>
			The SNMPStats modules kamailioSIPMsgQueueDepthMinorEvent and 
			kamailioSIPMsgQueueDepthMajorEvent alarms rely on the Kamailio core to find out
			what interfaces, ports, and transports Kamailio is listening on.  However,
			the module will actually query the proc file system to find out the number
			of bytes waiting to be consumed.  (Currently, this will only work on systems
			providing the proc file system).
			</p>
                </li>
              </ol>
            </div>
            <p> 
	</p>
          </div>
          <div class="section" title="2.2. How data is moved from the SNMPStats module to a NOC">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15448008"></a>2.2. How data is moved from the SNMPStats module to a NOC</h3>
                </div>
              </div>
            </div>
            <p>
	We have now explained how the SNMPStats module gathers its data. We still have not
	explained how it exports this data to a NOC (Network Operations Centre), or
	administrator.
	</p>
            <p>
	The SNMPStats module expects to connect to a <span class="emphasis"><em>Master Agent</em></span>.  This
	would be a NetSNMP daemon running either on the same system as the Kamailio instance, or 
	on another system.  (Communication can take place over TCP, so there is no restriction
	that this daemon need be on the same system as Kamailio).
	</p>
            <p>
	If the master agent is unavailable when Kamailio first starts up, the SNMPStats module will
	continue to run.  However, you will not be able to query it.  Thankfully, the SNMPStats
	module continually looks for its master agent.  So even if the master agent is started late, 
	or if the link to the SNMPStats module is severed due to a temporary hardware failure
	or crashed and restarted master agent, the link will eventually be re-established.  No
	data should be lost, and querying can begin again. 
	</p>
            <p>
	To request for this data, you will need to query the master agent.  The master agent will
	then redirect the request to the SNMPStats module, which will respond to the master agent, 
	which will in turn respond to your request.  
	</p>
          </div>
        </div>
        <div class="section" title="3. Dependencies">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp15450632"></a>3. Dependencies</h2>
              </div>
            </div>
          </div>
          <div class="section" title="3.1. Kamailio Modules">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15450984"></a>3.1. Kamailio Modules</h3>
                </div>
              </div>
            </div>
            <p>
		The SNMPStats module provides a plethora of statistics, some of which are collected
		by other modules.  If the dependent modules are not loaded then those specific 
		statistics will still be returned, but with zeroed values.  All other statistics will
		continue to function normally.  This means that the SNMPStats module has no  
		<span class="emphasis"><em>hard/mandatory</em></span> dependencies on other modules.  There are however,
		<span class="emphasis"><em>soft</em></span> dependencies, as follows:
		</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
		<span class="emphasis"><em>usrloc</em></span> - all scalars and tables relating to users and contacts are
		dependent on the usrloc module.  If the module is not loaded, the respective tables
		will be empty. 
		</p>
                </li>
                <li class="listitem">
                  <p>
		<span class="emphasis"><em>dialog or dialog-ng</em></span> - all scalars relating to the number of dialogs are 
		dependent on the presence of a dialog module.  Furthermore, if the module is 
		not loaded, then the kamailioDialogLimitMinorEvent, and kamailioDialogLimitMajorEvent
		alarm will be disabled. 
		</p>
                </li>
              </ul>
            </div>
            <p>
		The contents of the kamailioSIPMethodSupportedTable change depending on which modules
		are loaded.  
		</p>
          </div>
          <div class="section" title="3.2. External Libraries or Applications">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15454352"></a>3.2. External Libraries or Applications</h3>
                </div>
              </div>
            </div>
            <p>
	The following libraries or applications must be installed before running
	Kamailio with this module loaded:
		</p>
            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">
                  <p>
			<span class="emphasis"><em>NetSNMP v5.3 or greater</em></span> - NetSNMP must be around 
			at the time of compilation.  Furthermore, there are several shared objects
			that must be loadable at the time SNMPStats is loaded.  This means that
			NetSNMP must be installed (but not necessarily running) on the system that
			has loaded the SNMPStats module.  (Details can be found in the compilation 
			section	below).
		</p>
                </li>
                <li class="listitem">
                  <p>
			<span class="emphasis"><em>lm_sensors-dev</em></span> - on some OS-es, this lib is
			required for compilation (http://www.lm-sensors.org/).
		</p>
                </li>
              </ul>
            </div>
            <p>
	</p>
          </div>
        </div>
        <div class="section" title="4. Parameters">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp17209072"></a>4. Parameters</h2>
              </div>
            </div>
          </div>
          <div class="section" title="4.1. sipEntityType (String)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="snmpstats.p.sipentitytape"></a>4.1. <code class="varname">sipEntityType</code> (String) </h3>
                </div>
              </div>
            </div>
            <p>
		This parameter describes the entity type for this Kamailio instance,
		and will be used in determining what is returned for the
		kamailioSIPEntityType scalar. Valid parameters are:
		</p>
            <p>
		<span class="emphasis"><em>
		registrarServer, redirectServer, proxyServer, userAgent, edgeproxyServer, sipcaptureServer,other
		</em></span>
		</p>
            <div class="example">
              <a id="idp17991872"></a>
              <p class="title">
                <strong>Example 1.1. Setting the <code class="varname">sipEntityType</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("snmpstats", "sipEntityType", "registrarServer")
modparam("snmpstats", "sipEntityType", "proxyServer")
...</pre>
              </div>
            </div>
            <br class="example-break" />
            <p>
		Note that as the above example shows, you can define this parameter more
		than once.  This is of course because a given Kamailio instance can take on
		more than one role. The edgeproxyServer is an edge server using the outbound
		module and path extensions. The sipcaptureServer is a Homer Sip Capture
		server that collect SIP messages.
		</p>
          </div>
          <div class="section" title="4.2. MsgQueueMinorThreshold (Integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="snmpstats.p.MsqQueueMinorTreshold"></a>4.2. <code class="varname">MsgQueueMinorThreshold</code> (Integer)</h3>
                </div>
              </div>
            </div>
            <p>
		The SNMPStats module monitors the number of bytes waiting to be consumed by 
		Kamailio.  If the number of bytes waiting to be consumed exceeds a minor
		threshold, the SNMPStats module will send out an kamailioMsgQueueDepthMinorEvent
		trap to signal that an alarm condition has occured.  The minor threshold is set
		with the MsgQueueMinorThreshold parameter.  
		</p>
            <div class="example">
              <a id="idp15538624"></a>
              <p class="title">
                <strong>Example 1.2. Setting the <code class="varname">MsgQueueMinorThreshold</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("snmpstats", "MsgQueueMinorThreshold", 2000)
...</pre>
              </div>
            </div>
            <br class="example-break" />
            <p>
		If this parameter is not set, then there will be no minor alarm monitoring.
		</p>
          </div>
          <div class="section" title="4.3. MsgQueueMajorThreshold (Integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="snmpstats.p.MsqQueueMajorTreshold"></a>4.3. <code class="varname">MsgQueueMajorThreshold</code> (Integer)</h3>
                </div>
              </div>
            </div>
            <p>
		The SNMPStats module monitors the number of bytes waiting to be consumed by 
		Kamailio.  If the number of bytes waiting to be consumed exceeds a major
		threshold, the SNMPStats module will send out an kamailioMsgQueueDepthMajorEvent
		trap to signal that an alarm condition has occured.  The major threshold is set
		with the MsgQueueMajorThreshold parameter.  
		</p>
            <div class="example">
              <a id="idp15541368"></a>
              <p class="title">
                <strong>Example 1.3. Setting the <code class="varname">MsgQueueMajorThreshold</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("snmpstats", "MsgQueueMajorThreshold", 5000)
...</pre>
              </div>
            </div>
            <br class="example-break" />
            <p>
		If this parameter is not set, then there will be no major alarm monitoring.
		</p>
          </div>
          <div class="section" title="4.4. dlg_minor_threshold (Integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="snmpstats.p.dlg_minor_treshold"></a>4.4. <code class="varname">dlg_minor_threshold</code> (Integer)</h3>
                </div>
              </div>
            </div>
            <p>
		The SNMPStats module monitors the number of active dialogs.  If the number of
		active dialogs exceeds a minor threshold, the SNMPStats module will send out 
		an kamailioDialogLimitMinorEvent trap to signal that an alarm condition has 
		occured.  The minor threshold is set with the dlg_minor_threshold parameter.  
		</p>
            <div class="example">
              <a id="idp15544088"></a>
              <p class="title">
                <strong>Example 1.4. Setting the <code class="varname">dlg_minor_threshold</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
  modparam("snmpstats", "dlg_minor_threshold", 500)
...</pre>
              </div>
            </div>
            <br class="example-break" />
            <p>
		If this parameter is not set, then there will be no minor alarm monitoring.
		</p>
          </div>
          <div class="section" title="4.5. dlg_major_threshold (Integer)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="snmpstats.p.dlg_major_treshold"></a>4.5. <code class="varname">dlg_major_threshold</code> (Integer)</h3>
                </div>
              </div>
            </div>
            <p>
		The SNMPStats module monitors the number of active dialogs.  If the number of
		active dialogs exceeds a major threshold, the SNMPStats module will send out 
		an kamailioDialogLimitMajorEvent trap to signal that an alarm condition has 
		occured.  The major threshold is set with the dlg_major_threshold parameter.  
		</p>
            <div class="example">
              <a id="idp15546832"></a>
              <p class="title">
                <strong>Example 1.5. Setting the <code class="varname">dlg_major_threshold</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
  modparam("snmpstats", "dlg_major_threshold", 750)
...</pre>
              </div>
            </div>
            <br class="example-break" />
            <p>
		If this parameter is not set, then there will be no major alarm monitoring.
		</p>
          </div>
          <div class="section" title="4.6. snmpgetPath (String)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="snmpstats.p.snmpgetPath"></a>4.6. <code class="varname">snmpgetPath</code> (String)</h3>
                </div>
              </div>
            </div>
            <p>
		The SNMPStats module provides the kamailioSIPServiceStartTime scalar.
		This scalar requires the SNMPStats module to perform a snmpget query
		to the master agent.  You can use this parameter to set the path to 
		your instance of NetSNMP's snmpget program.  
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">/usr/local/bin/</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp15583456"></a>
              <p class="title">
                <strong>Example 1.6. Setting the <code class="varname">snmpgetPath</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("snmpstats", "snmpgetPath",     "/my/custom/path/")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="4.7. snmpCommunity (String)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="snmpstats.p.snmpCommunity"></a>4.7. <code class="varname">snmpCommunity</code> (String)</h3>
                </div>
              </div>
            </div>
            <p>
		The SNMPStats module provides the kamailioSIPServiceStartTime scalar.
		This scalar requires the SNMPStats module to perform a snmpget query
		to the master agent.  If you have defined a custom community string
		for the snmp daemon, you need to specify it with this parameter.  
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">public</span>”</span>.
		</em></span>
		</p>
            <div class="example">
              <a id="idp15586432"></a>
              <p class="title">
                <strong>Example 1.7. Setting the <code class="varname">snmpCommunity</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("snmpstats", "snmpCommunity", "customCommunityString")
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
          <div class="section" title="4.8. export_registrar (int)">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="snmpstats.p.export_registrar"></a>4.8. <code class="varname">export_registrar</code> (int)</h3>
                </div>
              </div>
            </div>
            <p>
		The SNMPStats module will export registrar (usrloc) records if
		this parameter is set to 1. This will result in more memory usage
		and bigger exporter structure.
		</p>
            <p>
		<span class="emphasis"><em>
			Default value is <span class="quote">“<span class="quote">0</span>”</span> (don't export).
		</em></span>
		</p>
            <div class="example">
              <a id="idp15589400"></a>
              <p class="title">
                <strong>Example 1.8. Setting the <code class="varname">export_registrar</code> parameter</strong>
              </p>
              <div class="example-contents">
                <pre class="programlisting">...
modparam("snmpstats", "export_registrar", 1)
...</pre>
              </div>
            </div>
            <br class="example-break" />
          </div>
        </div>
        <div class="section" title="5. Functions">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp15590664"></a>5. Functions</h2>
              </div>
            </div>
          </div>
          <p>
		Currently, there are no exported functions.
		</p>
        </div>
        <div class="section" title="6. Installation and Running">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title"><a id="idp15591376"></a>6. Installation and Running</h2>
              </div>
            </div>
          </div>
          <p>
	There are several things that need to be done to get the SNMPStats module
	compiled and up and running.
	</p>
          <div class="section" title="6.1.  Compiling the SNMPStats Module">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15592048"></a>6.1. 
	Compiling the SNMPStats Module
	</h3>
                </div>
              </div>
            </div>
            <p>
	In order for the SNMPStats module to compile, you will need at least version
	5.3 of the NetSNMP source code.  The source can be found at:

	</p>
            <pre class="programlisting">    http://net-snmp.sourceforge.net/</pre>
            <p>

	For the specifics of installing NetSNMP, please see the INSTALL document in the
	root of the NetSNMP source package.  
	</p>
            <p>
	The SNMPStats modules makefile requires that the NetSNMP script
	"net-snmp-config" can run.  At a minimum, running "net-snmp-config --agent-libs"
	from the Kamailio source directory should return something similar to: 

	</p>
            <pre class="programlisting">    -L/usr/local/lib -lnetsnmpmibs -lnetsnmpagent -lnetsnmphelpers -lnetsnmp</pre>
            <p>

	The specifics of what is returned depends on how the system was configured. If
	your NetSNMP installation was installed from an RPM (or another packaged
	version), then there is a good chance that net-snmp-config will return
	something unecessarily longer.  It is highly recommended you install NetSNMP
	from source to avoid bringing in excessive dependencies to the SNMPStats
	module.
	</p>
          </div>
          <div class="section" title="6.2.  Configuring NetSNMP to allow connections from the SNMPStats module.">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15594568"></a>6.2. 
	Configuring NetSNMP to allow connections from the SNMPStats module.
	</h3>
                </div>
              </div>
            </div>
            <p>
	The SNMPStats module will communicate with the NetSNMP Master Agent.  This 
	communication happens over a protocol known as AgentX. This means that NetSNMP
	must have been compiled with AgentX support.  This will always be the case when
	you are compiling from source unless you explicitly removed AgentX support with
	./configure.  
	</p>
            <p>
	After AgentX support has been compiled into NetSNMP, its configuration file needs
	to be changed to turn on AgentX support.  The exact location of the configuration 
	file (snmpd.conf) may vary depending on your system.  On my system, it is located in:
 
	</p>
            <pre class="programlisting">    /usr/local/share/snmp/snmpd.conf.</pre>
            <p>

	At the very end of the file add the following line:

	</p>
            <pre class="programlisting">    master agentx</pre>
            <p>

	The line tells NetSNMP to act as an AgentX master agent, so that it can accept
	connections from sub-agents such as the SNMPStats module.  
	</p>
            <p>
	There is still one last step.  Even though we have compiled and configured NetSNMP
	to have AgentX support, we still need to tell the daemon which interface and 
	port to listen to for AgentX connections. This is done when the daemon is started
	as follows:

	</p>
            <pre class="programlisting">    snmpd -x mySystemName:PortNumber</pre>
            <p>

	On my system, I start the NetSNMP daemon with:

	</p>
            <pre class="programlisting">    snmpd -x localhost:705</pre>
            <p>

	This tells NetSNMP to act as a master agent, listening on the localhost UDP
	interface at port 705.  
	</p>
          </div>
          <div class="section" title="6.3.  Configuring the SNMPStats module for communication with a Master Agent">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15598416"></a>6.3. 
	Configuring the SNMPStats module for communication with a Master Agent
	</h3>
                </div>
              </div>
            </div>
            <p>
	The previous section explained how to set up a NetSNMP master agent to accept
	AgentX connections.  We now need to tell the SNMPStats module how to communicate
	with this master agent.  This is done by giving the SNMPStats module its own
	NetSNMP configuration file.  The file must be named snmpstats.conf, and must be
	in the same folder as the snmpd.conf file that was configured above. On my 
	system this would be:

	</p>
            <pre class="programlisting">    /usr/local/share/snmp/snmpstats.conf</pre>
            <p>

	The default configuration file included with the distribution can be used, and
	contains the following:

	</p>
            <pre class="programlisting">    agentXSocket tcp:localhost:705</pre>
            <p>

	The above line tells the SNMPStats module to register with the master agent on
	the localhost, port 705.  The parameters should match up with the snmpd process.
	Note that the master agent (snmpd) does not need to be present on the same
	machine as Kamailio.  localhost could be replaced with any other machine. 
	</p>
          </div>
          <div class="section" title="6.4.  Testing for a proper Configuration">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="idp15600688"></a>6.4. 
	Testing for a proper Configuration
	</h3>
                </div>
              </div>
            </div>
            <p>
	As a quick test to make sure that the SNMPStats module sub-agent can succesfully
	connect to the NetSNMP Master agent, start snmpd with the following:

	</p>
            <pre class="programlisting">    snmpd -f -Dagentx -x tcp:localhost:705 2&gt;&amp;1 | less</pre>
            <p>

	You should see something similar to the following:

	</p>
            <pre class="programlisting">    No log handling enabled - turning on stderr logging
    registered debug token agentx, 1
    ...
    Turning on AgentX master support.
    agentx/master: initializing...
    agentx/master: initializing...   DONE
    NET-SNMP version 5.3.1</pre>
            <p>

	Now, start up Kamailio in another window.  In the snmpd window, you should see a
	bunch of:

	</p>
            <pre class="programlisting">    agentx/master: handle pdu (req=0x2c58ebd4,trans=0x0,sess=0x0)
    agentx/master: open 0x81137c0
    agentx/master: opened 0x814bbe0 = 6 with flags = a0
    agentx/master: send response, stat 0 (req=0x2c58ebd4,trans=0x0,sess=0x0)
    agentx_build: packet built okay</pre>
            <p>

	The messages beginning with "agentx" are debug messages stating that something is happening
	with an AgentX sub-agent, appearing because of the -Dagentx snmpd switch.  The large number
	of debug messages appear at startup as the SNMPStats module registers all of its scalars
	and tables with the Master Agent.  If you receive these messages, then SNMPStats module
	and NetSNMP daemon have both been configured correctly.
	</p>
          </div>
        </div>
      </div>
      <div class="chapter" title="Chapter 2. Frequently Asked Questions">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="idp17744000"></a>Chapter 2. Frequently Asked Questions</h2>
            </div>
          </div>
        </div>
        <div class="qandaset" title="Frequently Asked Questions">
          <a id="idp17115784"></a>
          <dl>
            <dt>2.1. <a href="#idp17069760">Where can I find more about SNMP?</a></dt>
            <dt>2.2. <a href="#idp18615712">Where can I find more about NetSNMP?</a></dt>
            <dt>2.3. <a href="#idp16831552">Where can I find out more about AgentX?</a></dt>
            <dt>2.4. <a href="#idp17855384">Why am I not receiving any SNMP Traps?</a></dt>
            <dt>2.5. <a href="#idp18849864">Kamailio refuses to load the SNMPStats module.  Why is it displaying "load_module: could not open module snmpstats.so"?
		</a></dt>
            <dt>2.6. <a href="#idp17674072">How can I learn what all the scalars and tables are?</a></dt>
            <dt>2.7. <a href="#idp18822288">Why do snmpget, snmpwalk, and snmptable always time out?</a></dt>
            <dt>2.8. <a href="#idp18823832">How do I use snmpget?</a></dt>
            <dt>2.9. <a href="#idp18826608">How do I use snmptable?</a></dt>
            <dt>2.10. <a href="#idp16430752">Where can I find more about Kamailio?</a></dt>
            <dt>2.11. <a href="#idp16432192">Where can I post a question about this module?</a></dt>
            <dt>2.12. <a href="#idp18309656">How can I report a bug?</a></dt>
          </dl>
          <table border="0" width="100%" summary="Q and A Set">
            <col align="left" width="1%" />
            <col />
            <tbody>
              <tr class="question" title="2.1.">
                <td align="left" valign="top">
                  <a id="idp17069760"></a>
                  <a id="idp16635168"></a>
                  <p>
                    <strong>2.1.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Where can I find more about SNMP?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			There are many websites that explain SNMP at all levels of detail.
			A great general introduction can be found at http://en.wikipedia.org/wiki/SNMP

			If you are interested in the nitty gritty details of the protocol, 
			then please look at RFC 3410.  RFC 3410 maps out the many other RFCs
			that define SNMP, and can be found at http://www.rfc-archive.org/getrfc.php?rfc=3410
		</p>
                </td>
              </tr>
              <tr class="question" title="2.2.">
                <td align="left" valign="top">
                  <a id="idp18615712"></a>
                  <a id="idp16835976"></a>
                  <p>
                    <strong>2.2.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Where can I find more about NetSNMP?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			NetSNMP source code, documentation, FAQs, and tutorials can all be found at
			http://net-snmp.sourceforge.net/.
		</p>
                </td>
              </tr>
              <tr class="question" title="2.3.">
                <td align="left" valign="top">
                  <a id="idp16831552"></a>
                  <a id="idp17209136"></a>
                  <p>
                    <strong>2.3.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Where can I find out more about AgentX?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			The full details of the AgentX protocol are explained in RFC 2741, 
			available at: http://www.rfc-archive.org/getrfc.php?rfc=2741
		</p>
                </td>
              </tr>
              <tr class="question" title="2.4.">
                <td align="left" valign="top">
                  <a id="idp17855384"></a>
                  <a id="idp16653968"></a>
                  <p>
                    <strong>2.4.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Why am I not receiving any SNMP Traps?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
		Assuming you've configured the trap thresholds in kamailio.cfg with something similar to:
		</p>
                  <pre class="programlisting">    modparam("snmpstats", "MsgQueueMinorThreshold", 1234)
    modparam("snmpstats", "MsgQueueMajorThreshold", 5678)

    modparam("snmpstats", "dlg_minor_threshold", 500)
    modparam("snmpstats", "dlg_minor_threshold", 600)</pre>
                  <p>
		Then either Kamailio is not reaching these thresholds (which is a good thing),
		or you haven't set up the trap monitor correctly.  To prove this to yourself,
		you can start NetSNMP with:
		</p>
                  <pre class="programlisting">    snmpd -f -Dtrap -x localhost:705</pre>
                  <p>
		The -f tells the NetSNMP process to not daemonize, and the -Dtrap enables trap
		debug logs.  You should see something similar to the following: 
		</p>
                  <pre class="programlisting">    registered debug token trap, 1
    trap: adding callback trap sink            ----- You should see both
    trapsess: adding to trap table             ----- of these lines.
    Turning on AgentX master support.
    trap: send_trap 0 0 NET-SNMP-TC::linux
    trap: sending trap type=167, version=1
    NET-SNMP version 5.3.1</pre>
                  <p>
		If the two lines above did not appear, then you probably have not included
		the following in your snmpd.conf file.
		</p>
                  <pre class="programlisting">    trap2sink machineToSendTrapsTo:machinesPortNumber.</pre>
                  <p>
		When a trap has been received by snmpd, the following will appear in the
		above output:
		</p>
                  <pre class="programlisting">    sent_trap -1 -1 NET-SNMP-TC::linus
    sending trap type=167, version=1</pre>
                  <p>
		You'll also need a program to collect the traps and do something with them
		(such as sending them to syslog).  NetSNMP provides snmptrapd for this.  Other
		solutions exist as well.  Google is your friend.
		</p>
                </td>
              </tr>
              <tr class="question" title="2.5.">
                <td align="left" valign="top">
                  <a id="idp18849864"></a>
                  <a id="idp16480120"></a>
                  <p>
                    <strong>2.5.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Kamailio refuses to load the SNMPStats module.  Why is it displaying "load_module: could not open module snmpstats.so"?
		</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
		On some systems, you may receive the following error at stdout or the log files
		depending on the configuration.  
		</p>
                  <pre class="programlisting">    ERROR: load_module: could not open module &lt;/usr/local/lib/kamailio/modules_k/snmpstats.so&gt;: 
           libnetsnmpmibs.so.10: cannot open shared object file: No such file or directory.</pre>
                  <p>	
		This means one of two things:
		</p>
                  <div class="orderedlist">
                    <ol class="orderedlist" type="1">
                      <li class="listitem">
                        <p>
				You did not install NetSNMP.  ("make install" if building from source)
				</p>
                      </li>
                      <li class="listitem">
                        <p>
				The dynamic linker cannot find the necessary libraries.  
				</p>
                      </li>
                    </ol>
                  </div>
                  <p>	
		In the second case, the fix is as follows:
		</p>
                  <div class="orderedlist">
                    <ol class="orderedlist" type="1">
                      <li class="listitem">
                        <p>
				find / -name "libnetsnmpmibs*"
				</p>
                        <div class="itemizedlist">
                          <ul class="itemizedlist">
                            <li class="listitem">
                              <p>
			You will find a copy unless you haven't installed NetSNMP.
			Make note of the path.
						</p>
                            </li>
                          </ul>
                        </div>
                        <p>
				</p>
                      </li>
                      <li class="listitem">
                        <p>
				less /etc/ld.so.conf
				</p>
                        <div class="itemizedlist">
                          <ul class="itemizedlist">
                            <li class="listitem">
                              <p>
			If the file is missing the path from step 1, then add the path to
			ld.so.conf
						</p>
                            </li>
                          </ul>
                        </div>
                        <p>

				</p>
                      </li>
                      <li class="listitem">
                        <p>
				ldconfig
				</p>
                      </li>
                      <li class="listitem">
                        <p>
				Try starting Kamailio again.
				</p>
                      </li>
                    </ol>
                  </div>
                  <p>
		Alternatively, you may prefix your startup command with:
		</p>
                  <pre class="programlisting">    LD_LIBRARY_PATH=/path/noted/in/step/one/above</pre>
                  <p>
		For example, on my system I ran:
		</p>
                  <pre class="programlisting">    LD_LIBRARY_PATH=/usr/local/lib kamctl start</pre>
                </td>
              </tr>
              <tr class="question" title="2.6.">
                <td align="left" valign="top">
                  <a id="idp17674072"></a>
                  <a id="idp17674216"></a>
                  <p>
                    <strong>2.6.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>How can I learn what all the scalars and tables are?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
		All scalars and tables are named in the SNMPStats module overview.  The files
		KAMAILIO-MIB, KAMAILIO-REG-MIB, KAMAILIO-SIP-COMMON-MIB and KAMAILIO-SIP-SERVER-MIB
		contain the full definitions and descriptions.  Note however, that the MIBs
		may actually contain scalars and tables which are currently not provided by the
		SNMPStats module.  Therefore, it is better to use NetSNMP's snmptranslate
		as an alternative. Take the kamailioSIPEntityType scalar as an example. You can
		invoke snmptranslate as follows:

		</p>
                  <pre class="programlisting">    snmptranslate -TBd kamailioSIPEntityType</pre>
                  <p>		

		Which would result in something similar to the following:

		</p>
                  <pre class="programlisting">    -- FROM       KAMAILIO-SIP-COMMON-MIB
    -- TEXTUAL CONVENTION KamailioSIPEntityRole
    SYNTAX        BITS {other(0), userAgent(1), proxyServer(2), redirectServer(3), registrarServer(4)} 
    MAX-ACCESS    read-only
    STATUS        current
    DESCRIPTION   " This object identifies the list of SIP entities this
                   row is related to. It is defined as a bit map.  Each
                   bit represents a type of SIP entity.
                   If a bit has value 1, the SIP entity represented by
                   this row plays the role of this entity type.
  
                   If a bit has value 0, the SIP entity represented by
                   this row does not act as this entity type
                   Combinations of bits can be set when the SIP entity
                   plays multiple SIP roles."</pre>
                  <p>  

		</p>
                </td>
              </tr>
              <tr class="question" title="2.7.">
                <td align="left" valign="top">
                  <a id="idp18822288"></a>
                  <a id="idp18822432"></a>
                  <p>
                    <strong>2.7.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Why do snmpget, snmpwalk, and snmptable always time out?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
		If your snmp operations are always returning with: "Timeout: No Response
		from localhost", then chances are that you are making the query with the wrong
		community string.  Default installs will most likely use "public" as their
		default community strings. Grep your snmpd.conf file for the string 
		"rocommunity", and use the result as your community string in your queries.
		</p>
                </td>
              </tr>
              <tr class="question" title="2.8.">
                <td align="left" valign="top">
                  <a id="idp18823832"></a>
                  <a id="idp18823976"></a>
                  <p>
                    <strong>2.8.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>How do I use snmpget?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
		NetSNMP's snmpget is used as follows:

		</p>
                  <pre class="programlisting">    snmpget -v 2c -c theCommunityString machineToSendTheMachineTo scalarElement.0</pre>
                  <p>

		For example, consider an snmpget on the kamailioSIPEntityType scalar, 
		run on the same machine running the Kamailio instance, with the default
		"public" community string.  The command would be:

		</p>
                  <pre class="programlisting">    snmpget -v2c -c public localhost kamailioSIPEntityType.0</pre>
                  <p>

		Which would result in something similar to:

		</p>
                  <pre class="programlisting">    KAMAILIO-SIP-COMMON-MIB::kamailioSIPEntityType.0 = BITS: F8 \
		other(0) userAgent(1) proxyServer(2)          \
		redirectServer(3) registrarServer(4)</pre>
                  <p>

		</p>
                </td>
              </tr>
              <tr class="question" title="2.9.">
                <td align="left" valign="top">
                  <a id="idp18826608"></a>
                  <a id="idp18826752"></a>
                  <p>
                    <strong>2.9.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>How do I use snmptable?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
		NetSNMP's snmptable is used as follows:

		</p>
                  <pre class="programlisting">    snmptable -Ci -v 2c -c theCommunityString machineToSendTheMachineTo theTableName</pre>
                  <p>

		For example, consider the kamailioSIPRegUserTable.  If we run the snmptable
		command on the same machine as the running Kamailio instance, configured with
		the default "public" community string.  The command would be:

		</p>
                  <pre class="programlisting">    snmptable -Ci -v 2c -c public localhost kamailioSIPRegUserTable</pre>
                  <p>

		Which would result in something similar to:

		</p>
                  <pre class="programlisting">    index kamailioSIPUserUri kamailioSIPUserAuthenticationFailures
        1       DefaultUser                                    0
        2            bogdan                                    0
        3    jeffrey.magder                                    0</pre>
                  <p>

		</p>
                </td>
              </tr>
              <tr class="question" title="2.10.">
                <td align="left" valign="top">
                  <a id="idp16430752"></a>
                  <a id="idp16430896"></a>
                  <p>
                    <strong>2.10.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Where can I find more about Kamailio?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			Take a look at <a class="ulink" href="javascript:if(confirm('http://www.kamailio.org/  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://www.kamailio.org/'" tppabs="http://www.kamailio.org/">http://www.kamailio.org/</a>.
		</p>
                </td>
              </tr>
              <tr class="question" title="2.11.">
                <td align="left" valign="top">
                  <a id="idp16432192"></a>
                  <a id="idp16432336"></a>
                  <p>
                    <strong>2.11.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>Where can I post a question about this module?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			First at all check if your question was already answered on one of
			our mailing lists: 
		</p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist">
                      <li class="listitem">
                        <p>User Mailing List - <a class="ulink" href="javascript:if(confirm('http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users'" tppabs="http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users">http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-users</a></p>
                      </li>
                      <li class="listitem">
                        <p>Developer Mailing List - <a class="ulink" href="javascript:if(confirm('http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev'" tppabs="http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev">http://lists.sip-router.org/cgi-bin/mailman/listinfo/sr-dev</a></p>
                      </li>
                    </ul>
                  </div>
                  <p>
			E-mails regarding any stable Kamailio release should be sent to 
			<code class="email">&lt;<a class="email" href="mailto:sr-users@lists.sip-router.org">sr-users@lists.sip-router.org</a>&gt;</code> and e-mails regarding development versions
			should be sent to <code class="email">&lt;<a class="email" href="mailto:sr-dev@lists.sip-router.org">sr-dev@lists.sip-router.org</a>&gt;</code>.
		</p>
                  <p>
			If you want to keep the mail private, send it to 
			<code class="email">&lt;<a class="email" href="mailto:sr-users@lists.sip-router.org">sr-users@lists.sip-router.org</a>&gt;</code>.
		</p>
                </td>
              </tr>
              <tr class="question" title="2.12.">
                <td align="left" valign="top">
                  <a id="idp18309656"></a>
                  <a id="idp18309784"></a>
                  <p>
                    <strong>2.12.</strong>
                  </p>
                </td>
                <td align="left" valign="top">
                  <p>How can I report a bug?</p>
                </td>
              </tr>
              <tr class="answer">
                <td align="left" valign="top"></td>
                <td align="left" valign="top">
                  <p>
			Please follow the guidelines provided at:
			<a class="ulink" href="javascript:if(confirm('http://sip-router.org/tracker  \n\nļ޷ Teleport Ultra , Ϊ һ·ⲿΪʼַĵַ  \n\nڷϴ?'))window.location='http://sip-router.org/tracker'" tppabs="http://sip-router.org/tracker">http://sip-router.org/tracker</a>.
		</p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </body>
</html>
