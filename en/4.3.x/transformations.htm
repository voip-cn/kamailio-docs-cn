
<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>cookbooks:4.2.x:transformations [Kamailio SIP Server Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="cookbooks,4.2.x,transformations"/>
<link rel="search" type="application/opensearchdescription+xml" href="/wiki/lib/exe/opensearch.php" title="Kamailio SIP Server Wiki"/>
<link rel="start" href="/wiki/"/>
<link rel="contents" href="/wiki/cookbooks/4.2.x/transformations?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="/wiki/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="/wiki/feed.php?mode=list&amp;ns=cookbooks:4.2.x"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="/wiki/_export/xhtml/cookbooks/4.2.x/transformations"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="/wiki/_export/raw/cookbooks/4.2.x/transformations"/>
<link rel="canonical" href="http://www.kamailio.org/wiki/cookbooks/4.2.x/transformations"/>
<link rel="stylesheet" type="text/css" href="/wiki/lib/exe/css.php?t=dokuwiki&amp;tseed=31a24d7ffe415049536e293898fc9d2f"/>
<script type="text/javascript">/*<![CDATA[*/var NS='cookbooks:4.2.x';var JSINFO = {"id":"cookbooks:4.2.x:transformations","namespace":"cookbooks:4.2.x"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/wiki/lib/exe/js.php?tseed=31a24d7ffe415049536e293898fc9d2f"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="/wiki/lib/tpl/dokuwiki/images/favicon.ico" />
<link rel="apple-touch-icon" href="/wiki/lib/tpl/dokuwiki/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki    showSidebar hasSidebar">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="/wiki/start"  accesskey="h" title="[H]"><img src="/wiki/lib/tpl/dokuwiki/images/logo.png" width="64" height="64" alt="" /> <span>Kamailio SIP Server Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="/wiki/cookbooks/4.2.x/transformations?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="/wiki/cookbooks/4.2.x/transformations?do=login&amp;sectok=558c40251c68d531f923d969af598d3a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="/wiki/start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="/wiki/doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="cookbooks:4.2.x:transformations" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="/wiki/cookbooks/4.2.x/transformations?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="/wiki/cookbooks/4.2.x/transformations?do=media&amp;ns=cookbooks%3A4.2.x"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="/wiki/cookbooks/4.2.x/transformations?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">?</span> <bdi><a href="/wiki/cookbooks/4.2.x/core"  class="breadcrumbs" title="cookbooks:4.2.x:core">core</a></bdi> <span class="bcsep">?</span> <bdi><a href="/wiki/cookbooks/4.2.x/pseudovariables"  class="breadcrumbs" title="cookbooks:4.2.x:pseudovariables">pseudovariables</a></bdi> <span class="bcsep">?</span> <span class="curid"><bdi><a href="/wiki/cookbooks/4.2.x/transformations"  class="breadcrumbs" title="cookbooks:4.2.x:transformations">transformations</a></bdi></span></div>
                    </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

                            <!-- ********** ASIDE ********** -->
                <div id="dokuwiki__aside"><div class="pad aside include group">
                    <h3 class="toggle">Sidebar</h3>
                    <div class="content">
                                                                        <ul>
<li class="level1"><div class="li"> <a href="/wiki/start" class="wikilink1" title="start">Wiki Home</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.kamailio.org" class="urlextern" title="http://www.kamailio.org"  rel="nofollow">Kamailio Site</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.kamailio.org/docs/" class="urlextern" title="http://www.kamailio.org/docs/"  rel="nofollow">Docs Index</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.kamailio.org/docs/modules/" class="urlextern" title="http://www.kamailio.org/docs/modules/"  rel="nofollow">Modules Docs</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.kamailio.org/dokuwiki/" class="urlextern" title="http://www.kamailio.org/dokuwiki/"  rel="nofollow">Old Wiki</a></div>
</li>
<li class="level1"><div class="li"> <a href="/wiki/wiki/dokuwiki" class="wikilink1" title="wiki:dokuwiki">Wiki Help</a></div>
</li>
<li class="level1"><div class="li"> <a href="/wiki/wiki/syntax" class="wikilink1" title="wiki:syntax">Wiki Syntax</a></div>
</li>
</ul>
                                            </div>
                </div></div><!-- /aside -->
            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>cookbooks:4.2.x:transformations</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#kamailio_sip_server_v42x_stabletransformations">Kamailio SIP Server v4.2.x (stable): Transformations</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#string_transformations">String Transformations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#slen">{s.len}</a></div></li>
<li class="level3"><div class="li"><a href="#sint">{s.int}</a></div></li>
<li class="level3"><div class="li"><a href="#smd5">{s.md5}</a></div></li>
<li class="level3"><div class="li"><a href="#ssha256">{s.sha256}</a></div></li>
<li class="level3"><div class="li"><a href="#ssha384">{s.sha384}</a></div></li>
<li class="level3"><div class="li"><a href="#ssha512">{s.sha512}</a></div></li>
<li class="level3"><div class="li"><a href="#ssubstr_offset_length">{s.substr,offset,length}</a></div></li>
<li class="level3"><div class="li"><a href="#sselect_index_separator">{s.select,index,separator}</a></div></li>
<li class="level3"><div class="li"><a href="#sencodehexa">{s.encode.hexa}</a></div></li>
<li class="level3"><div class="li"><a href="#sdecodehexa">{s.decode.hexa}</a></div></li>
<li class="level3"><div class="li"><a href="#sencodebase64">{s.encode.base64}</a></div></li>
<li class="level3"><div class="li"><a href="#sdecodebase64">{s.decode.base64}</a></div></li>
<li class="level3"><div class="li"><a href="#sescapecommon">{s.escape.common}</a></div></li>
<li class="level3"><div class="li"><a href="#sunescapecommon">{s.unescape.common}</a></div></li>
<li class="level3"><div class="li"><a href="#sescapeuser">{s.escape.user}</a></div></li>
<li class="level3"><div class="li"><a href="#sunescapeuser">{s.unescape.user}</a></div></li>
<li class="level3"><div class="li"><a href="#sescapeparam">{s.escape.param}</a></div></li>
<li class="level3"><div class="li"><a href="#sunescapeparam">{s.unescape.param}</a></div></li>
<li class="level3"><div class="li"><a href="#stolower">{s.tolower}</a></div></li>
<li class="level3"><div class="li"><a href="#stoupper">{s.toupper}</a></div></li>
<li class="level3"><div class="li"><a href="#sstrip_len">{s.strip,len}</a></div></li>
<li class="level3"><div class="li"><a href="#sstriptail_len">{s.striptail,len}</a></div></li>
<li class="level3"><div class="li"><a href="#sprefixes_len">{s.prefixes[,len]}</a></div></li>
<li class="level3"><div class="li"><a href="#sprefixesquoted_len">{s.prefixes.quoted[,len]}</a></div></li>
<li class="level3"><div class="li"><a href="#sreplace_match_repl">{s.replace,match,repl}</a></div></li>
<li class="level3"><div class="li"><a href="#sftime_format">{s.ftime,format}</a></div></li>
<li class="level3"><div class="li"><a href="#strim">{s.trim}</a></div></li>
<li class="level3"><div class="li"><a href="#srtrim">{s.rtrim}</a></div></li>
<li class="level3"><div class="li"><a href="#sltrim">{s.ltrim}</a></div></li>
<li class="level3"><div class="li"><a href="#srm_match">{s.rm,match}</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#uri_transformations">URI Transformations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#uriuser">{uri.user}</a></div></li>
<li class="level3"><div class="li"><a href="#urihost">{uri.host}</a></div></li>
<li class="level3"><div class="li"><a href="#uripasswd">{uri.passwd}</a></div></li>
<li class="level3"><div class="li"><a href="#uriport">{uri.port}</a></div></li>
<li class="level3"><div class="li"><a href="#uriparams">{uri.params}</a></div></li>
<li class="level3"><div class="li"><a href="#uriparam_name">{uri.param,name}</a></div></li>
<li class="level3"><div class="li"><a href="#uriheaders">{uri.headers}</a></div></li>
<li class="level3"><div class="li"><a href="#uritransport">{uri.transport}</a></div></li>
<li class="level3"><div class="li"><a href="#urittl">{uri.ttl}</a></div></li>
<li class="level3"><div class="li"><a href="#uriuparam">{uri.uparam}</a></div></li>
<li class="level3"><div class="li"><a href="#urimaddr">{uri.maddr}</a></div></li>
<li class="level3"><div class="li"><a href="#urimethod">{uri.method}</a></div></li>
<li class="level3"><div class="li"><a href="#urilr">{uri.lr}</a></div></li>
<li class="level3"><div class="li"><a href="#urir2">{uri.r2}</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#parameters_list_transformations">Parameters List Transformations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#paramvalue_name_delimiter">{param.value,name[, delimiter]}</a></div></li>
<li class="level3"><div class="li"><a href="#paramvalueat_index_delimiter">{param.valueat,index[, delimiter]}</a></div></li>
<li class="level3"><div class="li"><a href="#paramname_index_delimiter">{param.name,index[, delimiter]}</a></div></li>
<li class="level3"><div class="li"><a href="#paramcount_delimiter">{param.count[, delimiter]}</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#name-address_transformations">Name-address Transformations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#nameaddrname">{nameaddr.name}</a></div></li>
<li class="level3"><div class="li"><a href="#nameaddruri">{nameaddr.uri}</a></div></li>
<li class="level3"><div class="li"><a href="#nameaddrlen">{nameaddr.len}</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#to-body_transformations">To-Body Transformations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#tobodyuri">{tobody.uri}</a></div></li>
<li class="level3"><div class="li"><a href="#tobodydisplay">{tobody.display}</a></div></li>
<li class="level3"><div class="li"><a href="#tobodytag">{tobody.tag}</a></div></li>
<li class="level3"><div class="li"><a href="#tobodyuser">{tobody.user}</a></div></li>
<li class="level3"><div class="li"><a href="#tobodyhost">{tobody.host}</a></div></li>
<li class="level3"><div class="li"><a href="#tobodyparams">{tobody.params}</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#line_transformations">Line Transformations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#linecount">{line.count}</a></div></li>
<li class="level3"><div class="li"><a href="#lineat_pos">{line.at,pos}</a></div></li>
<li class="level3"><div class="li"><a href="#linesw_match">{line.sw,match}</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#msrp_transformations">MSRP Transformations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#msrpuriuser">{msrpuri.user}</a></div></li>
<li class="level3"><div class="li"><a href="#msrpurihost">{msrpuri.host}</a></div></li>
<li class="level3"><div class="li"><a href="#msrpuriport">{msrpuri.port}</a></div></li>
<li class="level3"><div class="li"><a href="#msrpurisession">{msrpuri.session}</a></div></li>
<li class="level3"><div class="li"><a href="#msrpuriproto">{msrpuri.proto}</a></div></li>
<li class="level3"><div class="li"><a href="#msrpuriparams">{msrpuri.params}</a></div></li>
<li class="level3"><div class="li"><a href="#msrpuriuserinfo">{msrpuri.userinfo}</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#regular_expression_transformations">Regular Expression Transformations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#resubst_expression">{re.subst,expression}</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#sql_transformations">SQL Transformations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#sqlval">{sql.val}</a></div></li>
<li class="level3"><div class="li"><a href="#sqlvalint">{sql.val.int}</a></div></li>
<li class="level3"><div class="li"><a href="#sqlvalstr">{sql.val.str}</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#examples">Examples</a></div></li>
<li class="level2"><div class="li"><a href="#http_url_transformations">HTTP URL Transformations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#urlpath">{url.path}</a></div></li>
<li class="level3"><div class="li"><a href="#urlquerystring">{url.querystring}</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="kamailio_sip_server_v42x_stabletransformations">Kamailio SIP Server v4.2.x (stable): Transformations</h1>
<div class="level1">
<pre class="code">Main author:
   Daniel-Constantin Mierla &lt;miconda (at) gmail.com&gt;</pre>

<p>
<strong>Transformation</strong> is basically a function that is applied to a pseudo-variable (PV) to get a special value from it. The value of PV is not affected at all.
</p>

<p>
Transformations are implemented by various modules, most of them being in <strong>pv</strong> module.
</p>

<p>
The transformations are intended to facilitate access to different attributes of PV (like strlen of value, parts of value, substrings) or complete different value of PV (encoded in hexa, md5 value, escape/unescape PV value for DB operations¡­).
</p>

<p>
A transformation is represented in between <strong>&#039;{&#039;</strong> and <strong>&#039;}&#039;</strong> and follows the name of a PV. When using transformations, the PV name and transformations <strong>must</strong> be enclosed in between <strong>&#039;(&#039;</strong> and <strong>&#039;)&#039;</strong>, following the <strong>$</strong> sign.
</p>
<pre class="code"># the length of From URI ($fu is PV for From URI)

$(fu{s.len})</pre>

<p>
Many transformations can be applied in the same time to a PV.
</p>
<pre class="code"># the length of escaped &#039;Test&#039; header body

$(hdr(Test){s.escape.common}{s.len})</pre>

<p>
The transformations can be used anywhere, being considered parts of PV ¨C in xlog, avpops or other modules&#039; functions and parameters, in right side assignment expressions or in comparisons.
</p>

</div>

<h2 class="sectionedit2" id="string_transformations">String Transformations</h2>
<div class="level2">

<p>
The name of these transformation starts with &#039;s.&#039;. They are intended to apply string operations to PV.
</p>

<p>
Available transformations in this class:
</p>

</div>

<h3 class="sectionedit3" id="slen">{s.len}</h3>
<div class="level3">

<p>
Return strlen of PV value
</p>
<pre class="code">$var(x) = &quot;abc&quot;;
if($(var(x){s.len}) == 3)
{
   ...
}</pre>

</div>

<h3 class="sectionedit4" id="sint">{s.int}</h3>
<div class="level3">

<p>
Return integer value of a string-represented number
</p>
<pre class="code">$var(x) = &quot;1234&quot;;
if($(var(x){s.int})==1234) {
  ...
}</pre>

</div>

<h3 class="sectionedit5" id="smd5">{s.md5}</h3>
<div class="level3">

<p>
Return md5 over PV value
</p>
<pre class="code">xlog(&quot;md5 over From username: $(fU{s.md5})&quot;);</pre>

</div>

<h3 class="sectionedit6" id="ssha256">{s.sha256}</h3>
<div class="level3">

<p>
Return sha 256 over PV value
</p>
<pre class="code">xlog(&quot;sha 256 over From username: $(fU{s.sha256})&quot;);</pre>

</div>

<h3 class="sectionedit7" id="ssha384">{s.sha384}</h3>
<div class="level3">

<p>
Return sha 384 over PV value
</p>
<pre class="code">xlog(&quot;sha 384 over From username: $(fU{s.sha384})&quot;);</pre>

</div>

<h3 class="sectionedit8" id="ssha512">{s.sha512}</h3>
<div class="level3">

<p>
Return sha 512 over PV value
</p>
<pre class="code">xlog(&quot;sha 512 over From username: $(fU{s.sha512})&quot;);</pre>

</div>

<h3 class="sectionedit9" id="ssubstr_offset_length">{s.substr,offset,length}</h3>
<div class="level3">

<p>
Return substring starting at offset having size of &#039;length&#039;. If offset is negative, then it is counted from the end of PV value, -1 being the last char. In case of positive value, 0 is first char. Length must be positive, in case of 0, substring to the end of PV value is returned. offset and length can be PV as well.
</p>

<p>
Example:
</p>
<pre class="code">$var(x) = &quot;abcd&quot;;
$(var(x){s.substr,1,0}); =&gt; &quot;bcd&quot;</pre>

</div>

<h3 class="sectionedit10" id="sselect_index_separator">{s.select,index,separator}</h3>
<div class="level3">

<p>
Return a field from PV value. The field is selected based on separator and index. The separator must be a character used to identify the fields. Index must be a integer value or a PV. If index is negative, the count of fields starts from end of PV value, -1 being last field. If index is positive, 0 is the first field.
</p>

<p>
Example:
</p>
<pre class="code">$var(x) = &quot;12,34,56&quot;;
$(var(x){s.select,1,,}) =&gt; &quot;34&quot; ;

$var(x) = &quot;12,34,56&quot;;
$(var(x){s.select,-2,,}) =&gt; &quot;34&quot;</pre>

</div>

<h3 class="sectionedit11" id="sencodehexa">{s.encode.hexa}</h3>
<div class="level3">

<p>
Return encoding in hexa of PV value
</p>

</div>

<h3 class="sectionedit12" id="sdecodehexa">{s.decode.hexa}</h3>
<div class="level3">

<p>
Return decoding from hexa of PV value
</p>

</div>

<h3 class="sectionedit13" id="sencodebase64">{s.encode.base64}</h3>
<div class="level3">

<p>
Return base64 encoding of PV value
</p>

</div>

<h3 class="sectionedit14" id="sdecodebase64">{s.decode.base64}</h3>
<div class="level3">

<p>
Decode base64 encoded PV and return value
</p>

</div>

<h3 class="sectionedit15" id="sescapecommon">{s.escape.common}</h3>
<div class="level3">

<p>
Return escaped string of PV value. Characters escaped are &#039;, ¡°, \ and 0. Useful when doing DB queries (care should be taken for non Latin character set).
</p>

</div>

<h3 class="sectionedit16" id="sunescapecommon">{s.unescape.common}</h3>
<div class="level3">

<p>
Return unescaped string of PV value. Reverse of above transformation.
</p>

</div>

<h3 class="sectionedit17" id="sescapeuser">{s.escape.user}</h3>
<div class="level3">

<p>
Return escaped string of PV value, changing to &#039;%hexa&#039; the characters that are not allowed in user part of SIP <abbr title="Uniform Resource Identifier">URI</abbr> following <abbr title="Request for Comments">RFC</abbr> requirements.
</p>

</div>

<h3 class="sectionedit18" id="sunescapeuser">{s.unescape.user}</h3>
<div class="level3">

<p>
Return unescaped string of PV value, changing &#039;%hexa&#039; to character code. Reverse of above transformation.
</p>

</div>

<h3 class="sectionedit19" id="sescapeparam">{s.escape.param}</h3>
<div class="level3">

<p>
Return escaped string of PV value, changing to &#039;%hexa&#039; the characters that are not allowed in the param part of SIP <abbr title="Uniform Resource Identifier">URI</abbr> following <abbr title="Request for Comments">RFC</abbr> requirements.
</p>

</div>

<h3 class="sectionedit20" id="sunescapeparam">{s.unescape.param}</h3>
<div class="level3">

<p>
Return unescaped string of PV value, changing &#039;%hexa&#039; to character code. Reverse of above transformation.
</p>

</div>

<h3 class="sectionedit21" id="stolower">{s.tolower}</h3>
<div class="level3">

<p>
Return string with lower case <abbr title="American Standard Code for Information Interchange">ASCII</abbr> letters.
</p>

</div>

<h3 class="sectionedit22" id="stoupper">{s.toupper}</h3>
<div class="level3">

<p>
Return string with upper case <abbr title="American Standard Code for Information Interchange">ASCII</abbr> letters.
</p>

</div>

<h3 class="sectionedit23" id="sstrip_len">{s.strip,len}</h3>
<div class="level3">

<p>
Return string after removing starting &#039;len&#039; characters. Parameter &#039;len&#039; can be positive integer or pseudo-variable holding a positive integer.
</p>

<p>
Example:
</p>
<pre class="code c">$var<span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="st0">&quot;1234&quot;</span><span class="sy0">;</span>
$var<span class="br0">&#40;</span>y<span class="br0">&#41;</span> <span class="sy0">=</span> $<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>s.<span class="me1">strip</span><span class="sy0">,</span><span class="nu0">2</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co2"># resulted value is &quot;34&quot;</span></pre>

</div>

<h3 class="sectionedit24" id="sstriptail_len">{s.striptail,len}</h3>
<div class="level3">

<p>
Return string after removing ending &#039;len&#039; characters. Parameter &#039;len&#039; can be positive integer or pseudo-variable holding a positive integer.
</p>

</div>

<h3 class="sectionedit25" id="sprefixes_len">{s.prefixes[,len]}</h3>
<div class="level3">

<p>
Return series of comma separated prefixes of the pv. Parameter &#039;len&#039; is optional and will limit the maximum prefix length.
</p>

<p>
Example:
</p>
<pre class="code c">$var<span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="st0">&quot;123456&quot;</span><span class="sy0">;</span>
$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>s.<span class="me1">prefixes</span><span class="br0">&#125;</span><span class="br0">&#41;</span> <span class="sy0">=&gt;</span> <span class="nu0">1</span><span class="sy0">,</span><span class="nu0">12</span><span class="sy0">,</span><span class="nu0">123</span><span class="sy0">,</span><span class="nu0">1234</span><span class="sy0">,</span><span class="nu0">12345</span><span class="sy0">,</span><span class="nu0">123456</span>
$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>s.<span class="me1">prefixes</span><span class="sy0">,</span><span class="nu0">4</span><span class="br0">&#125;</span> <span class="sy0">=&gt;</span> <span class="nu0">1</span><span class="sy0">,</span><span class="nu0">12</span><span class="sy0">,</span><span class="nu0">123</span><span class="sy0">,</span><span class="nu0">1234</span></pre>

</div>

<h3 class="sectionedit26" id="sprefixesquoted_len">{s.prefixes.quoted[,len]}</h3>
<div class="level3">

<p>
Return series of comma separated quoted prefixes of the pv. Parameter &#039;len&#039; is optional and will limit the maximum prefix length.
</p>

<p>
Example: 
</p>
<pre class="code c">$var<span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="st0">&quot;123456&quot;</span><span class="sy0">;</span>
$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>s.<span class="me1">prefixes</span>.<span class="me1">quoted</span><span class="br0">&#125;</span> <span class="sy0">=&gt;</span> <span class="st0">'1'</span><span class="sy0">,</span><span class="st0">'12'</span><span class="sy0">,</span><span class="st0">'123'</span><span class="sy0">,</span><span class="st0">'1234'</span><span class="sy0">,</span><span class="st0">'12345'</span><span class="sy0">,</span><span class="st0">'123456'</span>
$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>s.<span class="me1">prefixes</span>.<span class="me1">quoted</span><span class="sy0">,</span><span class="nu0">4</span><span class="br0">&#125;</span> <span class="sy0">=&gt;</span> <span class="st0">'1'</span><span class="sy0">,</span><span class="st0">'12'</span><span class="sy0">,</span><span class="st0">'123'</span><span class="sy0">,</span><span class="st0">'1234'</span></pre>

</div>

<h3 class="sectionedit27" id="sreplace_match_repl">{s.replace,match,repl}</h3>
<div class="level3">

<p>
Replace all occurrences of <strong>match</strong> with <strong>repl</strong>. The parameters can be pseudo-variables.
</p>

<p>
Example: 
</p>
<pre class="code c">$var<span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="st0">&quot;abababa&quot;</span><span class="sy0">;</span>
$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>s.<span class="me1">replace</span><span class="sy0">,</span>a<span class="sy0">,</span>c<span class="br0">&#125;</span> <span class="sy0">=&gt;</span> <span class="st0">&quot;cbcbcbc&quot;</span></pre>

</div>

<h3 class="sectionedit28" id="sftime_format">{s.ftime,format}</h3>
<div class="level3">

<p>
Format the epoch in the pv according to the parameter. The parameter has to be strftime formatting string.
</p>
<pre class="code c">$<span class="br0">&#40;</span>TS<span class="br0">&#123;</span>s.<span class="me1">ftime</span><span class="sy0">,%</span>Y<span class="sy0">-%</span>m<span class="sy0">-%</span>d <span class="sy0">%</span>H<span class="sy0">:%</span>M<span class="sy0">:%</span>S<span class="br0">&#125;</span><span class="br0">&#41;</span></pre>

</div>

<h3 class="sectionedit29" id="strim">{s.trim}</h3>
<div class="level3">

<p>
Remove left and right whitespaces (&#039; &#039;, &#039;\t&#039;, &#039;\r&#039;, &#039;\n&#039;) around PV value.
</p>
<pre class="code c">$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>s.<span class="me1">trim</span><span class="br0">&#125;</span><span class="br0">&#41;</span></pre>

</div>

<h3 class="sectionedit30" id="srtrim">{s.rtrim}</h3>
<div class="level3">

<p>
Remove right whitespaces (&#039; &#039;, &#039;\t&#039;, &#039;\r&#039;, &#039;\n&#039;) around PV value.
</p>
<pre class="code c">$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>s.<span class="me1">rtrim</span><span class="br0">&#125;</span><span class="br0">&#41;</span></pre>

</div>

<h3 class="sectionedit31" id="sltrim">{s.ltrim}</h3>
<div class="level3">

<p>
Remove left whitespaces (&#039; &#039;, &#039;\t&#039;, &#039;\r&#039;, &#039;\n&#039;) around PV value.
</p>
<pre class="code c">$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>s.<span class="me1">ltrim</span><span class="br0">&#125;</span><span class="br0">&#41;</span></pre>

</div>

<h3 class="sectionedit32" id="srm_match">{s.rm,match}</h3>
<div class="level3">

<p>
Remove occurrences of &#039;match&#039; from PV. &#039;match&#039; can be static string or variable.
</p>
<pre class="code c">$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>s.<span class="me1">rm</span><span class="sy0">,</span>test<span class="br0">&#125;</span><span class="br0">&#41;</span></pre>

</div>

<h2 class="sectionedit33" id="uri_transformations">URI Transformations</h2>
<div class="level2">

<p>
The name of transformation starts with &#039;uri.&#039;. The PV value is considered to be a SIP <abbr title="Uniform Resource Identifier">URI</abbr>. This transformation returns parts of SIP <abbr title="Uniform Resource Identifier">URI</abbr> (see struct sip_uri). If that part is missing, the returned value is an empty string.
</p>

<p>
Available transformations in this class:
</p>

</div>

<h3 class="sectionedit34" id="uriuser">{uri.user}</h3>
<div class="level3">

<p>
Return the user part
</p>

</div>

<h3 class="sectionedit35" id="urihost">{uri.host}</h3>
<div class="level3">

<p>
(same as <strong>{uri.domain}</strong>)
</p>

<p>
Return the domain part
</p>

</div>

<h3 class="sectionedit36" id="uripasswd">{uri.passwd}</h3>
<div class="level3">

<p>
Return the password
</p>

</div>

<h3 class="sectionedit37" id="uriport">{uri.port}</h3>
<div class="level3">

<p>
Return the port
</p>

</div>

<h3 class="sectionedit38" id="uriparams">{uri.params}</h3>
<div class="level3">

<p>
Return the <abbr title="Uniform Resource Identifier">URI</abbr> parameters in a string
</p>

</div>

<h3 class="sectionedit39" id="uriparam_name">{uri.param,name}</h3>
<div class="level3">

<p>
Return the value of parameter with name &#039;name&#039;
</p>

</div>

<h3 class="sectionedit40" id="uriheaders">{uri.headers}</h3>
<div class="level3">

<p>
Return <abbr title="Uniform Resource Identifier">URI</abbr> headers
</p>

</div>

<h3 class="sectionedit41" id="uritransport">{uri.transport}</h3>
<div class="level3">

<p>
Return the value of transport parameter
</p>

</div>

<h3 class="sectionedit42" id="urittl">{uri.ttl}</h3>
<div class="level3">

<p>
Return the value of ttl parameter
</p>

</div>

<h3 class="sectionedit43" id="uriuparam">{uri.uparam}</h3>
<div class="level3">

<p>
Return the value of user parameter
</p>

</div>

<h3 class="sectionedit44" id="urimaddr">{uri.maddr}</h3>
<div class="level3">

<p>
Return the value of maddr parameter
</p>

</div>

<h3 class="sectionedit45" id="urimethod">{uri.method}</h3>
<div class="level3">

<p>
Return the value of method parameter
</p>

</div>

<h3 class="sectionedit46" id="urilr">{uri.lr}</h3>
<div class="level3">

<p>
Return the value of lr parameter
</p>

</div>

<h3 class="sectionedit47" id="urir2">{uri.r2}</h3>
<div class="level3">

<p>
Return the value of r2 parameter
</p>

</div>

<h2 class="sectionedit48" id="parameters_list_transformations">Parameters List Transformations</h2>
<div class="level2">

<p>
The name of the transformation starts with &#039;param.&#039;. The PV value is considered to be a string like name1=value1;name2=value2;¡­¡±. The transformations returns the value for a specific parameter, or the name of a parameter at a specific index.
</p>

<p>
Available transformations in this class:
</p>

</div>

<h3 class="sectionedit49" id="paramvalue_name_delimiter">{param.value,name[, delimiter]}</h3>
<div class="level3">

<p>
Return the value of parameter &#039;name&#039;
</p>

<p>
Example:
</p>
<pre class="code">&quot;a=1;b=2;c=3&quot;{param.value,c} = &quot;3&quot;</pre>

<p>
&#039;name&#039; can be a pseudo-variable
</p>

<p>
&#039;delimiter&#039; allows you to specify a single character to use as the parameter delimiter. For example, when parsing HTTP <abbr title="Uniform Resource Locator">URL</abbr> query strings use &#039;&amp;&#039;.
</p>

</div>

<h3 class="sectionedit50" id="paramvalueat_index_delimiter">{param.valueat,index[, delimiter]}</h3>
<div class="level3">

<p>
Return the value of parameter at position give by &#039;index&#039; (0-based index)
</p>

<p>
Example:
</p>
<pre class="code">&quot;a=1;b=2;c=3&quot;{param.valueat,1} = &quot;2&quot;</pre>

<p>
&#039;index&#039; can be a pseudo-variable
</p>

<p>
&#039;delimiter&#039; allows you to specify a single character to use as the parameter delimiter. For example, when parsing HTTP <abbr title="Uniform Resource Locator">URL</abbr> query strings use &#039;&amp;&#039;.
</p>

</div>

<h3 class="sectionedit51" id="paramname_index_delimiter">{param.name,index[, delimiter]}</h3>
<div class="level3">

<p>
Return the name of parameter at position &#039;index&#039;.
</p>

<p>
Example:
</p>
<pre class="code">&quot;a=1;b=2;c=3&quot;{param.name,1} = &quot;b&quot;</pre>

<p>
&#039;delimiter&#039; allows you to specify a single character to use as the parameter delimiter. For example, when parsing HTTP <abbr title="Uniform Resource Locator">URL</abbr> query strings use &#039;&amp;&#039;.
</p>

</div>

<h3 class="sectionedit52" id="paramcount_delimiter">{param.count[, delimiter]}</h3>
<div class="level3">

<p>
Return the number of parameters in the list.
</p>

<p>
Example:
</p>
<pre class="code">&quot;a=1;b=2;c=3&quot;{param.count} = 3</pre>

<p>
&#039;delimiter&#039; allows you to specify a single character to use as the parameter delimiter. For example, when parsing HTTP <abbr title="Uniform Resource Locator">URL</abbr> query strings use &#039;&amp;&#039;.
</p>

</div>

<h2 class="sectionedit53" id="name-address_transformations">Name-address Transformations</h2>
<div class="level2">

<p>
The name of the transformation starts with &#039;nameaddr.&#039;. The PV value is considered to be a string like &#039;[display_name] uri&#039;. The transformations returns the value for a specific field.
</p>

<p>
Available transformations in this class:
</p>

</div>

<h3 class="sectionedit54" id="nameaddrname">{nameaddr.name}</h3>
<div class="level3">

<p>
Return the value of display name
</p>

<p>
Example:
</p>
<pre class="code">&#039;&quot;test&quot; &lt;sip:test@kamailio.net&gt;&#039; {nameaddr.name} = &quot;test&quot;</pre>

</div>

<h3 class="sectionedit55" id="nameaddruri">{nameaddr.uri}</h3>
<div class="level3">

<p>
Return the value of <abbr title="Uniform Resource Identifier">URI</abbr>
</p>

<p>
Example:
</p>
<pre class="code">&#039;&quot;test&quot; &lt;sip:test@kamailio.net&gt;&#039; {nameaddr.uri} = sip:test@kamailio.net</pre>

</div>

<h3 class="sectionedit56" id="nameaddrlen">{nameaddr.len}</h3>
<div class="level3">

<p>
Return the length of the entire name-addr part from the value.
</p>

</div>

<h2 class="sectionedit57" id="to-body_transformations">To-Body Transformations</h2>
<div class="level2">

<p>
<span style="color: #0000ff">This transformation class is exported by <strong>pv</strong> module.</span>
</p>

<p>
Access parts of a ToBody-like structure.
</p>

</div>

<h3 class="sectionedit58" id="tobodyuri">{tobody.uri}</h3>
<div class="level3">

<p>
* return <abbr title="Uniform Resource Identifier">URI</abbr> from To body
</p>

</div>

<h3 class="sectionedit59" id="tobodydisplay">{tobody.display}</h3>
<div class="level3">

<p>
* return Display name from To body
</p>

</div>

<h3 class="sectionedit60" id="tobodytag">{tobody.tag}</h3>
<div class="level3">

<p>
* return Tag parameter from To body
</p>

</div>

<h3 class="sectionedit61" id="tobodyuser">{tobody.user}</h3>
<div class="level3">

<p>
* return <abbr title="Uniform Resource Identifier">URI</abbr> User from To body
</p>

</div>

<h3 class="sectionedit62" id="tobodyhost">{tobody.host}</h3>
<div class="level3">

<p>
* return <abbr title="Uniform Resource Identifier">URI</abbr> Host from To body
</p>

</div>

<h3 class="sectionedit63" id="tobodyparams">{tobody.params}</h3>
<div class="level3">

<p>
* return parameters part from To body
</p>

</div>

<h2 class="sectionedit64" id="line_transformations">Line Transformations</h2>
<div class="level2">

<p>
Line-based operations on text values.
</p>

</div>

<h3 class="sectionedit65" id="linecount">{line.count}</h3>
<div class="level3">

<p>
Return the number of lines.
</p>

<p>
Example:
</p>
<pre class="code c">$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>line.<span class="me1">count</span><span class="br0">&#125;</span><span class="br0">&#41;</span></pre>

</div>

<h3 class="sectionedit66" id="lineat_pos">{line.at,pos}</h3>
<div class="level3">

<p>
Return the line at position &#039;pos&#039;. The index start from 0. Negative position can be used to count from last line (which is -1).
</p>

<p>
Example:
</p>
<pre class="code c">$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>line.<span class="me1">at</span><span class="sy0">,</span><span class="nu0">2</span><span class="br0">&#125;</span><span class="br0">&#41;</span></pre>

</div>

<h3 class="sectionedit67" id="linesw_match">{line.sw,match}</h3>
<div class="level3">

<p>
Return the line starting with <strong>match</strong>.
</p>

<p>
Example:
</p>
<pre class="code c">$<span class="br0">&#40;</span>var<span class="br0">&#40;</span>x<span class="br0">&#41;</span><span class="br0">&#123;</span>line.<span class="me1">sw</span><span class="sy0">,</span>mytext<span class="br0">&#125;</span><span class="br0">&#41;</span></pre>

</div>

<h2 class="sectionedit68" id="msrp_transformations">MSRP Transformations</h2>
<div class="level2">

<p>
<span style="color: #0000ff">This transformation class is exported by <strong>msrp</strong> module.</span>
</p>

</div>

<h3 class="sectionedit69" id="msrpuriuser">{msrpuri.user}</h3>
<div class="level3">

<p>
User part of a MSRP <abbr title="Uniform Resource Identifier">URI</abbr>.
</p>

</div>

<h3 class="sectionedit70" id="msrpurihost">{msrpuri.host}</h3>
<div class="level3">

<p>
Host part of a MSRP <abbr title="Uniform Resource Identifier">URI</abbr>.
</p>

</div>

<h3 class="sectionedit71" id="msrpuriport">{msrpuri.port}</h3>
<div class="level3">

<p>
Port part of a MSRP <abbr title="Uniform Resource Identifier">URI</abbr>.
</p>

</div>

<h3 class="sectionedit72" id="msrpurisession">{msrpuri.session}</h3>
<div class="level3">

<p>
Session ID part of a MSRP <abbr title="Uniform Resource Identifier">URI</abbr>.
</p>

</div>

<h3 class="sectionedit73" id="msrpuriproto">{msrpuri.proto}</h3>
<div class="level3">

<p>
Transport layer part of a MSRP <abbr title="Uniform Resource Identifier">URI</abbr>.
</p>

</div>

<h3 class="sectionedit74" id="msrpuriparams">{msrpuri.params}</h3>
<div class="level3">

<p>
Parameters part of a MSRP <abbr title="Uniform Resource Identifier">URI</abbr>.
</p>

</div>

<h3 class="sectionedit75" id="msrpuriuserinfo">{msrpuri.userinfo}</h3>
<div class="level3">

<p>
User-Info part of a MSRP <abbr title="Uniform Resource Identifier">URI</abbr>. This is the same as user part, when there are no user parameters or password fields. Otherwise, it include the whole part after scheme and before &#039;@&#039; in front of host.
</p>

</div>

<h2 class="sectionedit76" id="regular_expression_transformations">Regular Expression Transformations</h2>
<div class="level2">

<p>
<span style="color: #0000ff">This transformation class is exported by <strong>textops</strong> module.</span>
</p>

</div>

<h3 class="sectionedit77" id="resubst_expression">{re.subst,expression}</h3>
<div class="level3">

<p>
Perform Perl-like substitutions on string value pseudo-variables.
</p>
<pre class="code c"><span class="co2"># Assign Request-URI user to PV</span>
$var<span class="br0">&#40;</span>user<span class="br0">&#41;</span> <span class="sy0">=</span> $<span class="br0">&#40;</span>ru<span class="br0">&#123;</span>re.<span class="me1">subst</span><span class="sy0">,/^</span>sip<span class="sy0">:</span><span class="br0">&#40;</span>.<span class="sy0">*</span><span class="br0">&#41;</span>@<span class="br0">&#40;</span>.<span class="sy0">*</span><span class="br0">&#41;</span><span class="sy0">/</span>\<span class="nu0">1</span><span class="sy0">/</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
<pre class="code c"><span class="co2"># Assign Request-URI user to PV, where every 'A' has been replaced by 'a'</span>
$var<span class="br0">&#40;</span>user<span class="br0">&#41;</span> <span class="sy0">=</span> $<span class="br0">&#40;</span>rU<span class="br0">&#123;</span>re.<span class="me1">subst</span><span class="sy0">,/</span>A<span class="sy0">/</span>a<span class="sy0">/</span>g<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
The prototype is:
</p>
<pre class="code c"><span class="br0">&#123;</span>re.<span class="me1">subst</span><span class="sy0">,/</span>match_expression<span class="sy0">/</span>replacement_expression<span class="sy0">/</span>flags<span class="br0">&#125;</span></pre>
<ul>
<li class="level1"><div class="li"> match_expression - Posix regular expression</div>
</li>
<li class="level1"><div class="li"> replacement_expression - substitution expression with back references to matched tokes: \1, \2, ¡­, \9</div>
</li>
<li class="level1"><div class="li"> flags:</div>
<ul>
<li class="level2"><div class="li"> i - match ignore case</div>
</li>
<li class="level2"><div class="li"> s - match within multi-lines strings</div>
</li>
<li class="level2"><div class="li"> g - replace all matches</div>
</li>
</ul>
</li>
</ul>

</div>

<h2 class="sectionedit78" id="sql_transformations">SQL Transformations</h2>
<div class="level2">

<p>
<span style="color: #0000ff">The transformations in this class are exported by the <strong>sqlops</strong> module.</span>
</p>

</div>

<h3 class="sectionedit79" id="sqlval">{sql.val}</h3>
<div class="level3">

<p>
This transformation outputs valid SQL values for various PV values:
</p>
<ul>
<li class="level1"><div class="li"> &lt;null&gt; values are output as NULL</div>
</li>
<li class="level1"><div class="li"> integers are output as integers</div>
</li>
<li class="level1"><div class="li"> everything else is output as quoted and escaped string</div>
</li>
</ul>
<pre class="code c">    $var<span class="br0">&#40;</span><span class="kw2">null</span><span class="br0">&#41;</span> <span class="sy0">=</span> $null<span class="sy0">;</span>
    $avp<span class="br0">&#40;</span><span class="kw2">null</span><span class="br0">&#41;</span> <span class="sy0">=</span> $null<span class="sy0">;</span>
    $avp<span class="br0">&#40;</span>str<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="st0">&quot;String with \ illegal <span class="es1">\\</span>characters&quot;</span><span class="sy0">;</span>
    $avp<span class="br0">&#40;</span>nr<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="nu0">12345</span><span class="sy0">;</span>
    $avp<span class="br0">&#40;</span>strnr<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="st0">&quot;12345&quot;</span><span class="sy0">;</span>
&nbsp;
    xlog<span class="br0">&#40;</span><span class="st0">&quot;$$rm = $rm = $(rm{s.sql})&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    xlog<span class="br0">&#40;</span><span class="st0">&quot;$$var(null) = $var(null) = $(var(null){s.sql})&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    xlog<span class="br0">&#40;</span><span class="st0">&quot;$$avp(null) = $avp(null) = $(avp(null){s.sql})&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    xlog<span class="br0">&#40;</span><span class="st0">&quot;$$avp(str) = $avp(str) = $(avp(str){s.sql})&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    xlog<span class="br0">&#40;</span><span class="st0">&quot;$$avp(nr) = $avp(nr) = $(avp(nr){s.sql})&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    xlog<span class="br0">&#40;</span><span class="st0">&quot;$$avp(strnr) = $avp(strnr) = $(avp(strnr){s.sql})&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  Output<span class="sy0">:</span>
    $rm <span class="sy0">=</span> ACK <span class="sy0">=</span> <span class="st0">'ACK'</span>
    $var<span class="br0">&#40;</span><span class="kw2">null</span><span class="br0">&#41;</span> <span class="sy0">=</span> <span class="nu0">0</span> <span class="sy0">=</span> <span class="nu0">0</span>
    $avp<span class="br0">&#40;</span><span class="kw2">null</span><span class="br0">&#41;</span> <span class="sy0">=</span> <span class="sy0">&lt;</span>null<span class="sy0">&gt;</span> <span class="sy0">=</span> NULL
    $avp<span class="br0">&#40;</span>str<span class="br0">&#41;</span> <span class="sy0">=</span> String with \ illegal \characters <span class="sy0">=</span> <span class="st0">'String with <span class="es1">\\</span> illegal <span class="es1">\\</span>characters'</span>
    $avp<span class="br0">&#40;</span>nr<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="nu0">12345</span> <span class="sy0">=</span> <span class="nu0">12345</span>
    $avp<span class="br0">&#40;</span>strnr<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="nu0">12345</span> <span class="sy0">=</span> <span class="st0">'12345'</span></pre>

</div>

<h3 class="sectionedit80" id="sqlvalint">{sql.val.int}</h3>
<div class="level3">

<p>
Like sql.val, but output number 0 for null values.
</p>

</div>

<h3 class="sectionedit81" id="sqlvalstr">{sql.val.str}</h3>
<div class="level3">

<p>
Like sql.val, but output string &#039;&#039; for null values.
</p>

</div>

<h2 class="sectionedit82" id="examples">Examples</h2>
<div class="level2">

<p>
Within a PV, many transformation can be applied, being executed from left to right.
</p>

<p>
* The length of the value of parameter at postion 1 (remember 0 is first position, 1 is second position)
</p>
<pre class="code">$var(x) = &quot;a=1;b=22;c=333&quot;;
$(var(x){param.value,$(var(x){param.name,1})}{s.len}) = 2</pre>

<p>
* Test if whether is un-registration or not
</p>
<pre class="code">if(is_method(&quot;REGISTER&quot;) &amp;&amp; is_present_hf(&quot;Expires&quot;) &amp;&amp; $(hdr(Expires){s.int})==0)
    xlog(&quot;This is an un-registration\n&quot;);</pre>

</div>

<h2 class="sectionedit83" id="http_url_transformations">HTTP URL Transformations</h2>
<div class="level2">

<p>
<span style="color: #0000ff">This transformation class is exported by <strong>xhttp</strong> module.</span>
</p>

</div>

<h3 class="sectionedit84" id="urlpath">{url.path}</h3>
<div class="level3">

<p>
Path part of an HTTP <abbr title="Uniform Resource Locator">URL</abbr>.
</p>

<p>
For example,
</p>
<pre class="code"># When the first line of HTTP request is
# &quot;GET /path/to/file/?this=is&amp;the=querystring&quot;

$(hu{url.path}) =&gt; &quot;/path/to/file/&quot;</pre>

</div>

<h3 class="sectionedit85" id="urlquerystring">{url.querystring}</h3>
<div class="level3">

<p>
Query string part of an HTTP <abbr title="Uniform Resource Locator">URL</abbr>.
For example,
</p>
<pre class="code"># When the first line of HTTP request is
# &quot;GET /path/to/file/?this=is&amp;the=querystring&quot;

$(hu{url.querystring}) =&gt; &quot;this=is&amp;the=querystring&quot;</pre>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>cookbooks/4.2.x/transformations.txt</bdi> ¡¤ Last modified: 2014/10/14 12:36 by <bdi>miconda</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="/wiki/cookbooks/4.2.x/transformations?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="/wiki/cookbooks/4.2.x/transformations?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="/wiki/cookbooks/4.2.x/transformations?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    
    <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="/wiki/lib/tpl/dokuwiki/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="/wiki/lib/tpl/dokuwiki/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="/wiki/lib/tpl/dokuwiki/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="/wiki/lib/tpl/dokuwiki/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="/wiki/lib/tpl/dokuwiki/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="/wiki/lib/exe/indexer.php?id=cookbooks%3A4.2.x%3Atransformations&amp;1437723766" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
